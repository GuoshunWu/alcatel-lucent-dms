// Generated by CoffeeScript 1.3.3
(function() {

  define(function(require, util, i18n) {
    var $, c18n, dicGrid;
    $ = require('jqgrid');
    util = require('util');
    i18n = require('i18n!nls/appmng');
    require('jqmsgbox');
    c18n = require('i18n!nls/common');
    dicGrid = $('#dictListPreviewGrid').jqGrid({
      url: '',
      datatype: 'json',
      editurl: "",
      width: 1000,
      minHeight: 200,
      height: 240,
      pager: '#dictListPreviewPager',
      rowNum: 30,
      rowList: [10, 20, 30],
      sortname: 'base.name',
      sortorder: 'asc',
      viewrecords: true,
      cellEdit: true,
      cellurl: '/app/update-dict',
      gridview: true,
      multiselect: true,
      caption: 'Dictionary for Application',
      colNames: ['LangRefCode', 'Dictionary', 'Version', 'Format', 'Encoding', 'Labels', 'Action'],
      colModel: [
        {
          name: 'langrefcode',
          index: 'langrefcode',
          width: 55,
          align: 'center',
          hidden: true
        }, {
          name: 'name',
          index: 'base.name',
          width: 200,
          editable: false,
          align: 'left'
        }, {
          name: 'version',
          index: 'version',
          width: 25,
          editable: true,
          editoptions: {
            value: {}
          },
          align: 'center'
        }, {
          name: 'format',
          index: 'base.format',
          width: 60,
          editable: true,
          edittype: 'select',
          editoptions: {
            value: "DCT:DCT;Dictionary conf:Dictionary conf;Text properties:Text properties;XML labels:XML labels"
          },
          align: 'center'
        }, {
          name: 'encoding',
          index: 'base.encoding',
          width: 40,
          editable: true,
          edittype: 'select',
          editoptions: {
            value: 'ISO-8859-1:ISO-8859-1;UTF-8:UTF-8;UTF-16LE:UTF-16LE;UTF-16BE:UTF-16BE'
          },
          align: 'center'
        }, {
          name: 'labelNum',
          index: 'labelNum',
          width: 20,
          align: 'center'
        }, {
          name: 'action',
          index: 'action',
          width: 45,
          editable: false,
          align: 'center'
        }
      ]
    });
    return {
      previewUpdate: function(param) {
        dicGrid = $('#dictListPreviewGrid');
        dicGrid.setGridParam({
          url: '/rest/delivery/dict',
          postData: {
            format: 'grid',
            handler: param.handler,
            prop: 'languageReferenceCode,base.name,version,base.format,base.encoding,labelNum'
          }
        });
        return dicGrid.trigger('reloadGrid');
      }
    };
  });

}).call(this);
