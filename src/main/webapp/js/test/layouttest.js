// Generated by CoffeeScript 1.5.0
(function() {

  jQuery(function($) {
    var PanelGroup, genLink, layout, pg, tDialog, tTabs;
    PanelGroup = (function() {

      function PanelGroup(panels, currentPanel) {
        this.panels = panels;
        this.currentPanel = currentPanel;
      }

      PanelGroup.prototype.switchTo = function(panelId, callback) {
        $("" + this.panels).hide();
        this.currentPanel = panelId;
        if (typeof console !== "undefined" && console !== null) {
          console.log("switch to " + this.panels + "[id='" + panelId + "'].");
        }
        return $("" + this.panels + "[id='" + panelId + "']").fadeIn("fast", function() {
          if ($.isFunction(callback)) {
            return callback();
          }
        });
      };

      return PanelGroup;

    })();
    tDialog = $('#testDialog').dialog({
      autoOpen: false,
      title: 'Test Dialog.',
      buttons: [
        {
          text: 'Test',
          click: function(e) {
            return alert('OK');
          }
        }, {
          text: 'Close',
          click: function(e) {
            return $(this).dialog('close');
          }
        }
      ]
    });
    tTabs = $('#p2 > .testTabs').tabs({
      show: function(event, ui) {
        return typeof console !== "undefined" && console !== null ? console.log(ui) : void 0;
      },
      show: function(event, ui) {
        return typeof console !== "undefined" && console !== null ? console.log("width: " + ($(ui.panel).width()) + ", height: " + ($(ui.panel).height()) + ".") : void 0;
      }
    });
    pg = new PanelGroup('div.panel', 'p1');
    pg.switchTo('p2', function() {
      var height;
      height = $("#" + pg.currentPanel).height();
      tTabs.tabs('option', 'height', height);
      return $('div', tTabs).height(height - 70);
    });
    layout = $('#layout-container').layout({
      applyDefaultStyles: true
    });
    $('#switchPanel').click(function(e) {
      if (pg.currentPanel === 'p1') {
        tDialog.dialog('close');
        layout.hide("west");
        return pg.switchTo('p2', function() {
          var height;
          height = $("#" + pg.currentPanel).height();
          tTabs.tabs('option', 'height', height);
          if (typeof console !== "undefined" && console !== null) {
            console.log("parent height=" + height + ".");
          }
          return $('div.ui-tabs-panel', tTabs).height(height - 65);
        });
      } else {
        layout.show("west");
        pg.switchTo('p1');
        return tDialog.dialog('open');
      }
    }).button();
    genLink = function() {
      var obj;
      obj = {
        aa: 1,
        bb: 2
      };
      return "<a href='javascript:alert((function(){return obj})(this));'>TestLink</a>";
    };
    return $('#testButton').click(function(e) {
      return $(genLink()).insertAfter(this);
    }).button();
  });

}).call(this);
