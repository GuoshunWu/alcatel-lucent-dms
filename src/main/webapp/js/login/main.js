// Generated by CoffeeScript 1.5.0
(function() {

  define(['formvalidate', 'i18n!nls/login'], function($, i18n) {
    $("span#buildNumber").html(window.param.buildNumber);
    $.formValidator.initConfig({
      formID: "loginForm",
      autoTip: true
    }, {
      onError: function(msg) {}
    }, {
      inIframe: false
    });
    $("#idLoginname").formValidator({
      onShow: "",
      onFocus: "",
      onCorrect: ""
    }).inputValidator({
      min: 1,
      max: 30,
      onError: i18n.nameerrtip
    });
    $("#idPassword").formValidator({
      onShow: "",
      onFocus: "",
      onCorrect: ""
    }).inputValidator({
      min: 1,
      max: 30,
      onError: i18n.pwderrtip
    });
    return $('#loginForm').on('submit', function() {
      if ($.formValidator.pageIsValid()) {
        if (typeof console !== "undefined" && console !== null) {
          console.log('client validation passed, make button grey to avoid resubmit');
        }
        return $("#idSubmit").attr('disabled', true).css('color', 'grey');
      }
    });
  });

}).call(this);
