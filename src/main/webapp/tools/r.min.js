var requirejs,require,define,xpcUtil;!function(console,args,readFileFunc){function showHelp(){console.log("See https://github.com/jrburke/r.js for usage.")}function loadLib(){!function(){var pathRegExp=/(\/|^)env\/|\{env\}/,env="unknown";"undefined"!=typeof Packages?env="rhino":"undefined"!=typeof process&&process.versions&&process.versions.node?env="node":"undefined"!=typeof navigator&&"undefined"!=typeof document||"undefined"!=typeof importScripts&&"undefined"!=typeof self?env="browser":"undefined"!=typeof Components&&Components.classes&&Components.interfaces&&(env="xpconnect"),define("env",{get:function(){return env},load:function(name,req,load,config){config.env&&(env=config.env),name=name.replace(pathRegExp,function(match,prefix){return-1===match.indexOf("{")?prefix+env+"/":env}),req([name],function(mod){load(mod)})}})}(),define("lang",function(){"use strict";function hasProp(obj,prop){return hasOwn.call(obj,prop)}var lang,hasOwn=Object.prototype.hasOwnProperty;return lang={backSlashRegExp:/\\/g,ostring:Object.prototype.toString,isArray:Array.isArray||function(it){return"[object Array]"===lang.ostring.call(it)},isFunction:function(it){return"[object Function]"===lang.ostring.call(it)},isRegExp:function(it){return it&&it instanceof RegExp},hasProp:hasProp,falseProp:function(obj,prop){return!hasProp(obj,prop)||!obj[prop]},getOwn:function(obj,prop){return hasProp(obj,prop)&&obj[prop]},_mixin:function(dest,source,override){var name;for(name in source)!source.hasOwnProperty(name)||!override&&dest.hasOwnProperty(name)||(dest[name]=source[name]);return dest},mixin:function(dest){var override,i,l,parameters=Array.prototype.slice.call(arguments);for(dest||(dest={}),parameters.length>2&&"boolean"==typeof arguments[parameters.length-1]&&(override=parameters.pop()),i=1,l=parameters.length;l>i;i++)lang._mixin(dest,parameters[i],override);return dest},deeplikeCopy:function(obj){var type,result;return lang.isArray(obj)?(result=[],obj.forEach(function(value){result.push(lang.deeplikeCopy(value))}),result):(type=typeof obj,null===obj||void 0===obj||"boolean"===type||"string"===type||"number"===type||lang.isFunction(obj)||lang.isRegExp(obj)?obj:(result={},lang.eachProp(obj,function(value,key){result[key]=lang.deeplikeCopy(value)}),result))},delegate:function(){function TMP(){}return function(obj,props){TMP.prototype=obj;var tmp=new TMP;return TMP.prototype=null,props&&lang.mixin(tmp,props),tmp}}(),each:function(ary,func){if(ary){var i;for(i=0;i<ary.length&&!func(ary[i],i,ary);i+=1);}},eachProp:function(obj,func){var prop;for(prop in obj)if(hasProp(obj,prop)&&func(obj[prop],prop))break},bind:function(obj,fn){return function(){return fn.apply(obj,arguments)}},jsEscape:function(content){return content.replace(/(["'\\])/g,"\\$1").replace(/[\f]/g,"\\f").replace(/[\b]/g,"\\b").replace(/[\n]/g,"\\n").replace(/[\t]/g,"\\t").replace(/[\r]/g,"\\r")}}});var prim;if(function(){"use strict";function hasProp(obj,prop){return hasOwn.call(obj,prop)}function each(ary,func){if(ary){var i;for(i=0;i<ary.length;i+=1)ary[i]&&func(ary[i],i,ary)}}function check(p){if(hasProp(p,"e")||hasProp(p,"v")){if(!prim.hideResolutionConflict)throw new Error("nope");return!1}return!0}function notify(ary,value){prim.nextTick(function(){each(ary,function(item){item(value)})})}var op=Object.prototype,hasOwn=op.hasOwnProperty;prim=function prim(){var p,ok=[],fail=[];return p={callback:function(yes,no){no&&p.errback(no),hasProp(p,"v")?prim.nextTick(function(){yes(p.v)}):ok.push(yes)},errback:function(no){hasProp(p,"e")?prim.nextTick(function(){no(p.e)}):fail.push(no)},finished:function(){return hasProp(p,"e")||hasProp(p,"v")},rejected:function(){return hasProp(p,"e")},resolve:function(v){return check(p)&&(p.v=v,notify(ok,v)),p},reject:function(e){return check(p)&&(p.e=e,notify(fail,e)),p},start:function(fn){return p.resolve(),p.promise.then(fn)},promise:{then:function(yes,no){var next=prim();return p.callback(function(v){try{yes&&"function"==typeof yes&&(v=yes(v)),v&&v.then?v.then(next.resolve,next.reject):next.resolve(v)}catch(e){next.reject(e)}},function(e){var err;try{no&&"function"==typeof no?(err=no(e),err&&err.then?err.then(next.resolve,next.reject):next.resolve(err)):next.reject(e)}catch(e2){next.reject(e2)}}),next.promise},fail:function(no){return p.promise.then(null,no)},end:function(){p.errback(function(e){throw e})}}}},prim.serial=function(ary){var result=prim().resolve().promise;return each(ary,function(item){result=result.then(function(){return item()})}),result},prim.nextTick="function"==typeof setImmediate?setImmediate:"undefined"!=typeof process&&process.nextTick?process.nextTick:"undefined"!=typeof setTimeout?function(fn){setTimeout(fn,0)}:function(fn){fn()},"function"==typeof define&&define.amd?define("prim",function(){return prim}):"undefined"!=typeof module&&module.exports&&(module.exports=prim)}(),"browser"===env&&define("browser/assert",function(){return{}}),"node"===env&&define("node/assert",["assert"],function(assert){return assert}),"rhino"===env&&define("rhino/assert",function(){return{}}),"xpconnect"===env&&define("xpconnect/assert",function(){return{}}),"browser"===env&&define("browser/args",function(){return[]}),"node"===env&&define("node/args",function(){var args=process.argv.slice(2);return args[0]&&0===args[0].indexOf("-")&&(args=args.slice(1)),args}),"rhino"===env){var jsLibRhinoArgs="undefined"!=typeof rhinoArgs&&rhinoArgs||[].concat(Array.prototype.slice.call(arguments,0));define("rhino/args",function(){var args=jsLibRhinoArgs;return args[0]&&0===args[0].indexOf("-")&&(args=args.slice(1)),args})}if("xpconnect"===env){var jsLibXpConnectArgs="undefined"!=typeof xpconnectArgs&&xpconnectArgs||[].concat(Array.prototype.slice.call(arguments,0));define("xpconnect/args",function(){var args=jsLibXpConnectArgs;return args[0]&&0===args[0].indexOf("-")&&(args=args.slice(1)),args})}"browser"===env&&define("browser/load",["./file"],function(file){function load(fileName){eval(file.readFile(fileName))}return load}),"node"===env&&define("node/load",["fs"],function(fs){function load(fileName){var contents=fs.readFileSync(fileName,"utf8");process.compile(contents,fileName)}return load}),"rhino"===env&&define("rhino/load",function(){return load}),"xpconnect"===env&&define("xpconnect/load",function(){return load}),"browser"===env&&define("browser/file",["prim"],function(prim){function frontSlash(path){return path.replace(/\\/g,"/")}function exists(path){var status,xhr=new XMLHttpRequest;return xhr.open("HEAD",path,!1),xhr.send(),status=xhr.status,200===status||304===status}var file,currDirRegExp=/^\.(\/|$)/;return file={backSlashRegExp:/\\/g,exclusionRegExp:/^\./,getLineSeparator:function(){return"/"},exists:function(fileName){return exists(fileName)},parent:function(fileName){var parts=fileName.split("/");return parts.pop(),parts.join("/")},absPath:function(fileName){var dir;return currDirRegExp.test(fileName)&&(dir=frontSlash(location.href),-1!==dir.indexOf("/")&&(dir=dir.split("/"),dir.splice(0,3),dir.pop(),dir="/"+dir.join("/")),fileName=dir+fileName.substring(1)),fileName},normalize:function(fileName){return fileName},isFile:function(){return!0},isDirectory:function(){return!1},getFilteredFileList:function(){console.log("file.getFilteredFileList is no-op in browser")},copyDir:function(){console.log("file.copyDir is no-op in browser")},copyFile:function(){console.log("file.copyFile is no-op in browser")},renameFile:function(){console.log("file.renameFile is no-op in browser")},readFile:function(path){var xhr=new XMLHttpRequest;return xhr.open("GET",path,!1),xhr.send(),xhr.responseText},readFileAsync:function(path){var xhr=new XMLHttpRequest,d=prim();return xhr.open("GET",path,!0),xhr.send(),xhr.onreadystatechange=function(){4===xhr.readyState&&(xhr.status>400?d.reject(new Error("Status: "+xhr.status+": "+xhr.statusText)):d.resolve(xhr.responseText))},d.promise},saveUtf8File:function(fileName,fileContents){file.saveFile(fileName,fileContents,"utf8")},saveFile:function(fileName,fileContents,encoding){requirejs.browser.saveFile(fileName,fileContents,encoding)},deleteFile:function(){console.log("file.deleteFile is no-op in browser")},deleteEmptyDirs:function(){console.log("file.deleteEmptyDirs is no-op in browser")}}}),"node"===env&&define("node/file",["fs","path","prim"],function(fs,path,prim){function frontSlash(path){return path.replace(/\\/g,"/")}function exists(path){isWindows&&"/"===path.charAt(path.length-1)&&":"!==path.charAt(path.length-2)&&(path=path.substring(0,path.length-1));try{return fs.statSync(path),!0}catch(e){return!1}}function mkDir(dir){exists(dir)||isWindows&&windowsDriveRegExp.test(dir)||fs.mkdirSync(dir,511)}function mkFullDir(dir){var parts=dir.split("/"),currDir="",first=!0;parts.forEach(function(part){currDir+=part+"/",first=!1,part&&mkDir(currDir)})}var file,isWindows="win32"===process.platform,windowsDriveRegExp=/^[a-zA-Z]\:\/$/;return file={backSlashRegExp:/\\/g,exclusionRegExp:/^\./,getLineSeparator:function(){return"/"},exists:function(fileName){return exists(fileName)},parent:function(fileName){var parts=fileName.split("/");return parts.pop(),parts.join("/")},absPath:function(fileName){return frontSlash(path.normalize(frontSlash(fs.realpathSync(fileName))))},normalize:function(fileName){return frontSlash(path.normalize(fileName))},isFile:function(path){return fs.statSync(path).isFile()},isDirectory:function(path){return fs.statSync(path).isDirectory()},getFilteredFileList:function(startDir,regExpFilters,makeUnixPaths){var topDir,regExpInclude,regExpExclude,dirFileArray,i,stat,filePath,ok,dirFiles,fileName,files=[];if(topDir=startDir,regExpInclude=regExpFilters.include||regExpFilters,regExpExclude=regExpFilters.exclude||null,file.exists(topDir))for(dirFileArray=fs.readdirSync(topDir),i=0;i<dirFileArray.length;i++)fileName=dirFileArray[i],filePath=path.join(topDir,fileName),stat=fs.statSync(filePath),stat.isFile()?(makeUnixPaths&&-1===filePath.indexOf("/")&&(filePath=frontSlash(filePath)),ok=!0,regExpInclude&&(ok=filePath.match(regExpInclude)),ok&&regExpExclude&&(ok=!filePath.match(regExpExclude)),!ok||file.exclusionRegExp&&file.exclusionRegExp.test(fileName)||files.push(filePath)):!stat.isDirectory()||file.exclusionRegExp&&file.exclusionRegExp.test(fileName)||(dirFiles=this.getFilteredFileList(filePath,regExpFilters,makeUnixPaths),files.push.apply(files,dirFiles));return files},copyDir:function(srcDir,destDir,regExpFilter,onlyCopyNew){regExpFilter=regExpFilter||/\w/,srcDir=frontSlash(path.normalize(srcDir)),destDir=frontSlash(path.normalize(destDir));var i,srcFileName,destFileName,fileNames=file.getFilteredFileList(srcDir,regExpFilter,!0),copiedFiles=[];for(i=0;i<fileNames.length;i++)srcFileName=fileNames[i],destFileName=srcFileName.replace(srcDir,destDir),file.copyFile(srcFileName,destFileName,onlyCopyNew)&&copiedFiles.push(destFileName);return copiedFiles.length?copiedFiles:null},copyFile:function(srcFileName,destFileName,onlyCopyNew){var parentDir;return onlyCopyNew&&file.exists(destFileName)&&fs.statSync(destFileName).mtime.getTime()>=fs.statSync(srcFileName).mtime.getTime()?!1:(parentDir=path.dirname(destFileName),file.exists(parentDir)||mkFullDir(parentDir),fs.writeFileSync(destFileName,fs.readFileSync(srcFileName,"binary"),"binary"),!0)},renameFile:function(from,to){return fs.renameSync(from,to)},readFile:function(path,encoding){"utf-8"===encoding&&(encoding="utf8"),encoding||(encoding="utf8");var text=fs.readFileSync(path,encoding);return 0===text.indexOf("﻿")&&(text=text.substring(1,text.length)),text},readFileAsync:function(path,encoding){var d=prim();try{d.resolve(file.readFile(path,encoding))}catch(e){d.reject(e)}return d.promise},saveUtf8File:function(fileName,fileContents){file.saveFile(fileName,fileContents,"utf8")},saveFile:function(fileName,fileContents,encoding){var parentDir;"utf-8"===encoding&&(encoding="utf8"),encoding||(encoding="utf8"),parentDir=path.dirname(fileName),file.exists(parentDir)||mkFullDir(parentDir),fs.writeFileSync(fileName,fileContents,encoding)},deleteFile:function(fileName){var files,i,stat;if(file.exists(fileName))if(stat=fs.statSync(fileName),stat.isDirectory()){for(files=fs.readdirSync(fileName),i=0;i<files.length;i++)this.deleteFile(path.join(fileName,files[i]));fs.rmdirSync(fileName)}else fs.unlinkSync(fileName)},deleteEmptyDirs:function(startDir){var dirFileArray,i,fileName,filePath,stat;if(file.exists(startDir)){for(dirFileArray=fs.readdirSync(startDir),i=0;i<dirFileArray.length;i++)fileName=dirFileArray[i],filePath=path.join(startDir,fileName),stat=fs.statSync(filePath),stat.isDirectory()&&file.deleteEmptyDirs(filePath);0===fs.readdirSync(startDir).length&&file.deleteFile(startDir)}}}}),"rhino"===env&&define("rhino/file",["prim"],function(prim){var file={backSlashRegExp:/\\/g,exclusionRegExp:/^\./,getLineSeparator:function(){return file.lineSeparator},lineSeparator:java.lang.System.getProperty("line.separator"),exists:function(fileName){return new java.io.File(fileName).exists()},parent:function(fileName){return file.absPath(new java.io.File(fileName).getParentFile())},normalize:function(fileName){return file.absPath(fileName)},isFile:function(path){return new java.io.File(path).isFile()},isDirectory:function(path){return new java.io.File(path).isDirectory()},absPath:function(fileObj){return"string"==typeof fileObj&&(fileObj=new java.io.File(fileObj)),(fileObj.getCanonicalPath()+"").replace(file.backSlashRegExp,"/")},getFilteredFileList:function(startDir,regExpFilters,makeUnixPaths,startDirIsJavaObject){var topDir,regExpInclude,regExpExclude,dirFileArray,i,fileObj,filePath,ok,dirFiles,files=[];if(topDir=startDir,startDirIsJavaObject||(topDir=new java.io.File(startDir)),regExpInclude=regExpFilters.include||regExpFilters,regExpExclude=regExpFilters.exclude||null,topDir.exists())for(dirFileArray=topDir.listFiles(),i=0;i<dirFileArray.length;i++)fileObj=dirFileArray[i],fileObj.isFile()?(filePath=fileObj.getPath(),makeUnixPaths&&(filePath=String(filePath),-1===filePath.indexOf("/")&&(filePath=filePath.replace(/\\/g,"/"))),ok=!0,regExpInclude&&(ok=filePath.match(regExpInclude)),ok&&regExpExclude&&(ok=!filePath.match(regExpExclude)),!ok||file.exclusionRegExp&&file.exclusionRegExp.test(fileObj.getName())||files.push(filePath)):!fileObj.isDirectory()||file.exclusionRegExp&&file.exclusionRegExp.test(fileObj.getName())||(dirFiles=this.getFilteredFileList(fileObj,regExpFilters,makeUnixPaths,!0),files.push.apply(files,dirFiles));return files},copyDir:function(srcDir,destDir,regExpFilter,onlyCopyNew){regExpFilter=regExpFilter||/\w/;var i,srcFileName,destFileName,fileNames=file.getFilteredFileList(srcDir,regExpFilter,!0),copiedFiles=[];for(i=0;i<fileNames.length;i++)srcFileName=fileNames[i],destFileName=srcFileName.replace(srcDir,destDir),file.copyFile(srcFileName,destFileName,onlyCopyNew)&&copiedFiles.push(destFileName);return copiedFiles.length?copiedFiles:null},copyFile:function(srcFileName,destFileName,onlyCopyNew){var srcFile,parentDir,srcChannel,destChannel,destFile=new java.io.File(destFileName);if(onlyCopyNew&&(srcFile=new java.io.File(srcFileName),destFile.exists()&&destFile.lastModified()>=srcFile.lastModified()))return!1;if(parentDir=destFile.getParentFile(),!parentDir.exists()&&!parentDir.mkdirs())throw"Could not create directory: "+parentDir.getCanonicalPath();return srcChannel=new java.io.FileInputStream(srcFileName).getChannel(),destChannel=new java.io.FileOutputStream(destFileName).getChannel(),destChannel.transferFrom(srcChannel,0,srcChannel.size()),srcChannel.close(),destChannel.close(),!0},renameFile:function(from,to){return new java.io.File(from).renameTo(new java.io.File(to))},readFile:function(path,encoding){encoding=encoding||"utf-8";var stringBuffer,line,fileObj=new java.io.File(path),input=new java.io.BufferedReader(new java.io.InputStreamReader(new java.io.FileInputStream(fileObj),encoding));try{for(stringBuffer=new java.lang.StringBuffer,line=input.readLine(),line&&line.length()&&65279===line.charAt(0)&&(line=line.substring(1));null!==line;)stringBuffer.append(line),stringBuffer.append(file.lineSeparator),line=input.readLine();return String(stringBuffer.toString())}finally{input.close()}},readFileAsync:function(path,encoding){var d=prim();try{d.resolve(file.readFile(path,encoding))}catch(e){d.reject(e)}return d.promise},saveUtf8File:function(fileName,fileContents){file.saveFile(fileName,fileContents,"utf-8")},saveFile:function(fileName,fileContents,encoding){var outWriter,parentDir,os,outFile=new java.io.File(fileName);if(parentDir=outFile.getAbsoluteFile().getParentFile(),!parentDir.exists()&&!parentDir.mkdirs())throw"Could not create directory: "+parentDir.getAbsolutePath();outWriter=encoding?new java.io.OutputStreamWriter(new java.io.FileOutputStream(outFile),encoding):new java.io.OutputStreamWriter(new java.io.FileOutputStream(outFile)),os=new java.io.BufferedWriter(outWriter);try{os.write(fileContents)}finally{os.close()}},deleteFile:function(fileName){var files,i,fileObj=new java.io.File(fileName);if(fileObj.exists()){if(fileObj.isDirectory())for(files=fileObj.listFiles(),i=0;i<files.length;i++)this.deleteFile(files[i]);fileObj["delete"]()}},deleteEmptyDirs:function(startDir,startDirIsJavaObject){var dirFileArray,i,fileObj,topDir=startDir;if(startDirIsJavaObject||(topDir=new java.io.File(startDir)),topDir.exists()){for(dirFileArray=topDir.listFiles(),i=0;i<dirFileArray.length;i++)fileObj=dirFileArray[i],fileObj.isDirectory()&&file.deleteEmptyDirs(fileObj,!0);0===topDir.listFiles().length&&file.deleteFile(String(topDir.getPath()))}}};return file}),"xpconnect"===env&&define("xpconnect/file",["prim"],function(prim){function mkFullDir(dirObj){dirObj.exists()||dirObj.create(1,511)}var file,Cc=Components.classes,Ci=Components.interfaces,xpfile=xpcUtil.xpfile;return file={backSlashRegExp:/\\/g,exclusionRegExp:/^\./,getLineSeparator:function(){return file.lineSeparator},lineSeparator:"@mozilla.org/windows-registry-key;1"in Cc?"\r\n":"\n",exists:function(fileName){return xpfile(fileName).exists()},parent:function(fileName){return xpfile(fileName).parent},normalize:function(fileName){return file.absPath(fileName)},isFile:function(path){return xpfile(path).isFile()},isDirectory:function(path){return xpfile(path).isDirectory()},absPath:function(fileObj){return"string"==typeof fileObj&&(fileObj=xpfile(fileObj)),fileObj.path},getFilteredFileList:function(startDir,regExpFilters,makeUnixPaths,startDirIsObject){var topDir,regExpInclude,regExpExclude,dirFileArray,fileObj,filePath,ok,dirFiles,files=[];if(topDir=startDir,startDirIsObject||(topDir=xpfile(startDir)),regExpInclude=regExpFilters.include||regExpFilters,regExpExclude=regExpFilters.exclude||null,topDir.exists())for(dirFileArray=topDir.directoryEntries;dirFileArray.hasMoreElements();)fileObj=dirFileArray.getNext().QueryInterface(Ci.nsILocalFile),fileObj.isFile()?(filePath=fileObj.path,makeUnixPaths&&-1===filePath.indexOf("/")&&(filePath=filePath.replace(/\\/g,"/")),ok=!0,regExpInclude&&(ok=filePath.match(regExpInclude)),ok&&regExpExclude&&(ok=!filePath.match(regExpExclude)),!ok||file.exclusionRegExp&&file.exclusionRegExp.test(fileObj.leafName)||files.push(filePath)):!fileObj.isDirectory()||file.exclusionRegExp&&file.exclusionRegExp.test(fileObj.leafName)||(dirFiles=this.getFilteredFileList(fileObj,regExpFilters,makeUnixPaths,!0),files.push.apply(files,dirFiles));return files},copyDir:function(srcDir,destDir,regExpFilter,onlyCopyNew){regExpFilter=regExpFilter||/\w/;var i,srcFileName,destFileName,fileNames=file.getFilteredFileList(srcDir,regExpFilter,!0),copiedFiles=[];for(i=0;i<fileNames.length;i+=1)srcFileName=fileNames[i],destFileName=srcFileName.replace(srcDir,destDir),file.copyFile(srcFileName,destFileName,onlyCopyNew)&&copiedFiles.push(destFileName);return copiedFiles.length?copiedFiles:null},copyFile:function(srcFileName,destFileName,onlyCopyNew){var destFile=xpfile(destFileName),srcFile=xpfile(srcFileName);return onlyCopyNew&&destFile.exists()&&destFile.lastModifiedTime>=srcFile.lastModifiedTime?!1:(srcFile.copyTo(destFile.parent,destFile.leafName),!0)},renameFile:function(from,to){var toFile=xpfile(to);return xpfile(from).moveTo(toFile.parent,toFile.leafName)},readFile:xpcUtil.readFile,readFileAsync:function(path,encoding){var d=prim();try{d.resolve(file.readFile(path,encoding))}catch(e){d.reject(e)}return d.promise},saveUtf8File:function(fileName,fileContents){file.saveFile(fileName,fileContents,"utf-8")},saveFile:function(fileName,fileContents,encoding){var outStream,convertStream,fileObj=xpfile(fileName);mkFullDir(fileObj.parent);try{outStream=Cc["@mozilla.org/network/file-output-stream;1"].createInstance(Ci.nsIFileOutputStream),outStream.init(fileObj,42,511,0),convertStream=Cc["@mozilla.org/intl/converter-output-stream;1"].createInstance(Ci.nsIConverterOutputStream),convertStream.init(outStream,encoding,0,0),convertStream.writeString(fileContents)}catch(e){throw new Error((fileObj&&fileObj.path||"")+": "+e)}finally{convertStream&&convertStream.close(),outStream&&outStream.close()}},deleteFile:function(fileName){var fileObj=xpfile(fileName);fileObj.exists()&&fileObj.remove(!0)},deleteEmptyDirs:function(startDir,startDirIsObject){var dirFileArray,fileObj,topDir=startDir;if(startDirIsObject||(topDir=xpfile(startDir)),topDir.exists()){for(dirFileArray=topDir.directoryEntries;dirFileArray.hasMoreElements();)fileObj=dirFileArray.getNext().QueryInterface(Ci.nsILocalFile),fileObj.isDirectory()&&file.deleteEmptyDirs(fileObj,!0);dirFileArray=topDir.directoryEntries,dirFileArray.hasMoreElements()||file.deleteFile(topDir.path)}}}}),"browser"===env&&define("browser/quit",function(){"use strict";return function(){}}),"node"===env&&define("node/quit",function(){"use strict";return function(code){var draining=0,exit=function(){0===draining?process.exit(code):draining-=1};process.stdout.bufferSize&&(draining+=1,process.stdout.once("drain",exit)),process.stderr.bufferSize&&(draining+=1,process.stderr.once("drain",exit)),exit()}}),"rhino"===env&&define("rhino/quit",function(){"use strict";return function(code){return quit(code)}}),"xpconnect"===env&&define("xpconnect/quit",function(){"use strict";return function(code){return quit(code)}}),"browser"===env&&define("browser/print",function(){function print(msg){console.log(msg)}return print}),"node"===env&&define("node/print",function(){function print(msg){console.log(msg)}return print}),"rhino"===env&&define("rhino/print",function(){return print}),"xpconnect"===env&&define("xpconnect/print",function(){return print}),define("logger",["env!env/print"],function(print){var logger={TRACE:0,INFO:1,WARN:2,ERROR:3,SILENT:4,level:0,logPrefix:"",logLevel:function(level){this.level=level},trace:function(message){this.level<=this.TRACE&&this._print(message)},info:function(message){this.level<=this.INFO&&this._print(message)},warn:function(message){this.level<=this.WARN&&this._print(message)},error:function(message){this.level<=this.ERROR&&this._print(message)},_print:function(message){this._sysPrint((this.logPrefix?this.logPrefix+" ":"")+message)},_sysPrint:function(message){print(message)}};return logger}),function(root,factory){"use strict";"function"==typeof define&&define.amd?define("esprima",["exports"],factory):"undefined"!=typeof exports?factory(exports):factory(root.esprima={})}(this,function(exports){"use strict";function assert(condition,message){if(!condition)throw new Error("ASSERT: "+message)}function sliceSource(from,to){return source.slice(from,to)}function isDecimalDigit(ch){return"0123456789".indexOf(ch)>=0}function isHexDigit(ch){return"0123456789abcdefABCDEF".indexOf(ch)>=0}function isOctalDigit(ch){return"01234567".indexOf(ch)>=0}function isWhiteSpace(ch){return" "===ch||"	"===ch||""===ch||"\f"===ch||" "===ch||ch.charCodeAt(0)>=5760&&" ᠎             　﻿".indexOf(ch)>=0}function isLineTerminator(ch){return"\n"===ch||"\r"===ch||"\u2028"===ch||"\u2029"===ch}function isIdentifierStart(ch){return"$"===ch||"_"===ch||"\\"===ch||ch>="a"&&"z">=ch||ch>="A"&&"Z">=ch||ch.charCodeAt(0)>=128&&Regex.NonAsciiIdentifierStart.test(ch)}function isIdentifierPart(ch){return"$"===ch||"_"===ch||"\\"===ch||ch>="a"&&"z">=ch||ch>="A"&&"Z">=ch||ch>="0"&&"9">=ch||ch.charCodeAt(0)>=128&&Regex.NonAsciiIdentifierPart.test(ch)}function isFutureReservedWord(id){switch(id){case"class":case"enum":case"export":case"extends":case"import":case"super":return!0}return!1}function isStrictModeReservedWord(id){switch(id){case"implements":case"interface":case"package":case"private":case"protected":case"public":case"static":case"yield":case"let":return!0}return!1}function isRestrictedWord(id){return"eval"===id||"arguments"===id}function isKeyword(id){var keyword=!1;switch(id.length){case 2:keyword="if"===id||"in"===id||"do"===id;break;case 3:keyword="var"===id||"for"===id||"new"===id||"try"===id;break;case 4:keyword="this"===id||"else"===id||"case"===id||"void"===id||"with"===id;break;case 5:keyword="while"===id||"break"===id||"catch"===id||"throw"===id;break;case 6:keyword="return"===id||"typeof"===id||"delete"===id||"switch"===id;break;case 7:keyword="default"===id||"finally"===id;break;case 8:keyword="function"===id||"continue"===id||"debugger"===id;break;case 10:keyword="instanceof"===id}if(keyword)return!0;switch(id){case"const":return!0;case"yield":case"let":return!0}return strict&&isStrictModeReservedWord(id)?!0:isFutureReservedWord(id)}function skipComment(){var ch,blockComment,lineComment;for(blockComment=!1,lineComment=!1;length>index;)if(ch=source[index],lineComment)ch=source[index++],isLineTerminator(ch)&&(lineComment=!1,"\r"===ch&&"\n"===source[index]&&++index,++lineNumber,lineStart=index);else if(blockComment)isLineTerminator(ch)?("\r"===ch&&"\n"===source[index+1]&&++index,++lineNumber,++index,lineStart=index,index>=length&&throwError({},Messages.UnexpectedToken,"ILLEGAL")):(ch=source[index++],index>=length&&throwError({},Messages.UnexpectedToken,"ILLEGAL"),"*"===ch&&(ch=source[index],"/"===ch&&(++index,blockComment=!1)));else if("/"===ch)if(ch=source[index+1],"/"===ch)index+=2,lineComment=!0;else{if("*"!==ch)break;index+=2,blockComment=!0,index>=length&&throwError({},Messages.UnexpectedToken,"ILLEGAL")}else if(isWhiteSpace(ch))++index;else{if(!isLineTerminator(ch))break;++index,"\r"===ch&&"\n"===source[index]&&++index,++lineNumber,lineStart=index}}function scanHexEscape(prefix){var i,len,ch,code=0;for(len="u"===prefix?4:2,i=0;len>i;++i){if(!(length>index&&isHexDigit(source[index])))return"";ch=source[index++],code=16*code+"0123456789abcdef".indexOf(ch.toLowerCase())}return String.fromCharCode(code)}function scanIdentifier(){var ch,start,id,restore;if(ch=source[index],isIdentifierStart(ch)){if(start=index,"\\"===ch){if(++index,"u"!==source[index])return;if(++index,restore=index,ch=scanHexEscape("u")){if("\\"===ch||!isIdentifierStart(ch))return;id=ch}else index=restore,id="u"}else id=source[index++];for(;length>index&&(ch=source[index],isIdentifierPart(ch));)if("\\"===ch){if(++index,"u"!==source[index])return;if(++index,restore=index,ch=scanHexEscape("u")){if("\\"===ch||!isIdentifierPart(ch))return;id+=ch}else index=restore,id+="u"}else id+=source[index++];return 1===id.length?{type:Token.Identifier,value:id,lineNumber:lineNumber,lineStart:lineStart,range:[start,index]}:isKeyword(id)?{type:Token.Keyword,value:id,lineNumber:lineNumber,lineStart:lineStart,range:[start,index]}:"null"===id?{type:Token.NullLiteral,value:id,lineNumber:lineNumber,lineStart:lineStart,range:[start,index]}:"true"===id||"false"===id?{type:Token.BooleanLiteral,value:id,lineNumber:lineNumber,lineStart:lineStart,range:[start,index]}:{type:Token.Identifier,value:id,lineNumber:lineNumber,lineStart:lineStart,range:[start,index]}}}function scanPunctuator(){var ch2,ch3,ch4,start=index,ch1=source[index];return";"===ch1||"{"===ch1||"}"===ch1?(++index,{type:Token.Punctuator,value:ch1,lineNumber:lineNumber,lineStart:lineStart,range:[start,index]}):","===ch1||"("===ch1||")"===ch1?(++index,{type:Token.Punctuator,value:ch1,lineNumber:lineNumber,lineStart:lineStart,range:[start,index]}):(ch2=source[index+1],"."!==ch1||isDecimalDigit(ch2)?(ch3=source[index+2],ch4=source[index+3],">"===ch1&&">"===ch2&&">"===ch3&&"="===ch4?(index+=4,{type:Token.Punctuator,value:">>>=",lineNumber:lineNumber,lineStart:lineStart,range:[start,index]}):"="===ch1&&"="===ch2&&"="===ch3?(index+=3,{type:Token.Punctuator,value:"===",lineNumber:lineNumber,lineStart:lineStart,range:[start,index]}):"!"===ch1&&"="===ch2&&"="===ch3?(index+=3,{type:Token.Punctuator,value:"!==",lineNumber:lineNumber,lineStart:lineStart,range:[start,index]}):">"===ch1&&">"===ch2&&">"===ch3?(index+=3,{type:Token.Punctuator,value:">>>",lineNumber:lineNumber,lineStart:lineStart,range:[start,index]}):"<"===ch1&&"<"===ch2&&"="===ch3?(index+=3,{type:Token.Punctuator,value:"<<=",lineNumber:lineNumber,lineStart:lineStart,range:[start,index]}):">"===ch1&&">"===ch2&&"="===ch3?(index+=3,{type:Token.Punctuator,value:">>=",lineNumber:lineNumber,lineStart:lineStart,range:[start,index]}):"="===ch2&&"<>=!+-*%&|^/".indexOf(ch1)>=0?(index+=2,{type:Token.Punctuator,value:ch1+ch2,lineNumber:lineNumber,lineStart:lineStart,range:[start,index]}):ch1===ch2&&"+-<>&|".indexOf(ch1)>=0&&"+-<>&|".indexOf(ch2)>=0?(index+=2,{type:Token.Punctuator,value:ch1+ch2,lineNumber:lineNumber,lineStart:lineStart,range:[start,index]}):"[]<>+-*%&|^!~?:=/".indexOf(ch1)>=0?{type:Token.Punctuator,value:source[index++],lineNumber:lineNumber,lineStart:lineStart,range:[start,index]}:void 0):{type:Token.Punctuator,value:source[index++],lineNumber:lineNumber,lineStart:lineStart,range:[start,index]})}function scanNumericLiteral(){var number,start,ch;if(ch=source[index],assert(isDecimalDigit(ch)||"."===ch,"Numeric literal must start with a decimal digit or a decimal point"),start=index,number="","."!==ch){if(number=source[index++],ch=source[index],"0"===number){if("x"===ch||"X"===ch){for(number+=source[index++];length>index&&(ch=source[index],isHexDigit(ch));)number+=source[index++];return number.length<=2&&throwError({},Messages.UnexpectedToken,"ILLEGAL"),length>index&&(ch=source[index],isIdentifierStart(ch)&&throwError({},Messages.UnexpectedToken,"ILLEGAL")),{type:Token.NumericLiteral,value:parseInt(number,16),lineNumber:lineNumber,lineStart:lineStart,range:[start,index]}}if(isOctalDigit(ch)){for(number+=source[index++];length>index&&(ch=source[index],isOctalDigit(ch));)number+=source[index++];return length>index&&(ch=source[index],(isIdentifierStart(ch)||isDecimalDigit(ch))&&throwError({},Messages.UnexpectedToken,"ILLEGAL")),{type:Token.NumericLiteral,value:parseInt(number,8),octal:!0,lineNumber:lineNumber,lineStart:lineStart,range:[start,index]}}isDecimalDigit(ch)&&throwError({},Messages.UnexpectedToken,"ILLEGAL")}for(;length>index&&(ch=source[index],isDecimalDigit(ch));)number+=source[index++]}if("."===ch)for(number+=source[index++];length>index&&(ch=source[index],isDecimalDigit(ch));)number+=source[index++];if("e"===ch||"E"===ch)if(number+=source[index++],ch=source[index],("+"===ch||"-"===ch)&&(number+=source[index++]),ch=source[index],isDecimalDigit(ch))for(number+=source[index++];length>index&&(ch=source[index],isDecimalDigit(ch));)number+=source[index++];else ch="character "+ch,index>=length&&(ch="<end>"),throwError({},Messages.UnexpectedToken,"ILLEGAL");return length>index&&(ch=source[index],isIdentifierStart(ch)&&throwError({},Messages.UnexpectedToken,"ILLEGAL")),{type:Token.NumericLiteral,value:parseFloat(number),lineNumber:lineNumber,lineStart:lineStart,range:[start,index]}}function scanStringLiteral(){var quote,start,ch,code,unescaped,restore,str="",octal=!1;for(quote=source[index],assert("'"===quote||'"'===quote,"String literal must starts with a quote"),start=index,++index;length>index;){if(ch=source[index++],ch===quote){quote="";break}if("\\"===ch)if(ch=source[index++],isLineTerminator(ch))++lineNumber,"\r"===ch&&"\n"===source[index]&&++index;else switch(ch){case"n":str+="\n";break;case"r":str+="\r";break;case"t":str+="	";break;case"u":case"x":restore=index,unescaped=scanHexEscape(ch),unescaped?str+=unescaped:(index=restore,str+=ch);
break;case"b":str+="\b";break;case"f":str+="\f";break;case"v":str+="";break;default:isOctalDigit(ch)?(code="01234567".indexOf(ch),0!==code&&(octal=!0),length>index&&isOctalDigit(source[index])&&(octal=!0,code=8*code+"01234567".indexOf(source[index++]),"0123".indexOf(ch)>=0&&length>index&&isOctalDigit(source[index])&&(code=8*code+"01234567".indexOf(source[index++]))),str+=String.fromCharCode(code)):str+=ch}else{if(isLineTerminator(ch))break;str+=ch}}return""!==quote&&throwError({},Messages.UnexpectedToken,"ILLEGAL"),{type:Token.StringLiteral,value:str,octal:octal,lineNumber:lineNumber,lineStart:lineStart,range:[start,index]}}function scanRegExp(){var str,ch,start,pattern,flags,value,restore,classMarker=!1,terminated=!1;for(buffer=null,skipComment(),start=index,ch=source[index],assert("/"===ch,"Regular expression literal must start with a slash"),str=source[index++];length>index;)if(ch=source[index++],str+=ch,"\\"===ch)ch=source[index++],isLineTerminator(ch)&&throwError({},Messages.UnterminatedRegExp),str+=ch;else if(classMarker)"]"===ch&&(classMarker=!1);else{if("/"===ch){terminated=!0;break}"["===ch?classMarker=!0:isLineTerminator(ch)&&throwError({},Messages.UnterminatedRegExp)}for(terminated||throwError({},Messages.UnterminatedRegExp),pattern=str.substr(1,str.length-2),flags="";length>index&&(ch=source[index],isIdentifierPart(ch));)if(++index,"\\"===ch&&length>index)if(ch=source[index],"u"===ch)if(++index,restore=index,ch=scanHexEscape("u"))for(flags+=ch,str+="\\u";index>restore;++restore)str+=source[restore];else index=restore,flags+="u",str+="\\u";else str+="\\";else flags+=ch,str+=ch;try{value=new RegExp(pattern,flags)}catch(e){throwError({},Messages.InvalidRegExp)}return{literal:str,value:value,range:[start,index]}}function isIdentifierName(token){return token.type===Token.Identifier||token.type===Token.Keyword||token.type===Token.BooleanLiteral||token.type===Token.NullLiteral}function advance(){var ch,token;return skipComment(),index>=length?{type:Token.EOF,lineNumber:lineNumber,lineStart:lineStart,range:[index,index]}:(token=scanPunctuator(),"undefined"!=typeof token?token:(ch=source[index],"'"===ch||'"'===ch?scanStringLiteral():"."===ch||isDecimalDigit(ch)?scanNumericLiteral():(token=scanIdentifier(),"undefined"!=typeof token?token:(throwError({},Messages.UnexpectedToken,"ILLEGAL"),void 0))))}function lex(){var token;return buffer?(index=buffer.range[1],lineNumber=buffer.lineNumber,lineStart=buffer.lineStart,token=buffer,buffer=null,token):(buffer=null,advance())}function lookahead(){var pos,line,start;return null!==buffer?buffer:(pos=index,line=lineNumber,start=lineStart,buffer=advance(),index=pos,lineNumber=line,lineStart=start,buffer)}function peekLineTerminator(){var pos,line,start,found;return pos=index,line=lineNumber,start=lineStart,skipComment(),found=lineNumber!==line,index=pos,lineNumber=line,lineStart=start,found}function throwError(token,messageFormat){var error,args=Array.prototype.slice.call(arguments,2),msg=messageFormat.replace(/%(\d)/g,function(whole,index){return args[index]||""});throw"number"==typeof token.lineNumber?(error=new Error("Line "+token.lineNumber+": "+msg),error.index=token.range[0],error.lineNumber=token.lineNumber,error.column=token.range[0]-lineStart+1):(error=new Error("Line "+lineNumber+": "+msg),error.index=index,error.lineNumber=lineNumber,error.column=index-lineStart+1),error}function throwErrorTolerant(){try{throwError.apply(null,arguments)}catch(e){if(!extra.errors)throw e;extra.errors.push(e)}}function throwUnexpected(token){if(token.type===Token.EOF&&throwError(token,Messages.UnexpectedEOS),token.type===Token.NumericLiteral&&throwError(token,Messages.UnexpectedNumber),token.type===Token.StringLiteral&&throwError(token,Messages.UnexpectedString),token.type===Token.Identifier&&throwError(token,Messages.UnexpectedIdentifier),token.type===Token.Keyword){if(isFutureReservedWord(token.value))throwError(token,Messages.UnexpectedReserved);else if(strict&&isStrictModeReservedWord(token.value))return throwErrorTolerant(token,Messages.StrictReservedWord),void 0;throwError(token,Messages.UnexpectedToken,token.value)}throwError(token,Messages.UnexpectedToken,token.value)}function expect(value){var token=lex();(token.type!==Token.Punctuator||token.value!==value)&&throwUnexpected(token)}function expectKeyword(keyword){var token=lex();(token.type!==Token.Keyword||token.value!==keyword)&&throwUnexpected(token)}function match(value){var token=lookahead();return token.type===Token.Punctuator&&token.value===value}function matchKeyword(keyword){var token=lookahead();return token.type===Token.Keyword&&token.value===keyword}function matchAssign(){var token=lookahead(),op=token.value;return token.type!==Token.Punctuator?!1:"="===op||"*="===op||"/="===op||"%="===op||"+="===op||"-="===op||"<<="===op||">>="===op||">>>="===op||"&="===op||"^="===op||"|="===op}function consumeSemicolon(){var token,line;if(";"===source[index])return lex(),void 0;if(line=lineNumber,skipComment(),lineNumber===line){if(match(";"))return lex(),void 0;token=lookahead(),token.type===Token.EOF||match("}")||throwUnexpected(token)}}function isLeftHandSide(expr){return expr.type===Syntax.Identifier||expr.type===Syntax.MemberExpression}function parseArrayInitialiser(){var elements=[];for(expect("[");!match("]");)match(",")?(lex(),elements.push(null)):(elements.push(parseAssignmentExpression()),match("]")||expect(","));return expect("]"),{type:Syntax.ArrayExpression,elements:elements}}function parsePropertyFunction(param,first){var previousStrict,body;return previousStrict=strict,body=parseFunctionSourceElements(),first&&strict&&isRestrictedWord(param[0].name)&&throwErrorTolerant(first,Messages.StrictParamName),strict=previousStrict,{type:Syntax.FunctionExpression,id:null,params:param,defaults:[],body:body,rest:null,generator:!1,expression:!1}}function parseObjectPropertyKey(){var token=lex();return token.type===Token.StringLiteral||token.type===Token.NumericLiteral?(strict&&token.octal&&throwErrorTolerant(token,Messages.StrictOctalLiteral),createLiteral(token)):{type:Syntax.Identifier,name:token.value}}function parseObjectProperty(){var token,key,id,param;return token=lookahead(),token.type===Token.Identifier?(id=parseObjectPropertyKey(),"get"!==token.value||match(":")?"set"!==token.value||match(":")?(expect(":"),{type:Syntax.Property,key:id,value:parseAssignmentExpression(),kind:"init"}):(key=parseObjectPropertyKey(),expect("("),token=lookahead(),token.type!==Token.Identifier?(expect(")"),throwErrorTolerant(token,Messages.UnexpectedToken,token.value),{type:Syntax.Property,key:key,value:parsePropertyFunction([]),kind:"set"}):(param=[parseVariableIdentifier()],expect(")"),{type:Syntax.Property,key:key,value:parsePropertyFunction(param,token),kind:"set"})):(key=parseObjectPropertyKey(),expect("("),expect(")"),{type:Syntax.Property,key:key,value:parsePropertyFunction([]),kind:"get"})):token.type!==Token.EOF&&token.type!==Token.Punctuator?(key=parseObjectPropertyKey(),expect(":"),{type:Syntax.Property,key:key,value:parseAssignmentExpression(),kind:"init"}):(throwUnexpected(token),void 0)}function parseObjectInitialiser(){var property,name,kind,properties=[],map={},toString=String;for(expect("{");!match("}");)property=parseObjectProperty(),name=property.key.type===Syntax.Identifier?property.key.name:toString(property.key.value),kind="init"===property.kind?PropertyKind.Data:"get"===property.kind?PropertyKind.Get:PropertyKind.Set,Object.prototype.hasOwnProperty.call(map,name)?(map[name]===PropertyKind.Data?strict&&kind===PropertyKind.Data?throwErrorTolerant({},Messages.StrictDuplicateProperty):kind!==PropertyKind.Data&&throwErrorTolerant({},Messages.AccessorDataProperty):kind===PropertyKind.Data?throwErrorTolerant({},Messages.AccessorDataProperty):map[name]&kind&&throwErrorTolerant({},Messages.AccessorGetSet),map[name]|=kind):map[name]=kind,properties.push(property),match("}")||expect(",");return expect("}"),{type:Syntax.ObjectExpression,properties:properties}}function parseGroupExpression(){var expr;return expect("("),expr=parseExpression(),expect(")"),expr}function parsePrimaryExpression(){var token=lookahead(),type=token.type;if(type===Token.Identifier)return{type:Syntax.Identifier,name:lex().value};if(type===Token.StringLiteral||type===Token.NumericLiteral)return strict&&token.octal&&throwErrorTolerant(token,Messages.StrictOctalLiteral),createLiteral(lex());if(type===Token.Keyword){if(matchKeyword("this"))return lex(),{type:Syntax.ThisExpression};if(matchKeyword("function"))return parseFunctionExpression()}return type===Token.BooleanLiteral?(lex(),token.value="true"===token.value,createLiteral(token)):type===Token.NullLiteral?(lex(),token.value=null,createLiteral(token)):match("[")?parseArrayInitialiser():match("{")?parseObjectInitialiser():match("(")?parseGroupExpression():match("/")||match("/=")?createLiteral(scanRegExp()):throwUnexpected(lex())}function parseArguments(){var args=[];if(expect("("),!match(")"))for(;length>index&&(args.push(parseAssignmentExpression()),!match(")"));)expect(",");return expect(")"),args}function parseNonComputedProperty(){var token=lex();return isIdentifierName(token)||throwUnexpected(token),{type:Syntax.Identifier,name:token.value}}function parseNonComputedMember(){return expect("."),parseNonComputedProperty()}function parseComputedMember(){var expr;return expect("["),expr=parseExpression(),expect("]"),expr}function parseNewExpression(){var expr;return expectKeyword("new"),expr={type:Syntax.NewExpression,callee:parseLeftHandSideExpression(),arguments:[]},match("(")&&(expr.arguments=parseArguments()),expr}function parseLeftHandSideExpressionAllowCall(){var expr;for(expr=matchKeyword("new")?parseNewExpression():parsePrimaryExpression();match(".")||match("[")||match("(");)expr=match("(")?{type:Syntax.CallExpression,callee:expr,arguments:parseArguments()}:match("[")?{type:Syntax.MemberExpression,computed:!0,object:expr,property:parseComputedMember()}:{type:Syntax.MemberExpression,computed:!1,object:expr,property:parseNonComputedMember()};return expr}function parseLeftHandSideExpression(){var expr;for(expr=matchKeyword("new")?parseNewExpression():parsePrimaryExpression();match(".")||match("[");)expr=match("[")?{type:Syntax.MemberExpression,computed:!0,object:expr,property:parseComputedMember()}:{type:Syntax.MemberExpression,computed:!1,object:expr,property:parseNonComputedMember()};return expr}function parsePostfixExpression(){var token,expr=parseLeftHandSideExpressionAllowCall();return token=lookahead(),token.type!==Token.Punctuator?expr:(!match("++")&&!match("--")||peekLineTerminator()||(strict&&expr.type===Syntax.Identifier&&isRestrictedWord(expr.name)&&throwErrorTolerant({},Messages.StrictLHSPostfix),isLeftHandSide(expr)||throwErrorTolerant({},Messages.InvalidLHSInAssignment),expr={type:Syntax.UpdateExpression,operator:lex().value,argument:expr,prefix:!1}),expr)}function parseUnaryExpression(){var token,expr;return token=lookahead(),token.type!==Token.Punctuator&&token.type!==Token.Keyword?parsePostfixExpression():match("++")||match("--")?(token=lex(),expr=parseUnaryExpression(),strict&&expr.type===Syntax.Identifier&&isRestrictedWord(expr.name)&&throwErrorTolerant({},Messages.StrictLHSPrefix),isLeftHandSide(expr)||throwErrorTolerant({},Messages.InvalidLHSInAssignment),expr={type:Syntax.UpdateExpression,operator:token.value,argument:expr,prefix:!0}):match("+")||match("-")||match("~")||match("!")?expr={type:Syntax.UnaryExpression,operator:lex().value,argument:parseUnaryExpression(),prefix:!0}:matchKeyword("delete")||matchKeyword("void")||matchKeyword("typeof")?(expr={type:Syntax.UnaryExpression,operator:lex().value,argument:parseUnaryExpression(),prefix:!0},strict&&"delete"===expr.operator&&expr.argument.type===Syntax.Identifier&&throwErrorTolerant({},Messages.StrictDelete),expr):parsePostfixExpression()}function parseMultiplicativeExpression(){for(var expr=parseUnaryExpression();match("*")||match("/")||match("%");)expr={type:Syntax.BinaryExpression,operator:lex().value,left:expr,right:parseUnaryExpression()};return expr}function parseAdditiveExpression(){for(var expr=parseMultiplicativeExpression();match("+")||match("-");)expr={type:Syntax.BinaryExpression,operator:lex().value,left:expr,right:parseMultiplicativeExpression()};return expr}function parseShiftExpression(){for(var expr=parseAdditiveExpression();match("<<")||match(">>")||match(">>>");)expr={type:Syntax.BinaryExpression,operator:lex().value,left:expr,right:parseAdditiveExpression()};return expr}function parseRelationalExpression(){var expr,previousAllowIn;for(previousAllowIn=state.allowIn,state.allowIn=!0,expr=parseShiftExpression();match("<")||match(">")||match("<=")||match(">=")||previousAllowIn&&matchKeyword("in")||matchKeyword("instanceof");)expr={type:Syntax.BinaryExpression,operator:lex().value,left:expr,right:parseShiftExpression()};return state.allowIn=previousAllowIn,expr}function parseEqualityExpression(){for(var expr=parseRelationalExpression();match("==")||match("!=")||match("===")||match("!==");)expr={type:Syntax.BinaryExpression,operator:lex().value,left:expr,right:parseRelationalExpression()};return expr}function parseBitwiseANDExpression(){for(var expr=parseEqualityExpression();match("&");)lex(),expr={type:Syntax.BinaryExpression,operator:"&",left:expr,right:parseEqualityExpression()};return expr}function parseBitwiseXORExpression(){for(var expr=parseBitwiseANDExpression();match("^");)lex(),expr={type:Syntax.BinaryExpression,operator:"^",left:expr,right:parseBitwiseANDExpression()};return expr}function parseBitwiseORExpression(){for(var expr=parseBitwiseXORExpression();match("|");)lex(),expr={type:Syntax.BinaryExpression,operator:"|",left:expr,right:parseBitwiseXORExpression()};return expr}function parseLogicalANDExpression(){for(var expr=parseBitwiseORExpression();match("&&");)lex(),expr={type:Syntax.LogicalExpression,operator:"&&",left:expr,right:parseBitwiseORExpression()};return expr}function parseLogicalORExpression(){for(var expr=parseLogicalANDExpression();match("||");)lex(),expr={type:Syntax.LogicalExpression,operator:"||",left:expr,right:parseLogicalANDExpression()};return expr}function parseConditionalExpression(){var expr,previousAllowIn,consequent;return expr=parseLogicalORExpression(),match("?")&&(lex(),previousAllowIn=state.allowIn,state.allowIn=!0,consequent=parseAssignmentExpression(),state.allowIn=previousAllowIn,expect(":"),expr={type:Syntax.ConditionalExpression,test:expr,consequent:consequent,alternate:parseAssignmentExpression()}),expr}function parseAssignmentExpression(){var token,expr;return token=lookahead(),expr=parseConditionalExpression(),matchAssign()&&(isLeftHandSide(expr)||throwErrorTolerant({},Messages.InvalidLHSInAssignment),strict&&expr.type===Syntax.Identifier&&isRestrictedWord(expr.name)&&throwErrorTolerant(token,Messages.StrictLHSAssignment),expr={type:Syntax.AssignmentExpression,operator:lex().value,left:expr,right:parseAssignmentExpression()}),expr}function parseExpression(){var expr=parseAssignmentExpression();if(match(","))for(expr={type:Syntax.SequenceExpression,expressions:[expr]};length>index&&match(",");)lex(),expr.expressions.push(parseAssignmentExpression());return expr}function parseStatementList(){for(var statement,list=[];length>index&&!match("}")&&(statement=parseSourceElement(),"undefined"!=typeof statement);)list.push(statement);return list}function parseBlock(){var block;return expect("{"),block=parseStatementList(),expect("}"),{type:Syntax.BlockStatement,body:block}}function parseVariableIdentifier(){var token=lex();return token.type!==Token.Identifier&&throwUnexpected(token),{type:Syntax.Identifier,name:token.value}}function parseVariableDeclaration(kind){var id=parseVariableIdentifier(),init=null;return strict&&isRestrictedWord(id.name)&&throwErrorTolerant({},Messages.StrictVarName),"const"===kind?(expect("="),init=parseAssignmentExpression()):match("=")&&(lex(),init=parseAssignmentExpression()),{type:Syntax.VariableDeclarator,id:id,init:init}}function parseVariableDeclarationList(kind){var list=[];do{if(list.push(parseVariableDeclaration(kind)),!match(","))break;lex()}while(length>index);return list}function parseVariableStatement(){var declarations;return expectKeyword("var"),declarations=parseVariableDeclarationList(),consumeSemicolon(),{type:Syntax.VariableDeclaration,declarations:declarations,kind:"var"}}function parseConstLetDeclaration(kind){var declarations;return expectKeyword(kind),declarations=parseVariableDeclarationList(kind),consumeSemicolon(),{type:Syntax.VariableDeclaration,declarations:declarations,kind:kind}}function parseEmptyStatement(){return expect(";"),{type:Syntax.EmptyStatement}}function parseExpressionStatement(){var expr=parseExpression();return consumeSemicolon(),{type:Syntax.ExpressionStatement,expression:expr}}function parseIfStatement(){var test,consequent,alternate;return expectKeyword("if"),expect("("),test=parseExpression(),expect(")"),consequent=parseStatement(),matchKeyword("else")?(lex(),alternate=parseStatement()):alternate=null,{type:Syntax.IfStatement,test:test,consequent:consequent,alternate:alternate}}function parseDoWhileStatement(){var body,test,oldInIteration;return expectKeyword("do"),oldInIteration=state.inIteration,state.inIteration=!0,body=parseStatement(),state.inIteration=oldInIteration,expectKeyword("while"),expect("("),test=parseExpression(),expect(")"),match(";")&&lex(),{type:Syntax.DoWhileStatement,body:body,test:test}}function parseWhileStatement(){var test,body,oldInIteration;return expectKeyword("while"),expect("("),test=parseExpression(),expect(")"),oldInIteration=state.inIteration,state.inIteration=!0,body=parseStatement(),state.inIteration=oldInIteration,{type:Syntax.WhileStatement,test:test,body:body}}function parseForVariableDeclaration(){var token=lex();return{type:Syntax.VariableDeclaration,declarations:parseVariableDeclarationList(),kind:token.value}}function parseForStatement(){var init,test,update,left,right,body,oldInIteration;return init=test=update=null,expectKeyword("for"),expect("("),match(";")?lex():(matchKeyword("var")||matchKeyword("let")?(state.allowIn=!1,init=parseForVariableDeclaration(),state.allowIn=!0,1===init.declarations.length&&matchKeyword("in")&&(lex(),left=init,right=parseExpression(),init=null)):(state.allowIn=!1,init=parseExpression(),state.allowIn=!0,matchKeyword("in")&&(isLeftHandSide(init)||throwErrorTolerant({},Messages.InvalidLHSInForIn),lex(),left=init,right=parseExpression(),init=null)),"undefined"==typeof left&&expect(";")),"undefined"==typeof left&&(match(";")||(test=parseExpression()),expect(";"),match(")")||(update=parseExpression())),expect(")"),oldInIteration=state.inIteration,state.inIteration=!0,body=parseStatement(),state.inIteration=oldInIteration,"undefined"==typeof left?{type:Syntax.ForStatement,init:init,test:test,update:update,body:body}:{type:Syntax.ForInStatement,left:left,right:right,body:body,each:!1}}function parseContinueStatement(){var token,label=null;return expectKeyword("continue"),";"===source[index]?(lex(),state.inIteration||throwError({},Messages.IllegalContinue),{type:Syntax.ContinueStatement,label:null}):peekLineTerminator()?(state.inIteration||throwError({},Messages.IllegalContinue),{type:Syntax.ContinueStatement,label:null}):(token=lookahead(),token.type===Token.Identifier&&(label=parseVariableIdentifier(),Object.prototype.hasOwnProperty.call(state.labelSet,label.name)||throwError({},Messages.UnknownLabel,label.name)),consumeSemicolon(),null!==label||state.inIteration||throwError({},Messages.IllegalContinue),{type:Syntax.ContinueStatement,label:label})}function parseBreakStatement(){var token,label=null;return expectKeyword("break"),";"===source[index]?(lex(),state.inIteration||state.inSwitch||throwError({},Messages.IllegalBreak),{type:Syntax.BreakStatement,label:null}):peekLineTerminator()?(state.inIteration||state.inSwitch||throwError({},Messages.IllegalBreak),{type:Syntax.BreakStatement,label:null}):(token=lookahead(),token.type===Token.Identifier&&(label=parseVariableIdentifier(),Object.prototype.hasOwnProperty.call(state.labelSet,label.name)||throwError({},Messages.UnknownLabel,label.name)),consumeSemicolon(),null!==label||state.inIteration||state.inSwitch||throwError({},Messages.IllegalBreak),{type:Syntax.BreakStatement,label:label})}function parseReturnStatement(){var token,argument=null;return expectKeyword("return"),state.inFunctionBody||throwErrorTolerant({},Messages.IllegalReturn)," "===source[index]&&isIdentifierStart(source[index+1])?(argument=parseExpression(),consumeSemicolon(),{type:Syntax.ReturnStatement,argument:argument}):peekLineTerminator()?{type:Syntax.ReturnStatement,argument:null}:(match(";")||(token=lookahead(),match("}")||token.type===Token.EOF||(argument=parseExpression())),consumeSemicolon(),{type:Syntax.ReturnStatement,argument:argument})}function parseWithStatement(){var object,body;return strict&&throwErrorTolerant({},Messages.StrictModeWith),expectKeyword("with"),expect("("),object=parseExpression(),expect(")"),body=parseStatement(),{type:Syntax.WithStatement,object:object,body:body}}function parseSwitchCase(){var test,statement,consequent=[];for(matchKeyword("default")?(lex(),test=null):(expectKeyword("case"),test=parseExpression()),expect(":");length>index&&!(match("}")||matchKeyword("default")||matchKeyword("case"))&&(statement=parseStatement(),"undefined"!=typeof statement);)consequent.push(statement);return{type:Syntax.SwitchCase,test:test,consequent:consequent}}function parseSwitchStatement(){var discriminant,cases,clause,oldInSwitch,defaultFound;if(expectKeyword("switch"),expect("("),discriminant=parseExpression(),expect(")"),expect("{"),cases=[],match("}"))return lex(),{type:Syntax.SwitchStatement,discriminant:discriminant,cases:cases};for(oldInSwitch=state.inSwitch,state.inSwitch=!0,defaultFound=!1;length>index&&!match("}");)clause=parseSwitchCase(),null===clause.test&&(defaultFound&&throwError({},Messages.MultipleDefaultsInSwitch),defaultFound=!0),cases.push(clause);return state.inSwitch=oldInSwitch,expect("}"),{type:Syntax.SwitchStatement,discriminant:discriminant,cases:cases}}function parseThrowStatement(){var argument;return expectKeyword("throw"),peekLineTerminator()&&throwError({},Messages.NewlineAfterThrow),argument=parseExpression(),consumeSemicolon(),{type:Syntax.ThrowStatement,argument:argument}}function parseCatchClause(){var param;return expectKeyword("catch"),expect("("),match(")")&&throwUnexpected(lookahead()),param=parseVariableIdentifier(),strict&&isRestrictedWord(param.name)&&throwErrorTolerant({},Messages.StrictCatchVariable),expect(")"),{type:Syntax.CatchClause,param:param,body:parseBlock()}}function parseTryStatement(){var block,handlers=[],finalizer=null;return expectKeyword("try"),block=parseBlock(),matchKeyword("catch")&&handlers.push(parseCatchClause()),matchKeyword("finally")&&(lex(),finalizer=parseBlock()),0!==handlers.length||finalizer||throwError({},Messages.NoCatchOrFinally),{type:Syntax.TryStatement,block:block,guardedHandlers:[],handlers:handlers,finalizer:finalizer}}function parseDebuggerStatement(){return expectKeyword("debugger"),consumeSemicolon(),{type:Syntax.DebuggerStatement}}function parseStatement(){var expr,labeledBody,token=lookahead();if(token.type===Token.EOF&&throwUnexpected(token),token.type===Token.Punctuator)switch(token.value){case";":return parseEmptyStatement();case"{":return parseBlock();case"(":return parseExpressionStatement()}if(token.type===Token.Keyword)switch(token.value){case"break":return parseBreakStatement();case"continue":return parseContinueStatement();case"debugger":return parseDebuggerStatement();case"do":return parseDoWhileStatement();case"for":return parseForStatement();case"function":return parseFunctionDeclaration();case"if":return parseIfStatement();case"return":return parseReturnStatement();case"switch":return parseSwitchStatement();case"throw":return parseThrowStatement();case"try":return parseTryStatement();case"var":return parseVariableStatement();case"while":return parseWhileStatement();case"with":return parseWithStatement()}return expr=parseExpression(),expr.type===Syntax.Identifier&&match(":")?(lex(),Object.prototype.hasOwnProperty.call(state.labelSet,expr.name)&&throwError({},Messages.Redeclaration,"Label",expr.name),state.labelSet[expr.name]=!0,labeledBody=parseStatement(),delete state.labelSet[expr.name],{type:Syntax.LabeledStatement,label:expr,body:labeledBody}):(consumeSemicolon(),{type:Syntax.ExpressionStatement,expression:expr})}function parseFunctionSourceElements(){var sourceElement,token,directive,firstRestricted,oldLabelSet,oldInIteration,oldInSwitch,oldInFunctionBody,sourceElements=[];for(expect("{");length>index&&(token=lookahead(),token.type===Token.StringLiteral)&&(sourceElement=parseSourceElement(),sourceElements.push(sourceElement),sourceElement.expression.type===Syntax.Literal);)directive=sliceSource(token.range[0]+1,token.range[1]-1),"use strict"===directive?(strict=!0,firstRestricted&&throwErrorTolerant(firstRestricted,Messages.StrictOctalLiteral)):!firstRestricted&&token.octal&&(firstRestricted=token);for(oldLabelSet=state.labelSet,oldInIteration=state.inIteration,oldInSwitch=state.inSwitch,oldInFunctionBody=state.inFunctionBody,state.labelSet={},state.inIteration=!1,state.inSwitch=!1,state.inFunctionBody=!0;length>index&&!match("}")&&(sourceElement=parseSourceElement(),"undefined"!=typeof sourceElement);)sourceElements.push(sourceElement);return expect("}"),state.labelSet=oldLabelSet,state.inIteration=oldInIteration,state.inSwitch=oldInSwitch,state.inFunctionBody=oldInFunctionBody,{type:Syntax.BlockStatement,body:sourceElements}}function parseFunctionDeclaration(){var id,param,body,token,stricted,firstRestricted,message,previousStrict,paramSet,params=[];if(expectKeyword("function"),token=lookahead(),id=parseVariableIdentifier(),strict?isRestrictedWord(token.value)&&throwErrorTolerant(token,Messages.StrictFunctionName):isRestrictedWord(token.value)?(firstRestricted=token,message=Messages.StrictFunctionName):isStrictModeReservedWord(token.value)&&(firstRestricted=token,message=Messages.StrictReservedWord),expect("("),!match(")"))for(paramSet={};length>index&&(token=lookahead(),param=parseVariableIdentifier(),strict?(isRestrictedWord(token.value)&&(stricted=token,message=Messages.StrictParamName),Object.prototype.hasOwnProperty.call(paramSet,token.value)&&(stricted=token,message=Messages.StrictParamDupe)):firstRestricted||(isRestrictedWord(token.value)?(firstRestricted=token,message=Messages.StrictParamName):isStrictModeReservedWord(token.value)?(firstRestricted=token,message=Messages.StrictReservedWord):Object.prototype.hasOwnProperty.call(paramSet,token.value)&&(firstRestricted=token,message=Messages.StrictParamDupe)),params.push(param),paramSet[param.name]=!0,!match(")"));)expect(",");return expect(")"),previousStrict=strict,body=parseFunctionSourceElements(),strict&&firstRestricted&&throwError(firstRestricted,message),strict&&stricted&&throwErrorTolerant(stricted,message),strict=previousStrict,{type:Syntax.FunctionDeclaration,id:id,params:params,defaults:[],body:body,rest:null,generator:!1,expression:!1}}function parseFunctionExpression(){var token,stricted,firstRestricted,message,param,body,previousStrict,paramSet,id=null,params=[];if(expectKeyword("function"),match("(")||(token=lookahead(),id=parseVariableIdentifier(),strict?isRestrictedWord(token.value)&&throwErrorTolerant(token,Messages.StrictFunctionName):isRestrictedWord(token.value)?(firstRestricted=token,message=Messages.StrictFunctionName):isStrictModeReservedWord(token.value)&&(firstRestricted=token,message=Messages.StrictReservedWord)),expect("("),!match(")"))for(paramSet={};length>index&&(token=lookahead(),param=parseVariableIdentifier(),strict?(isRestrictedWord(token.value)&&(stricted=token,message=Messages.StrictParamName),Object.prototype.hasOwnProperty.call(paramSet,token.value)&&(stricted=token,message=Messages.StrictParamDupe)):firstRestricted||(isRestrictedWord(token.value)?(firstRestricted=token,message=Messages.StrictParamName):isStrictModeReservedWord(token.value)?(firstRestricted=token,message=Messages.StrictReservedWord):Object.prototype.hasOwnProperty.call(paramSet,token.value)&&(firstRestricted=token,message=Messages.StrictParamDupe)),params.push(param),paramSet[param.name]=!0,!match(")"));)expect(",");return expect(")"),previousStrict=strict,body=parseFunctionSourceElements(),strict&&firstRestricted&&throwError(firstRestricted,message),strict&&stricted&&throwErrorTolerant(stricted,message),strict=previousStrict,{type:Syntax.FunctionExpression,id:id,params:params,defaults:[],body:body,rest:null,generator:!1,expression:!1}}function parseSourceElement(){var token=lookahead();if(token.type===Token.Keyword)switch(token.value){case"const":case"let":return parseConstLetDeclaration(token.value);case"function":return parseFunctionDeclaration();default:return parseStatement()}return token.type!==Token.EOF?parseStatement():void 0}function parseSourceElements(){for(var sourceElement,token,directive,firstRestricted,sourceElements=[];length>index&&(token=lookahead(),token.type===Token.StringLiteral)&&(sourceElement=parseSourceElement(),sourceElements.push(sourceElement),sourceElement.expression.type===Syntax.Literal);)directive=sliceSource(token.range[0]+1,token.range[1]-1),"use strict"===directive?(strict=!0,firstRestricted&&throwErrorTolerant(firstRestricted,Messages.StrictOctalLiteral)):!firstRestricted&&token.octal&&(firstRestricted=token);for(;length>index&&(sourceElement=parseSourceElement(),"undefined"!=typeof sourceElement);)sourceElements.push(sourceElement);return sourceElements}function parseProgram(){var program;return strict=!1,program={type:Syntax.Program,body:parseSourceElements()}}function addComment(type,value,start,end,loc){assert("number"==typeof start,"Comment must have valid position"),extra.comments.length>0&&extra.comments[extra.comments.length-1].range[1]>start||extra.comments.push({type:type,value:value,range:[start,end],loc:loc})}function scanComment(){var comment,ch,loc,start,blockComment,lineComment;for(comment="",blockComment=!1,lineComment=!1;length>index;)if(ch=source[index],lineComment)ch=source[index++],isLineTerminator(ch)?(loc.end={line:lineNumber,column:index-lineStart-1},lineComment=!1,addComment("Line",comment,start,index-1,loc),"\r"===ch&&"\n"===source[index]&&++index,++lineNumber,lineStart=index,comment=""):index>=length?(lineComment=!1,comment+=ch,loc.end={line:lineNumber,column:length-lineStart},addComment("Line",comment,start,length,loc)):comment+=ch;else if(blockComment)isLineTerminator(ch)?("\r"===ch&&"\n"===source[index+1]?(++index,comment+="\r\n"):comment+=ch,++lineNumber,++index,lineStart=index,index>=length&&throwError({},Messages.UnexpectedToken,"ILLEGAL")):(ch=source[index++],index>=length&&throwError({},Messages.UnexpectedToken,"ILLEGAL"),comment+=ch,"*"===ch&&(ch=source[index],"/"===ch&&(comment=comment.substr(0,comment.length-1),blockComment=!1,++index,loc.end={line:lineNumber,column:index-lineStart},addComment("Block",comment,start,index,loc),comment="")));else if("/"===ch)if(ch=source[index+1],"/"===ch)loc={start:{line:lineNumber,column:index-lineStart}},start=index,index+=2,lineComment=!0,index>=length&&(loc.end={line:lineNumber,column:index-lineStart},lineComment=!1,addComment("Line",comment,start,index,loc));else{if("*"!==ch)break;start=index,index+=2,blockComment=!0,loc={start:{line:lineNumber,column:index-lineStart-2}},index>=length&&throwError({},Messages.UnexpectedToken,"ILLEGAL")}else if(isWhiteSpace(ch))++index;else{if(!isLineTerminator(ch))break;++index,"\r"===ch&&"\n"===source[index]&&++index,++lineNumber,lineStart=index}}function filterCommentLocation(){var i,entry,comment,comments=[];for(i=0;i<extra.comments.length;++i)entry=extra.comments[i],comment={type:entry.type,value:entry.value},extra.range&&(comment.range=entry.range),extra.loc&&(comment.loc=entry.loc),comments.push(comment);extra.comments=comments}function collectToken(){var start,loc,token,range,value;
return skipComment(),start=index,loc={start:{line:lineNumber,column:index-lineStart}},token=extra.advance(),loc.end={line:lineNumber,column:index-lineStart},token.type!==Token.EOF&&(range=[token.range[0],token.range[1]],value=sliceSource(token.range[0],token.range[1]),extra.tokens.push({type:TokenName[token.type],value:value,range:range,loc:loc})),token}function collectRegex(){var pos,loc,regex,token;return skipComment(),pos=index,loc={start:{line:lineNumber,column:index-lineStart}},regex=extra.scanRegExp(),loc.end={line:lineNumber,column:index-lineStart},extra.tokens.length>0&&(token=extra.tokens[extra.tokens.length-1],token.range[0]===pos&&"Punctuator"===token.type&&("/"===token.value||"/="===token.value)&&extra.tokens.pop()),extra.tokens.push({type:"RegularExpression",value:regex.literal,range:[pos,index],loc:loc}),regex}function filterTokenLocation(){var i,entry,token,tokens=[];for(i=0;i<extra.tokens.length;++i)entry=extra.tokens[i],token={type:entry.type,value:entry.value},extra.range&&(token.range=entry.range),extra.loc&&(token.loc=entry.loc),tokens.push(token);extra.tokens=tokens}function createLiteral(token){return{type:Syntax.Literal,value:token.value}}function createRawLiteral(token){return{type:Syntax.Literal,value:token.value,raw:sliceSource(token.range[0],token.range[1])}}function createLocationMarker(){var marker={};return marker.range=[index,index],marker.loc={start:{line:lineNumber,column:index-lineStart},end:{line:lineNumber,column:index-lineStart}},marker.end=function(){this.range[1]=index,this.loc.end.line=lineNumber,this.loc.end.column=index-lineStart},marker.applyGroup=function(node){extra.range&&(node.groupRange=[this.range[0],this.range[1]]),extra.loc&&(node.groupLoc={start:{line:this.loc.start.line,column:this.loc.start.column},end:{line:this.loc.end.line,column:this.loc.end.column}})},marker.apply=function(node){extra.range&&(node.range=[this.range[0],this.range[1]]),extra.loc&&(node.loc={start:{line:this.loc.start.line,column:this.loc.start.column},end:{line:this.loc.end.line,column:this.loc.end.column}})},marker}function trackGroupExpression(){var marker,expr;return skipComment(),marker=createLocationMarker(),expect("("),expr=parseExpression(),expect(")"),marker.end(),marker.applyGroup(expr),expr}function trackLeftHandSideExpression(){var marker,expr;for(skipComment(),marker=createLocationMarker(),expr=matchKeyword("new")?parseNewExpression():parsePrimaryExpression();match(".")||match("[");)match("[")?(expr={type:Syntax.MemberExpression,computed:!0,object:expr,property:parseComputedMember()},marker.end(),marker.apply(expr)):(expr={type:Syntax.MemberExpression,computed:!1,object:expr,property:parseNonComputedMember()},marker.end(),marker.apply(expr));return expr}function trackLeftHandSideExpressionAllowCall(){var marker,expr;for(skipComment(),marker=createLocationMarker(),expr=matchKeyword("new")?parseNewExpression():parsePrimaryExpression();match(".")||match("[")||match("(");)match("(")?(expr={type:Syntax.CallExpression,callee:expr,arguments:parseArguments()},marker.end(),marker.apply(expr)):match("[")?(expr={type:Syntax.MemberExpression,computed:!0,object:expr,property:parseComputedMember()},marker.end(),marker.apply(expr)):(expr={type:Syntax.MemberExpression,computed:!1,object:expr,property:parseNonComputedMember()},marker.end(),marker.apply(expr));return expr}function filterGroup(node){var n,i,entry;n="[object Array]"===Object.prototype.toString.apply(node)?[]:{};for(i in node)node.hasOwnProperty(i)&&"groupRange"!==i&&"groupLoc"!==i&&(entry=node[i],n[i]=null===entry||"object"!=typeof entry||entry instanceof RegExp?entry:filterGroup(entry));return n}function wrapTrackingFunction(range,loc){return function(parseFunction){function isBinary(node){return node.type===Syntax.LogicalExpression||node.type===Syntax.BinaryExpression}function visit(node){var start,end;isBinary(node.left)&&visit(node.left),isBinary(node.right)&&visit(node.right),range&&(node.left.groupRange||node.right.groupRange?(start=node.left.groupRange?node.left.groupRange[0]:node.left.range[0],end=node.right.groupRange?node.right.groupRange[1]:node.right.range[1],node.range=[start,end]):"undefined"==typeof node.range&&(start=node.left.range[0],end=node.right.range[1],node.range=[start,end])),loc&&(node.left.groupLoc||node.right.groupLoc?(start=node.left.groupLoc?node.left.groupLoc.start:node.left.loc.start,end=node.right.groupLoc?node.right.groupLoc.end:node.right.loc.end,node.loc={start:start,end:end}):"undefined"==typeof node.loc&&(node.loc={start:node.left.loc.start,end:node.right.loc.end}))}return function(){var marker,node;return skipComment(),marker=createLocationMarker(),node=parseFunction.apply(null,arguments),marker.end(),range&&"undefined"==typeof node.range&&marker.apply(node),loc&&"undefined"==typeof node.loc&&marker.apply(node),isBinary(node)&&visit(node),node}}}function patch(){var wrapTracking;extra.comments&&(extra.skipComment=skipComment,skipComment=scanComment),extra.raw&&(extra.createLiteral=createLiteral,createLiteral=createRawLiteral),(extra.range||extra.loc)&&(extra.parseGroupExpression=parseGroupExpression,extra.parseLeftHandSideExpression=parseLeftHandSideExpression,extra.parseLeftHandSideExpressionAllowCall=parseLeftHandSideExpressionAllowCall,parseGroupExpression=trackGroupExpression,parseLeftHandSideExpression=trackLeftHandSideExpression,parseLeftHandSideExpressionAllowCall=trackLeftHandSideExpressionAllowCall,wrapTracking=wrapTrackingFunction(extra.range,extra.loc),extra.parseAdditiveExpression=parseAdditiveExpression,extra.parseAssignmentExpression=parseAssignmentExpression,extra.parseBitwiseANDExpression=parseBitwiseANDExpression,extra.parseBitwiseORExpression=parseBitwiseORExpression,extra.parseBitwiseXORExpression=parseBitwiseXORExpression,extra.parseBlock=parseBlock,extra.parseFunctionSourceElements=parseFunctionSourceElements,extra.parseCatchClause=parseCatchClause,extra.parseComputedMember=parseComputedMember,extra.parseConditionalExpression=parseConditionalExpression,extra.parseConstLetDeclaration=parseConstLetDeclaration,extra.parseEqualityExpression=parseEqualityExpression,extra.parseExpression=parseExpression,extra.parseForVariableDeclaration=parseForVariableDeclaration,extra.parseFunctionDeclaration=parseFunctionDeclaration,extra.parseFunctionExpression=parseFunctionExpression,extra.parseLogicalANDExpression=parseLogicalANDExpression,extra.parseLogicalORExpression=parseLogicalORExpression,extra.parseMultiplicativeExpression=parseMultiplicativeExpression,extra.parseNewExpression=parseNewExpression,extra.parseNonComputedProperty=parseNonComputedProperty,extra.parseObjectProperty=parseObjectProperty,extra.parseObjectPropertyKey=parseObjectPropertyKey,extra.parsePostfixExpression=parsePostfixExpression,extra.parsePrimaryExpression=parsePrimaryExpression,extra.parseProgram=parseProgram,extra.parsePropertyFunction=parsePropertyFunction,extra.parseRelationalExpression=parseRelationalExpression,extra.parseStatement=parseStatement,extra.parseShiftExpression=parseShiftExpression,extra.parseSwitchCase=parseSwitchCase,extra.parseUnaryExpression=parseUnaryExpression,extra.parseVariableDeclaration=parseVariableDeclaration,extra.parseVariableIdentifier=parseVariableIdentifier,parseAdditiveExpression=wrapTracking(extra.parseAdditiveExpression),parseAssignmentExpression=wrapTracking(extra.parseAssignmentExpression),parseBitwiseANDExpression=wrapTracking(extra.parseBitwiseANDExpression),parseBitwiseORExpression=wrapTracking(extra.parseBitwiseORExpression),parseBitwiseXORExpression=wrapTracking(extra.parseBitwiseXORExpression),parseBlock=wrapTracking(extra.parseBlock),parseFunctionSourceElements=wrapTracking(extra.parseFunctionSourceElements),parseCatchClause=wrapTracking(extra.parseCatchClause),parseComputedMember=wrapTracking(extra.parseComputedMember),parseConditionalExpression=wrapTracking(extra.parseConditionalExpression),parseConstLetDeclaration=wrapTracking(extra.parseConstLetDeclaration),parseEqualityExpression=wrapTracking(extra.parseEqualityExpression),parseExpression=wrapTracking(extra.parseExpression),parseForVariableDeclaration=wrapTracking(extra.parseForVariableDeclaration),parseFunctionDeclaration=wrapTracking(extra.parseFunctionDeclaration),parseFunctionExpression=wrapTracking(extra.parseFunctionExpression),parseLeftHandSideExpression=wrapTracking(parseLeftHandSideExpression),parseLogicalANDExpression=wrapTracking(extra.parseLogicalANDExpression),parseLogicalORExpression=wrapTracking(extra.parseLogicalORExpression),parseMultiplicativeExpression=wrapTracking(extra.parseMultiplicativeExpression),parseNewExpression=wrapTracking(extra.parseNewExpression),parseNonComputedProperty=wrapTracking(extra.parseNonComputedProperty),parseObjectProperty=wrapTracking(extra.parseObjectProperty),parseObjectPropertyKey=wrapTracking(extra.parseObjectPropertyKey),parsePostfixExpression=wrapTracking(extra.parsePostfixExpression),parsePrimaryExpression=wrapTracking(extra.parsePrimaryExpression),parseProgram=wrapTracking(extra.parseProgram),parsePropertyFunction=wrapTracking(extra.parsePropertyFunction),parseRelationalExpression=wrapTracking(extra.parseRelationalExpression),parseStatement=wrapTracking(extra.parseStatement),parseShiftExpression=wrapTracking(extra.parseShiftExpression),parseSwitchCase=wrapTracking(extra.parseSwitchCase),parseUnaryExpression=wrapTracking(extra.parseUnaryExpression),parseVariableDeclaration=wrapTracking(extra.parseVariableDeclaration),parseVariableIdentifier=wrapTracking(extra.parseVariableIdentifier)),"undefined"!=typeof extra.tokens&&(extra.advance=advance,extra.scanRegExp=scanRegExp,advance=collectToken,scanRegExp=collectRegex)}function unpatch(){"function"==typeof extra.skipComment&&(skipComment=extra.skipComment),extra.raw&&(createLiteral=extra.createLiteral),(extra.range||extra.loc)&&(parseAdditiveExpression=extra.parseAdditiveExpression,parseAssignmentExpression=extra.parseAssignmentExpression,parseBitwiseANDExpression=extra.parseBitwiseANDExpression,parseBitwiseORExpression=extra.parseBitwiseORExpression,parseBitwiseXORExpression=extra.parseBitwiseXORExpression,parseBlock=extra.parseBlock,parseFunctionSourceElements=extra.parseFunctionSourceElements,parseCatchClause=extra.parseCatchClause,parseComputedMember=extra.parseComputedMember,parseConditionalExpression=extra.parseConditionalExpression,parseConstLetDeclaration=extra.parseConstLetDeclaration,parseEqualityExpression=extra.parseEqualityExpression,parseExpression=extra.parseExpression,parseForVariableDeclaration=extra.parseForVariableDeclaration,parseFunctionDeclaration=extra.parseFunctionDeclaration,parseFunctionExpression=extra.parseFunctionExpression,parseGroupExpression=extra.parseGroupExpression,parseLeftHandSideExpression=extra.parseLeftHandSideExpression,parseLeftHandSideExpressionAllowCall=extra.parseLeftHandSideExpressionAllowCall,parseLogicalANDExpression=extra.parseLogicalANDExpression,parseLogicalORExpression=extra.parseLogicalORExpression,parseMultiplicativeExpression=extra.parseMultiplicativeExpression,parseNewExpression=extra.parseNewExpression,parseNonComputedProperty=extra.parseNonComputedProperty,parseObjectProperty=extra.parseObjectProperty,parseObjectPropertyKey=extra.parseObjectPropertyKey,parsePrimaryExpression=extra.parsePrimaryExpression,parsePostfixExpression=extra.parsePostfixExpression,parseProgram=extra.parseProgram,parsePropertyFunction=extra.parsePropertyFunction,parseRelationalExpression=extra.parseRelationalExpression,parseStatement=extra.parseStatement,parseShiftExpression=extra.parseShiftExpression,parseSwitchCase=extra.parseSwitchCase,parseUnaryExpression=extra.parseUnaryExpression,parseVariableDeclaration=extra.parseVariableDeclaration,parseVariableIdentifier=extra.parseVariableIdentifier),"function"==typeof extra.scanRegExp&&(advance=extra.advance,scanRegExp=extra.scanRegExp)}function stringToArray(str){var i,length=str.length,result=[];for(i=0;length>i;++i)result[i]=str.charAt(i);return result}function parse(code,options){var program,toString;toString=String,"string"==typeof code||code instanceof String||(code=toString(code)),source=code,index=0,lineNumber=source.length>0?1:0,lineStart=0,length=source.length,buffer=null,state={allowIn:!0,labelSet:{},inFunctionBody:!1,inIteration:!1,inSwitch:!1},extra={},"undefined"!=typeof options&&(extra.range="boolean"==typeof options.range&&options.range,extra.loc="boolean"==typeof options.loc&&options.loc,extra.raw="boolean"==typeof options.raw&&options.raw,"boolean"==typeof options.tokens&&options.tokens&&(extra.tokens=[]),"boolean"==typeof options.comment&&options.comment&&(extra.comments=[]),"boolean"==typeof options.tolerant&&options.tolerant&&(extra.errors=[])),length>0&&"undefined"==typeof source[0]&&(code instanceof String&&(source=code.valueOf()),"undefined"==typeof source[0]&&(source=stringToArray(code))),patch();try{program=parseProgram(),"undefined"!=typeof extra.comments&&(filterCommentLocation(),program.comments=extra.comments),"undefined"!=typeof extra.tokens&&(filterTokenLocation(),program.tokens=extra.tokens),"undefined"!=typeof extra.errors&&(program.errors=extra.errors),(extra.range||extra.loc)&&(program.body=filterGroup(program.body))}catch(e){throw e}finally{unpatch(),extra={}}return program}var Token,TokenName,Syntax,PropertyKind,Messages,Regex,source,strict,index,lineNumber,lineStart,length,buffer,state,extra;Token={BooleanLiteral:1,EOF:2,Identifier:3,Keyword:4,NullLiteral:5,NumericLiteral:6,Punctuator:7,StringLiteral:8},TokenName={},TokenName[Token.BooleanLiteral]="Boolean",TokenName[Token.EOF]="<end>",TokenName[Token.Identifier]="Identifier",TokenName[Token.Keyword]="Keyword",TokenName[Token.NullLiteral]="Null",TokenName[Token.NumericLiteral]="Numeric",TokenName[Token.Punctuator]="Punctuator",TokenName[Token.StringLiteral]="String",Syntax={AssignmentExpression:"AssignmentExpression",ArrayExpression:"ArrayExpression",BlockStatement:"BlockStatement",BinaryExpression:"BinaryExpression",BreakStatement:"BreakStatement",CallExpression:"CallExpression",CatchClause:"CatchClause",ConditionalExpression:"ConditionalExpression",ContinueStatement:"ContinueStatement",DoWhileStatement:"DoWhileStatement",DebuggerStatement:"DebuggerStatement",EmptyStatement:"EmptyStatement",ExpressionStatement:"ExpressionStatement",ForStatement:"ForStatement",ForInStatement:"ForInStatement",FunctionDeclaration:"FunctionDeclaration",FunctionExpression:"FunctionExpression",Identifier:"Identifier",IfStatement:"IfStatement",Literal:"Literal",LabeledStatement:"LabeledStatement",LogicalExpression:"LogicalExpression",MemberExpression:"MemberExpression",NewExpression:"NewExpression",ObjectExpression:"ObjectExpression",Program:"Program",Property:"Property",ReturnStatement:"ReturnStatement",SequenceExpression:"SequenceExpression",SwitchStatement:"SwitchStatement",SwitchCase:"SwitchCase",ThisExpression:"ThisExpression",ThrowStatement:"ThrowStatement",TryStatement:"TryStatement",UnaryExpression:"UnaryExpression",UpdateExpression:"UpdateExpression",VariableDeclaration:"VariableDeclaration",VariableDeclarator:"VariableDeclarator",WhileStatement:"WhileStatement",WithStatement:"WithStatement"},PropertyKind={Data:1,Get:2,Set:4},Messages={UnexpectedToken:"Unexpected token %0",UnexpectedNumber:"Unexpected number",UnexpectedString:"Unexpected string",UnexpectedIdentifier:"Unexpected identifier",UnexpectedReserved:"Unexpected reserved word",UnexpectedEOS:"Unexpected end of input",NewlineAfterThrow:"Illegal newline after throw",InvalidRegExp:"Invalid regular expression",UnterminatedRegExp:"Invalid regular expression: missing /",InvalidLHSInAssignment:"Invalid left-hand side in assignment",InvalidLHSInForIn:"Invalid left-hand side in for-in",MultipleDefaultsInSwitch:"More than one default clause in switch statement",NoCatchOrFinally:"Missing catch or finally after try",UnknownLabel:"Undefined label '%0'",Redeclaration:"%0 '%1' has already been declared",IllegalContinue:"Illegal continue statement",IllegalBreak:"Illegal break statement",IllegalReturn:"Illegal return statement",StrictModeWith:"Strict mode code may not include a with statement",StrictCatchVariable:"Catch variable may not be eval or arguments in strict mode",StrictVarName:"Variable name may not be eval or arguments in strict mode",StrictParamName:"Parameter name eval or arguments is not allowed in strict mode",StrictParamDupe:"Strict mode function may not have duplicate parameter names",StrictFunctionName:"Function name may not be eval or arguments in strict mode",StrictOctalLiteral:"Octal literals are not allowed in strict mode.",StrictDelete:"Delete of an unqualified identifier in strict mode.",StrictDuplicateProperty:"Duplicate data property in object literal not allowed in strict mode",AccessorDataProperty:"Object literal may not have data and accessor property with the same name",AccessorGetSet:"Object literal may not have multiple get/set accessors with the same name",StrictLHSAssignment:"Assignment to eval or arguments is not allowed in strict mode",StrictLHSPostfix:"Postfix increment/decrement may not have eval or arguments operand in strict mode",StrictLHSPrefix:"Prefix increment/decrement may not have eval or arguments operand in strict mode",StrictReservedWord:"Use of future reserved word in strict mode"},Regex={NonAsciiIdentifierStart:new RegExp("[ªµºÀ-ÖØ-öø-ˁˆ-ˑˠ-ˤˬˮͰ-ʹͶͷͺ-ͽΆΈ-ΊΌΎ-ΡΣ-ϵϷ-ҁҊ-ԧԱ-Ֆՙա-ևא-תװ-ײؠ-يٮٯٱ-ۓەۥۦۮۯۺ-ۼۿܐܒ-ܯݍ-ޥޱߊ-ߪߴߵߺࠀ-ࠕࠚࠤࠨࡀ-ࡘࢠࢢ-ࢬऄ-हऽॐक़-ॡॱ-ॷॹ-ॿঅ-ঌএঐও-নপ-রলশ-হঽৎড়ঢ়য়-ৡৰৱਅ-ਊਏਐਓ-ਨਪ-ਰਲਲ਼ਵਸ਼ਸਹਖ਼-ੜਫ਼ੲ-ੴઅ-ઍએ-ઑઓ-નપ-રલળવ-હઽૐૠૡଅ-ଌଏଐଓ-ନପ-ରଲଳଵ-ହଽଡ଼ଢ଼ୟ-ୡୱஃஅ-ஊஎ-ஐஒ-கஙசஜஞடணதந-பம-ஹௐఅ-ఌఎ-ఐఒ-నప-ళవ-హఽౘౙౠౡಅ-ಌಎ-ಐಒ-ನಪ-ಳವ-ಹಽೞೠೡೱೲഅ-ഌഎ-ഐഒ-ഺഽൎൠൡൺ-ൿඅ-ඖක-නඳ-රලව-ෆก-ะาำเ-ๆກຂຄງຈຊຍດ-ທນ-ຟມ-ຣລວສຫອ-ະາຳຽເ-ໄໆໜ-ໟༀཀ-ཇཉ-ཬྈ-ྌက-ဪဿၐ-ၕၚ-ၝၡၥၦၮ-ၰၵ-ႁႎႠ-ჅჇჍა-ჺჼ-ቈቊ-ቍቐ-ቖቘቚ-ቝበ-ኈኊ-ኍነ-ኰኲ-ኵኸ-ኾዀዂ-ዅወ-ዖዘ-ጐጒ-ጕጘ-ፚᎀ-ᎏᎠ-Ᏼᐁ-ᙬᙯ-ᙿᚁ-ᚚᚠ-ᛪᛮ-ᛰᜀ-ᜌᜎ-ᜑᜠ-ᜱᝀ-ᝑᝠ-ᝬᝮ-ᝰក-ឳៗៜᠠ-ᡷᢀ-ᢨᢪᢰ-ᣵᤀ-ᤜᥐ-ᥭᥰ-ᥴᦀ-ᦫᧁ-ᧇᨀ-ᨖᨠ-ᩔᪧᬅ-ᬳᭅ-ᭋᮃ-ᮠᮮᮯᮺ-ᯥᰀ-ᰣᱍ-ᱏᱚ-ᱽᳩ-ᳬᳮ-ᳱᳵᳶᴀ-ᶿḀ-ἕἘ-Ἕἠ-ὅὈ-Ὅὐ-ὗὙὛὝὟ-ώᾀ-ᾴᾶ-ᾼιῂ-ῄῆ-ῌῐ-ΐῖ-Ίῠ-Ῥῲ-ῴῶ-ῼⁱⁿₐ-ₜℂℇℊ-ℓℕℙ-ℝℤΩℨK-ℭℯ-ℹℼ-ℿⅅ-ⅉⅎⅠ-ↈⰀ-Ⱞⰰ-ⱞⱠ-ⳤⳫ-ⳮⳲⳳⴀ-ⴥⴧⴭⴰ-ⵧⵯⶀ-ⶖⶠ-ⶦⶨ-ⶮⶰ-ⶶⶸ-ⶾⷀ-ⷆⷈ-ⷎⷐ-ⷖⷘ-ⷞⸯ々-〇〡-〩〱-〵〸-〼ぁ-ゖゝ-ゟァ-ヺー-ヿㄅ-ㄭㄱ-ㆎㆠ-ㆺㇰ-ㇿ㐀-䶵一-鿌ꀀ-ꒌꓐ-ꓽꔀ-ꘌꘐ-ꘟꘪꘫꙀ-ꙮꙿ-ꚗꚠ-ꛯꜗ-ꜟꜢ-ꞈꞋ-ꞎꞐ-ꞓꞠ-Ɦꟸ-ꠁꠃ-ꠅꠇ-ꠊꠌ-ꠢꡀ-ꡳꢂ-ꢳꣲ-ꣷꣻꤊ-ꤥꤰ-ꥆꥠ-ꥼꦄ-ꦲꧏꨀ-ꨨꩀ-ꩂꩄ-ꩋꩠ-ꩶꩺꪀ-ꪯꪱꪵꪶꪹ-ꪽꫀꫂꫛ-ꫝꫠ-ꫪꫲ-ꫴꬁ-ꬆꬉ-ꬎꬑ-ꬖꬠ-ꬦꬨ-ꬮꯀ-ꯢ가-힣ힰ-ퟆퟋ-ퟻ豈-舘並-龎ﬀ-ﬆﬓ-ﬗיִײַ-ﬨשׁ-זּטּ-לּמּנּסּףּפּצּ-ﮱﯓ-ﴽﵐ-ﶏﶒ-ﷇﷰ-ﷻﹰ-ﹴﹶ-ﻼＡ-Ｚａ-ｚｦ-ﾾￂ-ￇￊ-ￏￒ-ￗￚ-ￜ]"),NonAsciiIdentifierPart:new RegExp("[ªµºÀ-ÖØ-öø-ˁˆ-ˑˠ-ˤˬˮ̀-ʹͶͷͺ-ͽΆΈ-ΊΌΎ-ΡΣ-ϵϷ-ҁ҃-҇Ҋ-ԧԱ-Ֆՙա-և֑-ׇֽֿׁׂׅׄא-תװ-ײؐ-ؚؠ-٩ٮ-ۓە-ۜ۟-۪ۨ-ۼۿܐ-݊ݍ-ޱ߀-ߵߺࠀ-࠭ࡀ-࡛ࢠࢢ-ࢬࣤ-ࣾऀ-ॣ०-९ॱ-ॷॹ-ॿঁ-ঃঅ-ঌএঐও-নপ-রলশ-হ়-ৄেৈো-ৎৗড়ঢ়য়-ৣ০-ৱਁ-ਃਅ-ਊਏਐਓ-ਨਪ-ਰਲਲ਼ਵਸ਼ਸਹ਼ਾ-ੂੇੈੋ-੍ੑਖ਼-ੜਫ਼੦-ੵઁ-ઃઅ-ઍએ-ઑઓ-નપ-રલળવ-હ઼-ૅે-ૉો-્ૐૠ-ૣ૦-૯ଁ-ଃଅ-ଌଏଐଓ-ନପ-ରଲଳଵ-ହ଼-ୄେୈୋ-୍ୖୗଡ଼ଢ଼ୟ-ୣ୦-୯ୱஂஃஅ-ஊஎ-ஐஒ-கஙசஜஞடணதந-பம-ஹா-ூெ-ைொ-்ௐௗ௦-௯ఁ-ఃఅ-ఌఎ-ఐఒ-నప-ళవ-హఽ-ౄె-ైొ-్ౕౖౘౙౠ-ౣ౦-౯ಂಃಅ-ಌಎ-ಐಒ-ನಪ-ಳವ-ಹ಼-ೄೆ-ೈೊ-್ೕೖೞೠ-ೣ೦-೯ೱೲംഃഅ-ഌഎ-ഐഒ-ഺഽ-ൄെ-ൈൊ-ൎൗൠ-ൣ൦-൯ൺ-ൿංඃඅ-ඖක-නඳ-රලව-ෆ්ා-ුූෘ-ෟෲෳก-ฺเ-๎๐-๙ກຂຄງຈຊຍດ-ທນ-ຟມ-ຣລວສຫອ-ູົ-ຽເ-ໄໆ່-ໍ໐-໙ໜ-ໟༀ༘༙༠-༩༹༵༷༾-ཇཉ-ཬཱ-྄྆-ྗྙ-ྼ࿆က-၉ၐ-ႝႠ-ჅჇჍა-ჺჼ-ቈቊ-ቍቐ-ቖቘቚ-ቝበ-ኈኊ-ኍነ-ኰኲ-ኵኸ-ኾዀዂ-ዅወ-ዖዘ-ጐጒ-ጕጘ-ፚ፝-፟ᎀ-ᎏᎠ-Ᏼᐁ-ᙬᙯ-ᙿᚁ-ᚚᚠ-ᛪᛮ-ᛰᜀ-ᜌᜎ-᜔ᜠ-᜴ᝀ-ᝓᝠ-ᝬᝮ-ᝰᝲᝳក-៓ៗៜ៝០-៩᠋-᠍᠐-᠙ᠠ-ᡷᢀ-ᢪᢰ-ᣵᤀ-ᤜᤠ-ᤫᤰ-᤻᥆-ᥭᥰ-ᥴᦀ-ᦫᦰ-ᧉ᧐-᧙ᨀ-ᨛᨠ-ᩞ᩠-᩿᩼-᪉᪐-᪙ᪧᬀ-ᭋ᭐-᭙᭫-᭳ᮀ-᯳ᰀ-᰷᱀-᱉ᱍ-ᱽ᳐-᳔᳒-ᳶᴀ-ᷦ᷼-ἕἘ-Ἕἠ-ὅὈ-Ὅὐ-ὗὙὛὝὟ-ώᾀ-ᾴᾶ-ᾼιῂ-ῄῆ-ῌῐ-ΐῖ-Ίῠ-Ῥῲ-ῴῶ-ῼ‌‍‿⁀⁔ⁱⁿₐ-ₜ⃐-⃥⃜⃡-⃰ℂℇℊ-ℓℕℙ-ℝℤΩℨK-ℭℯ-ℹℼ-ℿⅅ-ⅉⅎⅠ-ↈⰀ-Ⱞⰰ-ⱞⱠ-ⳤⳫ-ⳳⴀ-ⴥⴧⴭⴰ-ⵧⵯ⵿-ⶖⶠ-ⶦⶨ-ⶮⶰ-ⶶⶸ-ⶾⷀ-ⷆⷈ-ⷎⷐ-ⷖⷘ-ⷞⷠ-ⷿⸯ々-〇〡-〯〱-〵〸-〼ぁ-ゖ゙゚ゝ-ゟァ-ヺー-ヿㄅ-ㄭㄱ-ㆎㆠ-ㆺㇰ-ㇿ㐀-䶵一-鿌ꀀ-ꒌꓐ-ꓽꔀ-ꘌꘐ-ꘫꙀ-꙯ꙴ-꙽ꙿ-ꚗꚟ-꛱ꜗ-ꜟꜢ-ꞈꞋ-ꞎꞐ-ꞓꞠ-Ɦꟸ-ꠧꡀ-ꡳꢀ-꣄꣐-꣙꣠-ꣷꣻ꤀-꤭ꤰ-꥓ꥠ-ꥼꦀ-꧀ꧏ-꧙ꨀ-ꨶꩀ-ꩍ꩐-꩙ꩠ-ꩶꩺꩻꪀ-ꫂꫛ-ꫝꫠ-ꫯꫲ-꫶ꬁ-ꬆꬉ-ꬎꬑ-ꬖꬠ-ꬦꬨ-ꬮꯀ-ꯪ꯬꯭꯰-꯹가-힣ힰ-ퟆퟋ-ퟻ豈-舘並-龎ﬀ-ﬆﬓ-ﬗיִ-ﬨשׁ-זּטּ-לּמּנּסּףּפּצּ-ﮱﯓ-ﴽﵐ-ﶏﶒ-ﷇﷰ-ﷻ︀-️︠-︦︳︴﹍-﹏ﹰ-ﹴﹶ-ﻼ０-９Ａ-Ｚ＿ａ-ｚｦ-ﾾￂ-ￇￊ-ￏￒ-ￗￚ-ￜ]")},"undefined"==typeof"esprima"[0]&&(sliceSource=function(from,to){return source.slice(from,to).join("")}),exports.version="1.0.4",exports.parse=parse,exports.Syntax=function(){var name,types={};"function"==typeof Object.create&&(types=Object.create(null));for(name in Syntax)Syntax.hasOwnProperty(name)&&(types[name]=Syntax[name]);return"function"==typeof Object.freeze&&Object.freeze(types),types}()}),define("esprimaAdapter",["./esprima","env"],function(esprima,env){return"xpconnect"===env.get()&&"undefined"!=typeof Reflect?Reflect:esprima}),define("uglifyjs/consolidator",["require","exports","module","./parse-js","./process"],function(require,exports){exports.ast_consolidate=function(oAbstractSyntaxTree){"use strict";var TSourceElementsData=function(){this.nCategory=ESourceElementCategories.N_OTHER,this.aCount=[],this.aCount[EPrimaryExpressionCategories.N_IDENTIFIER_NAMES]={},this.aCount[EPrimaryExpressionCategories.N_STRING_LITERALS]={},this.aCount[EPrimaryExpressionCategories.N_NULL_AND_BOOLEAN_LITERALS]={},this.aIdentifiers=[],this.aPrimitiveValues=[]},TPrimitiveValue=function(){this.nSaving=0,this.sName=""},TSolution=function(){this.oPrimitiveValues={},this.nSavings=0},oProcessor=require("./process"),oWeights={N_PROPERTY_ACCESSOR:1,N_VARIABLE_DECLARATION:2,N_VARIABLE_STATEMENT_AFFIXATION:4,N_CLOSURE:17},EPrimaryExpressionCategories={N_IDENTIFIER_NAMES:0,N_STRING_LITERALS:1,N_NULL_AND_BOOLEAN_LITERALS:2},EValuePrefixes={S_STRING:"#S",S_SYMBOLIC:"#O"},ESourceElementCategories={N_WITH:0,N_EVAL:1,N_EXCLUDABLE:2,N_OTHER:3},A_OTHER_SUBSTITUTABLE_LITERALS=["null","false","true"];return function fExamineSyntacticCodeUnit(oSyntacticCodeUnit){var oSourceElements,oSourceElementData,oScope,oWalker,nPosition,nTo,bIsGlobal="toplevel"===oSyntacticCodeUnit[0],bIsWhollyExaminable=!bIsGlobal,oWalkers={oSurveySourceElement:{defun:function(sIdentifier,aFormalParameterList){fClassifyAsExcludable(),fAddIdentifier(sIdentifier),aFormalParameterList.forEach(fAddIdentifier)},dot:function(oExpression,sIdentifierName){return fCountPrimaryExpression(EPrimaryExpressionCategories.N_IDENTIFIER_NAMES,EValuePrefixes.S_STRING+sIdentifierName),["dot",oWalker.walk(oExpression),sIdentifierName]},"function":function(sIdentifier,aFormalParameterList){"string"==typeof sIdentifier&&fAddIdentifier(sIdentifier),aFormalParameterList.forEach(fAddIdentifier)},name:function(sIdentifier){-1!==A_OTHER_SUBSTITUTABLE_LITERALS.indexOf(sIdentifier)?fCountPrimaryExpression(EPrimaryExpressionCategories.N_NULL_AND_BOOLEAN_LITERALS,EValuePrefixes.S_SYMBOLIC+sIdentifier):("eval"===sIdentifier&&(oSourceElementData.nCategory=ESourceElementCategories.N_EVAL),fAddIdentifier(sIdentifier))},"return":function(){fClassifyAsExcludable()},string:function(sStringValue){sStringValue.length>0&&fCountPrimaryExpression(EPrimaryExpressionCategories.N_STRING_LITERALS,EValuePrefixes.S_STRING+sStringValue)},"try":function(oTry,aCatch){Array.isArray(aCatch)&&fAddIdentifier(aCatch[0])},"var":function(aVariableDeclarationList){fClassifyAsExcludable(),aVariableDeclarationList.forEach(fAddVariable)},"with":function(){return oSourceElementData.nCategory=ESourceElementCategories.N_WITH,[]}},oExamineFunctions:{defun:function(){return fExamineSyntacticCodeUnit(this),[]},"function":function(){return fExamineSyntacticCodeUnit(this),[]}}},aSourceElementsData=[],nAfterDirectivePrologue=0,cContext=function(oWalker,oSourceElement){var fLambda=function(){return oWalker.walk(oSourceElement)};return fLambda},fClassifyAsExcludable=function(){oSourceElementData.nCategory===ESourceElementCategories.N_OTHER&&(oSourceElementData.nCategory=ESourceElementCategories.N_EXCLUDABLE)},fAddIdentifier=function(sIdentifier){-1===oSourceElementData.aIdentifiers.indexOf(sIdentifier)&&oSourceElementData.aIdentifiers.push(sIdentifier)},fAddVariable=function(aVariableDeclaration){fAddIdentifier(aVariableDeclaration[0])},fCountPrimaryExpression=function(nCategory,sName){oSourceElementData.aCount[nCategory].hasOwnProperty(sName)||(oSourceElementData.aCount[nCategory][sName]=0,-1===oSourceElementData.aPrimitiveValues.indexOf(sName)&&oSourceElementData.aPrimitiveValues.push(sName)),oSourceElementData.aCount[nCategory][sName]+=1},fExamineSourceElements=function(nFrom,nTo,bEnclose){var nPosition,nIndex=oScope.cname,oWalkersTransformers={dot:function(oExpression,sIdentifierName){var sPrefixed=EValuePrefixes.S_STRING+sIdentifierName;return oSolutionBest.oPrimitiveValues.hasOwnProperty(sPrefixed)&&oSolutionBest.oPrimitiveValues[sPrefixed].nSaving>0?["sub",oWalker.walk(oExpression),["name",oSolutionBest.oPrimitiveValues[sPrefixed].sName]]:["dot",oWalker.walk(oExpression),sIdentifierName]},name:function(sIdentifier){var sPrefixed=EValuePrefixes.S_SYMBOLIC+sIdentifier;return["name",oSolutionBest.oPrimitiveValues.hasOwnProperty(sPrefixed)&&oSolutionBest.oPrimitiveValues[sPrefixed].nSaving>0?oSolutionBest.oPrimitiveValues[sPrefixed].sName:sIdentifier]},string:function(sStringValue){var sPrefixed=EValuePrefixes.S_STRING+sStringValue;return oSolutionBest.oPrimitiveValues.hasOwnProperty(sPrefixed)&&oSolutionBest.oPrimitiveValues[sPrefixed].nSaving>0?["name",oSolutionBest.oPrimitiveValues[sPrefixed].sName]:["string",sStringValue]}},oSolutionBest=new TSolution,oSolutionCandidate=new TSolution,oSourceElementsData=new TSourceElementsData,aVariableDeclarations=[],cAugmentList=function(aList){var fLambda=function(sPrefixed){-1===aList.indexOf(sPrefixed)&&aList.push(sPrefixed)};return fLambda},cAddOccurrences=function(nPosition,nCategory){var fLambda=function(sPrefixed){oSourceElementsData.aCount[nCategory].hasOwnProperty(sPrefixed)||(oSourceElementsData.aCount[nCategory][sPrefixed]=0),oSourceElementsData.aCount[nCategory][sPrefixed]+=aSourceElementsData[nPosition].aCount[nCategory][sPrefixed]};return fLambda},cAddOccurrencesInCategory=function(nPosition){var fLambda=function(nCategory){Object.keys(aSourceElementsData[nPosition].aCount[nCategory]).forEach(cAddOccurrences(nPosition,nCategory))};return fLambda},fAddOccurrences=function(nPosition){Object.keys(aSourceElementsData[nPosition].aCount).forEach(cAddOccurrencesInCategory(nPosition))},cAugmentVariableDeclarations=function(sPrefixed){oSolutionBest.oPrimitiveValues[sPrefixed].nSaving>0&&aVariableDeclarations.push([oSolutionBest.oPrimitiveValues[sPrefixed].sName,[0===sPrefixed.indexOf(EValuePrefixes.S_SYMBOLIC)?"name":"string",sPrefixed.substring(EValuePrefixes.S_SYMBOLIC.length)]])},cSortPrimitiveValues=function(sPrefixed0,sPrefixed1){var nDifference=oSolutionCandidate.oPrimitiveValues[sPrefixed0].nSaving-oSolutionCandidate.oPrimitiveValues[sPrefixed1].nSaving;return nDifference>0?-1:0>nDifference?1:0},fEvaluatePrimitiveValue=function(sPrefixed){var nIndex,nLengthSubstitution,sName=sPrefixed.substring(EValuePrefixes.S_SYMBOLIC.length),nLengthOriginal=sName.length,nLengthString=oProcessor.make_string(sName).length;oSolutionCandidate.oPrimitiveValues[sPrefixed]=new TPrimitiveValue;do nIndex=oScope.cname,oSolutionCandidate.oPrimitiveValues[sPrefixed].sName=oScope.next_mangled();while(-1!==oSourceElementsData.aIdentifiers.indexOf(oSolutionCandidate.oPrimitiveValues[sPrefixed].sName));nLengthSubstitution=oSolutionCandidate.oPrimitiveValues[sPrefixed].sName.length,0===sPrefixed.indexOf(EValuePrefixes.S_SYMBOLIC)?(oSolutionCandidate.oPrimitiveValues[sPrefixed].nSaving-=nLengthSubstitution+nLengthOriginal+oWeights.N_VARIABLE_DECLARATION,oSolutionCandidate.oPrimitiveValues[sPrefixed].nSaving+=oSourceElementsData.aCount[EPrimaryExpressionCategories.N_NULL_AND_BOOLEAN_LITERALS][sPrefixed]*(nLengthOriginal-nLengthSubstitution)):(oSolutionCandidate.oPrimitiveValues[sPrefixed].nSaving-=nLengthSubstitution+nLengthString+oWeights.N_VARIABLE_DECLARATION,oSourceElementsData.aCount[EPrimaryExpressionCategories.N_IDENTIFIER_NAMES].hasOwnProperty(sPrefixed)&&(oSolutionCandidate.oPrimitiveValues[sPrefixed].nSaving+=oSourceElementsData.aCount[EPrimaryExpressionCategories.N_IDENTIFIER_NAMES][sPrefixed]*(nLengthOriginal-nLengthSubstitution-oWeights.N_PROPERTY_ACCESSOR)),oSourceElementsData.aCount[EPrimaryExpressionCategories.N_STRING_LITERALS].hasOwnProperty(sPrefixed)&&(oSolutionCandidate.oPrimitiveValues[sPrefixed].nSaving+=oSourceElementsData.aCount[EPrimaryExpressionCategories.N_STRING_LITERALS][sPrefixed]*(nLengthString-nLengthSubstitution))),oSolutionCandidate.oPrimitiveValues[sPrefixed].nSaving>0?oSolutionCandidate.nSavings+=oSolutionCandidate.oPrimitiveValues[sPrefixed].nSaving:oScope.cname=nIndex},cAddVariableDeclaration=function(aVariableDeclaration){oSourceElements[nFrom][1].unshift(aVariableDeclaration)};if(!(nFrom>nTo)){if(nFrom===nTo&&"stat"===oSourceElements[nFrom][0]&&"call"===oSourceElements[nFrom][1][0]&&"function"===oSourceElements[nFrom][1][1][0])return fExamineSyntacticCodeUnit(oSourceElements[nFrom][1][1]),void 0;for(nPosition=nFrom;nTo>=nPosition;nPosition+=1)aSourceElementsData[nPosition].aPrimitiveValues.forEach(cAugmentList(oSourceElementsData.aPrimitiveValues));if(0!==oSourceElementsData.aPrimitiveValues.length){for(nPosition=nFrom;nTo>=nPosition;nPosition+=1)fAddOccurrences(nPosition),aSourceElementsData[nPosition].aIdentifiers.forEach(cAugmentList(oSourceElementsData.aIdentifiers));do oSolutionBest=oSolutionCandidate,Object.keys(oSolutionCandidate.oPrimitiveValues).length>0&&oSourceElementsData.aPrimitiveValues.sort(cSortPrimitiveValues),oSolutionCandidate=new TSolution,oSourceElementsData.aPrimitiveValues.forEach(fEvaluatePrimitiveValue),oScope.cname=nIndex;while(oSolutionCandidate.nSavings>oSolutionBest.nSavings);if("var"!==oSourceElements[nFrom][0]&&(oSolutionBest.nSavings-=oWeights.N_VARIABLE_STATEMENT_AFFIXATION),bEnclose&&(oSolutionBest.nSavings-=oWeights.N_CLOSURE),oSolutionBest.nSavings>0){for(Object.keys(oSolutionBest.oPrimitiveValues).forEach(cAugmentVariableDeclarations),nPosition=nFrom;nTo>=nPosition;nPosition+=1)oWalker=oProcessor.ast_walker(),oSourceElements[nPosition]=oWalker.with_walkers(oWalkersTransformers,cContext(oWalker,oSourceElements[nPosition]));if("var"===oSourceElements[nFrom][0]?aVariableDeclarations.reverse().forEach(cAddVariableDeclaration):(Array.prototype.splice.call(oSourceElements,nFrom,0,["var",aVariableDeclarations]),nTo+=1),bEnclose){for(Array.prototype.splice.call(oSourceElements,nFrom,0,["stat",["call",["function",null,[],[]],[]]]),nPosition=nTo+1;nPosition>nFrom;nPosition-=1)Array.prototype.unshift.call(oSourceElements[nFrom][1][1][3],oSourceElements[nPosition]);Array.prototype.splice.call(oSourceElements,nFrom+1,nTo-nFrom+1)}}bEnclose&&(oScope.cname=nIndex)}}};if(oSourceElements=oSyntacticCodeUnit[bIsGlobal?1:3],0!==oSourceElements.length){for(oScope=bIsGlobal?oSyntacticCodeUnit.scope:oSourceElements.scope;nAfterDirectivePrologue<oSourceElements.length&&"directive"===oSourceElements[nAfterDirectivePrologue][0];)nAfterDirectivePrologue+=1,aSourceElementsData.push(null);if(oSourceElements.length!==nAfterDirectivePrologue){for(nPosition=nAfterDirectivePrologue;nPosition<oSourceElements.length;nPosition+=1)oSourceElementData=new TSourceElementsData,oWalker=oProcessor.ast_walker(),oWalker.with_walkers(oWalkers.oSurveySourceElement,cContext(oWalker,oSourceElements[nPosition])),bIsWhollyExaminable=bIsWhollyExaminable&&ESourceElementCategories.N_WITH!==oSourceElementData.nCategory&&ESourceElementCategories.N_EVAL!==oSourceElementData.nCategory,aSourceElementsData.push(oSourceElementData);if(bIsWhollyExaminable)fExamineSourceElements(nAfterDirectivePrologue,oSourceElements.length-1,!1);else for(nPosition=oSourceElements.length-1;nPosition>=nAfterDirectivePrologue;nPosition-=1)oSourceElementData=aSourceElementsData[nPosition],ESourceElementCategories.N_OTHER===oSourceElementData.nCategory?("undefined"==typeof nTo&&(nTo=nPosition),nPosition===nAfterDirectivePrologue&&fExamineSourceElements(nPosition,nTo,!0)):("undefined"!=typeof nTo&&(fExamineSourceElements(nPosition+1,nTo,!0),nTo=void 0),oWalker=oProcessor.ast_walker(),oWalker.with_walkers(oWalkers.oExamineFunctions,cContext(oWalker,oSourceElements[nPosition])))}}}(oAbstractSyntaxTree=oProcessor.ast_add_scope(oAbstractSyntaxTree)),oAbstractSyntaxTree}}),define("uglifyjs/parse-js",["exports"],function(exports){function is_letter(ch){return UNICODE.letter.test(ch)}function is_digit(ch){return ch=ch.charCodeAt(0),ch>=48&&57>=ch}function is_unicode_digit(ch){return UNICODE.digit.test(ch)}function is_alphanumeric_char(ch){return is_digit(ch)||is_letter(ch)}function is_unicode_combining_mark(ch){return UNICODE.combining_mark.test(ch)}function is_unicode_connector_punctuation(ch){return UNICODE.connector_punctuation.test(ch)}function is_identifier_start(ch){return"$"==ch||"_"==ch||is_letter(ch)}function is_identifier_char(ch){return is_identifier_start(ch)||is_unicode_combining_mark(ch)||is_unicode_digit(ch)||is_unicode_connector_punctuation(ch)||"‌"==ch||"‍"==ch
}function parse_js_number(num){return RE_HEX_NUMBER.test(num)?parseInt(num.substr(2),16):RE_OCT_NUMBER.test(num)?parseInt(num.substr(1),8):RE_DEC_NUMBER.test(num)?parseFloat(num):void 0}function JS_Parse_Error(message,line,col,pos){this.message=message,this.line=line+1,this.col=col+1,this.pos=pos+1,this.stack=(new Error).stack}function js_error(message,line,col,pos){throw new JS_Parse_Error(message,line,col,pos)}function is_token(token,type,val){return token.type==type&&(null==val||token.value==val)}function tokenizer($TEXT){function peek(){return S.text.charAt(S.pos)}function next(signal_eof,in_string){var ch=S.text.charAt(S.pos++);if(signal_eof&&!ch)throw EX_EOF;return"\n"==ch?(S.newline_before=S.newline_before||!in_string,++S.line,S.col=0):++S.col,ch}function find(what,signal_eof){var pos=S.text.indexOf(what,S.pos);if(signal_eof&&-1==pos)throw EX_EOF;return pos}function start_token(){S.tokline=S.line,S.tokcol=S.col,S.tokpos=S.pos}function token(type,value,is_comment){S.regex_allowed="operator"==type&&!HOP(UNARY_POSTFIX,value)||"keyword"==type&&HOP(KEYWORDS_BEFORE_EXPRESSION,value)||"punc"==type&&HOP(PUNC_BEFORE_EXPRESSION,value);var ret={type:type,value:value,line:S.tokline,col:S.tokcol,pos:S.tokpos,endpos:S.pos,nlb:S.newline_before};if(!is_comment){ret.comments_before=S.comments_before,S.comments_before=[];for(var i=0,len=ret.comments_before.length;len>i;i++)ret.nlb=ret.nlb||ret.comments_before[i].nlb}return S.newline_before=!1,ret}function skip_whitespace(){for(;HOP(WHITESPACE_CHARS,peek());)next()}function read_while(pred){for(var ret="",ch=peek(),i=0;ch&&pred(ch,i++);)ret+=next(),ch=peek();return ret}function parse_error(err){js_error(err,S.tokline,S.tokcol,S.tokpos)}function read_num(prefix){var has_e=!1,after_e=!1,has_x=!1,has_dot="."==prefix,num=read_while(function(ch,i){return"x"==ch||"X"==ch?has_x?!1:has_x=!0:has_x||"E"!=ch&&"e"!=ch?"-"==ch?after_e||0==i&&!prefix?!0:!1:"+"==ch?after_e:(after_e=!1,"."==ch?has_dot||has_x||has_e?!1:has_dot=!0:is_alphanumeric_char(ch)):has_e?!1:has_e=after_e=!0});prefix&&(num=prefix+num);var valid=parse_js_number(num);return isNaN(valid)?(parse_error("Invalid syntax: "+num),void 0):token("num",valid)}function read_escaped_char(in_string){var ch=next(!0,in_string);switch(ch){case"n":return"\n";case"r":return"\r";case"t":return"	";case"b":return"\b";case"v":return"";case"f":return"\f";case"0":return"\x00";case"x":return String.fromCharCode(hex_bytes(2));case"u":return String.fromCharCode(hex_bytes(4));case"\n":return"";default:return ch}}function hex_bytes(n){for(var num=0;n>0;--n){var digit=parseInt(next(!0),16);isNaN(digit)&&parse_error("Invalid hex-character pattern in string"),num=num<<4|digit}return num}function read_string(){return with_eof_error("Unterminated string constant",function(){for(var quote=next(),ret="";;){var ch=next(!0);if("\\"==ch){var octal_len=0,first=null;ch=read_while(function(ch){if(ch>="0"&&"7">=ch){if(!first)return first=ch,++octal_len;if("3">=first&&2>=octal_len)return++octal_len;if(first>="4"&&1>=octal_len)return++octal_len}return!1}),ch=octal_len>0?String.fromCharCode(parseInt(ch,8)):read_escaped_char(!0)}else{if(ch==quote)break;if("\n"==ch)throw EX_EOF}ret+=ch}return token("string",ret)})}function read_line_comment(){next();var ret,i=find("\n");return-1==i?(ret=S.text.substr(S.pos),S.pos=S.text.length):(ret=S.text.substring(S.pos,i),S.pos=i),token("comment1",ret,!0)}function read_multiline_comment(){return next(),with_eof_error("Unterminated multiline comment",function(){var i=find("*/",!0),text=S.text.substring(S.pos,i);return S.pos=i+2,S.line+=text.split("\n").length-1,S.newline_before=S.newline_before||text.indexOf("\n")>=0,/^@cc_on/i.test(text)&&(warn("WARNING: at line "+S.line),warn('*** Found "conditional comment": '+text),warn("*** UglifyJS DISCARDS ALL COMMENTS.  This means your code might no longer work properly in Internet Explorer.")),token("comment2",text,!0)})}function read_name(){for(var ch,hex,backslash=!1,name="",escaped=!1;null!=(ch=peek());)if(backslash)"u"!=ch&&parse_error("Expecting UnicodeEscapeSequence -- uXXXX"),ch=read_escaped_char(),is_identifier_char(ch)||parse_error("Unicode char: "+ch.charCodeAt(0)+" is not valid in identifier"),name+=ch,backslash=!1;else if("\\"==ch)escaped=backslash=!0,next();else{if(!is_identifier_char(ch))break;name+=next()}return HOP(KEYWORDS,name)&&escaped&&(hex=name.charCodeAt(0).toString(16).toUpperCase(),name="\\u"+"0000".substr(hex.length)+hex+name.slice(1)),name}function read_regexp(regexp){return with_eof_error("Unterminated regular expression",function(){for(var ch,prev_backslash=!1,in_class=!1;ch=next(!0);)if(prev_backslash)regexp+="\\"+ch,prev_backslash=!1;else if("["==ch)in_class=!0,regexp+=ch;else if("]"==ch&&in_class)in_class=!1,regexp+=ch;else{if("/"==ch&&!in_class)break;"\\"==ch?prev_backslash=!0:regexp+=ch}var mods=read_name();return token("regexp",[regexp,mods])})}function read_operator(prefix){function grow(op){if(!peek())return op;var bigger=op+peek();return HOP(OPERATORS,bigger)?(next(),grow(bigger)):op}return token("operator",grow(prefix||next()))}function handle_slash(){next();var regex_allowed=S.regex_allowed;switch(peek()){case"/":return S.comments_before.push(read_line_comment()),S.regex_allowed=regex_allowed,next_token();case"*":return S.comments_before.push(read_multiline_comment()),S.regex_allowed=regex_allowed,next_token()}return S.regex_allowed?read_regexp(""):read_operator("/")}function handle_dot(){return next(),is_digit(peek())?read_num("."):token("punc",".")}function read_word(){var word=read_name();return HOP(KEYWORDS,word)?HOP(OPERATORS,word)?token("operator",word):HOP(KEYWORDS_ATOM,word)?token("atom",word):token("keyword",word):token("name",word)}function with_eof_error(eof_error,cont){try{return cont()}catch(ex){if(ex!==EX_EOF)throw ex;parse_error(eof_error)}}function next_token(force_regexp){if(null!=force_regexp)return read_regexp(force_regexp);skip_whitespace(),start_token();var ch=peek();return ch?is_digit(ch)?read_num():'"'==ch||"'"==ch?read_string():HOP(PUNC_CHARS,ch)?token("punc",next()):"."==ch?handle_dot():"/"==ch?handle_slash():HOP(OPERATOR_CHARS,ch)?read_operator():"\\"==ch||is_identifier_start(ch)?read_word():(parse_error("Unexpected character '"+ch+"'"),void 0):token("eof")}var S={text:$TEXT.replace(/\r\n?|[\n\u2028\u2029]/g,"\n").replace(/^\uFEFF/,""),pos:0,tokpos:0,line:0,tokline:0,col:0,tokcol:0,newline_before:!1,regex_allowed:!1,comments_before:[]};return next_token.context=function(nc){return nc&&(S=nc),S},next_token}function NodeWithToken(str,start,end){this.name=str,this.start=start,this.end=end}function parse($TEXT,exigent_mode,embed_tokens){function is(type,value){return is_token(S.token,type,value)}function peek(){return S.peeked||(S.peeked=S.input())}function next(){return S.prev=S.token,S.peeked?(S.token=S.peeked,S.peeked=null):S.token=S.input(),S.in_directives=S.in_directives&&("string"==S.token.type||is("punc",";")),S.token}function prev(){return S.prev}function croak(msg,line,col,pos){var ctx=S.input.context();js_error(msg,null!=line?line:ctx.tokline,null!=col?col:ctx.tokcol,null!=pos?pos:ctx.tokpos)}function token_error(token,msg){croak(msg,token.line,token.col)}function unexpected(token){null==token&&(token=S.token),token_error(token,"Unexpected token: "+token.type+" ("+token.value+")")}function expect_token(type,val){return is(type,val)?next():(token_error(S.token,"Unexpected token "+S.token.type+", expected "+type),void 0)}function expect(punc){return expect_token("punc",punc)}function can_insert_semicolon(){return!exigent_mode&&(S.token.nlb||is("eof")||is("punc","}"))}function semicolon(){is("punc",";")?next():can_insert_semicolon()||unexpected()}function as(){return slice(arguments)}function parenthesised(){expect("(");var ex=expression();return expect(")"),ex}function add_tokens(str,start,end){return str instanceof NodeWithToken?str:new NodeWithToken(str,start,end)}function maybe_embed_tokens(parser){return embed_tokens?function(){var start=S.token,ast=parser.apply(this,arguments);return ast[0]=add_tokens(ast[0],start,prev()),ast}:parser}function labeled_statement(label){S.labels.push(label);var start=S.token,stat=statement();return exigent_mode&&!HOP(STATEMENTS_WITH_LABELS,stat[0])&&unexpected(start),S.labels.pop(),as("label",label,stat)}function simple_statement(){return as("stat",prog1(expression,semicolon))}function break_cont(type){var name;return can_insert_semicolon()||(name=is("name")?S.token.value:null),null!=name?(next(),member(name,S.labels)||croak("Label "+name+" without matching loop or statement")):0==S.in_loop&&croak(type+" not inside a loop or switch"),semicolon(),as(type,name)}function for_(){expect("(");var init=null;return!is("punc",";")&&(init=is("keyword","var")?(next(),var_(!0)):expression(!0,!0),is("operator","in"))?("var"==init[0]&&init[1].length>1&&croak("Only one variable declaration allowed in for..in loop"),for_in(init)):regular_for(init)}function regular_for(init){expect(";");var test=is("punc",";")?null:expression();expect(";");var step=is("punc",")")?null:expression();return expect(")"),as("for",init,test,step,in_loop(statement))}function for_in(init){var lhs="var"==init[0]?as("name",init[1][0]):init;next();var obj=expression();return expect(")"),as("for-in",init,lhs,obj,in_loop(statement))}function if_(){var belse,cond=parenthesised(),body=statement();return is("keyword","else")&&(next(),belse=statement()),as("if",cond,body,belse)}function block_(){expect("{");for(var a=[];!is("punc","}");)is("eof")&&unexpected(),a.push(statement());return next(),a}function try_(){var bcatch,bfinally,body=block_();if(is("keyword","catch")){next(),expect("("),is("name")||croak("Name expected");var name=S.token.value;next(),expect(")"),bcatch=[name,block_()]}return is("keyword","finally")&&(next(),bfinally=block_()),bcatch||bfinally||croak("Missing catch/finally blocks"),as("try",body,bcatch,bfinally)}function vardefs(no_in){for(var a=[];;){is("name")||unexpected();var name=S.token.value;if(next(),is("operator","=")?(next(),a.push([name,expression(!1,no_in)])):a.push([name]),!is("punc",","))break;next()}return a}function var_(no_in){return as("var",vardefs(no_in))}function const_(){return as("const",vardefs())}function new_(){var args,newexp=expr_atom(!1);return is("punc","(")?(next(),args=expr_list(")")):args=[],subscripts(as("new",newexp,args),!0)}function expr_list(closing,allow_trailing_comma,allow_empty){for(var first=!0,a=[];!is("punc",closing)&&(first?first=!1:expect(","),!allow_trailing_comma||!is("punc",closing));)is("punc",",")&&allow_empty?a.push(["atom","undefined"]):a.push(expression(!1));return next(),a}function array_(){return as("array",expr_list("]",!exigent_mode,!0))}function object_(){for(var first=!0,a=[];!is("punc","}")&&(first?first=!1:expect(","),exigent_mode||!is("punc","}"));){var type=S.token.type,name=as_property_name();"name"!=type||"get"!=name&&"set"!=name||is("punc",":")?(expect(":"),a.push([name,expression(!1)])):a.push([as_name(),function_(!1),name])}return next(),as("object",a)}function as_property_name(){switch(S.token.type){case"num":case"string":return prog1(S.token.value,next)}return as_name()}function as_name(){switch(S.token.type){case"name":case"operator":case"keyword":case"atom":return prog1(S.token.value,next);default:unexpected()}}function subscripts(expr,allow_calls){return is("punc",".")?(next(),subscripts(as("dot",expr,as_name()),allow_calls)):is("punc","[")?(next(),subscripts(as("sub",expr,prog1(expression,curry(expect,"]"))),allow_calls)):allow_calls&&is("punc","(")?(next(),subscripts(as("call",expr,expr_list(")")),!0)):expr}function maybe_unary(allow_calls){if(is("operator")&&HOP(UNARY_PREFIX,S.token.value))return make_unary("unary-prefix",prog1(S.token.value,next),maybe_unary(allow_calls));for(var val=expr_atom(allow_calls);is("operator")&&HOP(UNARY_POSTFIX,S.token.value)&&!S.token.nlb;)val=make_unary("unary-postfix",S.token.value,val),next();return val}function make_unary(tag,op,expr){return"++"!=op&&"--"!=op||is_assignable(expr)||croak("Invalid use of "+op+" operator"),as(tag,op,expr)}function expr_op(left,min_prec,no_in){var op=is("operator")?S.token.value:null;op&&"in"==op&&no_in&&(op=null);var prec=null!=op?PRECEDENCE[op]:null;if(null!=prec&&prec>min_prec){next();var right=expr_op(maybe_unary(!0),prec,no_in);return expr_op(as("binary",op,left,right),min_prec,no_in)}return left}function expr_ops(no_in){return expr_op(maybe_unary(!0),0,no_in)}function maybe_conditional(no_in){var expr=expr_ops(no_in);if(is("operator","?")){next();var yes=expression(!1);return expect(":"),as("conditional",expr,yes,expression(!1,no_in))}return expr}function is_assignable(expr){if(!exigent_mode)return!0;switch(expr[0]+""){case"dot":case"sub":case"new":case"call":return!0;case"name":return"this"!=expr[1]}}function maybe_assign(no_in){var left=maybe_conditional(no_in),val=S.token.value;if(is("operator")&&HOP(ASSIGNMENT,val)){if(is_assignable(left))return next(),as("assign",ASSIGNMENT[val],left,maybe_assign(no_in));croak("Invalid assignment")}return left}function in_loop(cont){try{return++S.in_loop,cont()}finally{--S.in_loop}}var S={input:"string"==typeof $TEXT?tokenizer($TEXT,!0):$TEXT,token:null,prev:null,peeked:null,in_function:0,in_directives:!0,in_loop:0,labels:[]};S.token=next();var statement=maybe_embed_tokens(function(){switch((is("operator","/")||is("operator","/="))&&(S.peeked=null,S.token=S.input(S.token.value.substr(1))),S.token.type){case"string":var dir=S.in_directives,stat=simple_statement();return dir&&"string"==stat[1][0]&&!is("punc",",")?as("directive",stat[1][1]):stat;case"num":case"regexp":case"operator":case"atom":return simple_statement();case"name":return is_token(peek(),"punc",":")?labeled_statement(prog1(S.token.value,next,next)):simple_statement();case"punc":switch(S.token.value){case"{":return as("block",block_());case"[":case"(":return simple_statement();case";":return next(),as("block");default:unexpected()}case"keyword":switch(prog1(S.token.value,next)){case"break":return break_cont("break");case"continue":return break_cont("continue");case"debugger":return semicolon(),as("debugger");case"do":return function(body){return expect_token("keyword","while"),as("do",prog1(parenthesised,semicolon),body)}(in_loop(statement));case"for":return for_();case"function":return function_(!0);case"if":return if_();case"return":return 0==S.in_function&&croak("'return' outside of function"),as("return",is("punc",";")?(next(),null):can_insert_semicolon()?null:prog1(expression,semicolon));case"switch":return as("switch",parenthesised(),switch_block_());case"throw":return S.token.nlb&&croak("Illegal newline after 'throw'"),as("throw",prog1(expression,semicolon));case"try":return try_();case"var":return prog1(var_,semicolon);case"const":return prog1(const_,semicolon);case"while":return as("while",parenthesised(),in_loop(statement));case"with":return as("with",parenthesised(),statement());default:unexpected()}}}),function_=function(in_statement){var name=is("name")?prog1(S.token.value,next):null;return in_statement&&!name&&unexpected(),expect("("),as(in_statement?"defun":"function",name,function(first,a){for(;!is("punc",")");)first?first=!1:expect(","),is("name")||unexpected(),a.push(S.token.value),next();return next(),a}(!0,[]),function(){++S.in_function;var loop=S.in_loop;S.in_directives=!0,S.in_loop=0;var a=block_();return--S.in_function,S.in_loop=loop,a}())},switch_block_=curry(in_loop,function(){expect("{");for(var a=[],cur=null;!is("punc","}");)is("eof")&&unexpected(),is("keyword","case")?(next(),cur=[],a.push([expression(),cur]),expect(":")):is("keyword","default")?(next(),expect(":"),cur=[],a.push([null,cur])):(cur||unexpected(),cur.push(statement()));return next(),a}),expr_atom=maybe_embed_tokens(function(allow_calls){if(is("operator","new"))return next(),new_();if(is("punc")){switch(S.token.value){case"(":return next(),subscripts(prog1(expression,curry(expect,")")),allow_calls);case"[":return next(),subscripts(array_(),allow_calls);case"{":return next(),subscripts(object_(),allow_calls)}unexpected()}if(is("keyword","function"))return next(),subscripts(function_(!1),allow_calls);if(HOP(ATOMIC_START_TOKEN,S.token.type)){var atom="regexp"==S.token.type?as("regexp",S.token.value[0],S.token.value[1]):as(S.token.type,S.token.value);return subscripts(prog1(atom,next),allow_calls)}unexpected()}),expression=maybe_embed_tokens(function(commas,no_in){0==arguments.length&&(commas=!0);var expr=maybe_assign(no_in);return commas&&is("punc",",")?(next(),as("seq",expr,expression(!0,no_in))):expr});return as("toplevel",function(a){for(;!is("eof");)a.push(statement());return a}([]))}function curry(f){var args=slice(arguments,1);return function(){return f.apply(this,args.concat(slice(arguments)))}}function prog1(ret){ret instanceof Function&&(ret=ret());for(var i=1,n=arguments.length;--n>0;++i)arguments[i]();return ret}function array_to_hash(a){for(var ret={},i=0;i<a.length;++i)ret[a[i]]=!0;return ret}function slice(a,start){return Array.prototype.slice.call(a,start||0)}function characters(str){return str.split("")}function member(name,array){for(var i=array.length;--i>=0;)if(array[i]==name)return!0;return!1}function HOP(obj,prop){return Object.prototype.hasOwnProperty.call(obj,prop)}var KEYWORDS=array_to_hash(["break","case","catch","const","continue","debugger","default","delete","do","else","finally","for","function","if","in","instanceof","new","return","switch","throw","try","typeof","var","void","while","with"]),RESERVED_WORDS=array_to_hash(["abstract","boolean","byte","char","class","double","enum","export","extends","final","float","goto","implements","import","int","interface","long","native","package","private","protected","public","short","static","super","synchronized","throws","transient","volatile"]),KEYWORDS_BEFORE_EXPRESSION=array_to_hash(["return","new","delete","throw","else","case"]),KEYWORDS_ATOM=array_to_hash(["false","null","true","undefined"]),OPERATOR_CHARS=array_to_hash(characters("+-*&%=<>!?|~^")),RE_HEX_NUMBER=/^0x[0-9a-f]+$/i,RE_OCT_NUMBER=/^0[0-7]+$/,RE_DEC_NUMBER=/^\d*\.?\d*(?:e[+-]?\d*(?:\d\.?|\.?\d)\d*)?$/i,OPERATORS=array_to_hash(["in","instanceof","typeof","new","void","delete","++","--","+","-","!","~","&","|","^","*","/","%",">>","<<",">>>","<",">","<=",">=","==","===","!=","!==","?","=","+=","-=","/=","*=","%=",">>=","<<=",">>>=","|=","^=","&=","&&","||"]),WHITESPACE_CHARS=array_to_hash(characters("  \n\r	\f​᠎             　﻿")),PUNC_BEFORE_EXPRESSION=array_to_hash(characters("[{(,.;:")),PUNC_CHARS=array_to_hash(characters("[]{}(),;:")),UNICODE=(array_to_hash(characters("gmsiy")),{letter:new RegExp("[\\u0041-\\u005A\\u0061-\\u007A\\u00AA\\u00B5\\u00BA\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02C1\\u02C6-\\u02D1\\u02E0-\\u02E4\\u02EC\\u02EE\\u0370-\\u0374\\u0376\\u0377\\u037A-\\u037D\\u0386\\u0388-\\u038A\\u038C\\u038E-\\u03A1\\u03A3-\\u03F5\\u03F7-\\u0481\\u048A-\\u0527\\u0531-\\u0556\\u0559\\u0561-\\u0587\\u05D0-\\u05EA\\u05F0-\\u05F2\\u0620-\\u064A\\u066E\\u066F\\u0671-\\u06D3\\u06D5\\u06E5\\u06E6\\u06EE\\u06EF\\u06FA-\\u06FC\\u06FF\\u0710\\u0712-\\u072F\\u074D-\\u07A5\\u07B1\\u07CA-\\u07EA\\u07F4\\u07F5\\u07FA\\u0800-\\u0815\\u081A\\u0824\\u0828\\u0840-\\u0858\\u08A0\\u08A2-\\u08AC\\u0904-\\u0939\\u093D\\u0950\\u0958-\\u0961\\u0971-\\u0977\\u0979-\\u097F\\u0985-\\u098C\\u098F\\u0990\\u0993-\\u09A8\\u09AA-\\u09B0\\u09B2\\u09B6-\\u09B9\\u09BD\\u09CE\\u09DC\\u09DD\\u09DF-\\u09E1\\u09F0\\u09F1\\u0A05-\\u0A0A\\u0A0F\\u0A10\\u0A13-\\u0A28\\u0A2A-\\u0A30\\u0A32\\u0A33\\u0A35\\u0A36\\u0A38\\u0A39\\u0A59-\\u0A5C\\u0A5E\\u0A72-\\u0A74\\u0A85-\\u0A8D\\u0A8F-\\u0A91\\u0A93-\\u0AA8\\u0AAA-\\u0AB0\\u0AB2\\u0AB3\\u0AB5-\\u0AB9\\u0ABD\\u0AD0\\u0AE0\\u0AE1\\u0B05-\\u0B0C\\u0B0F\\u0B10\\u0B13-\\u0B28\\u0B2A-\\u0B30\\u0B32\\u0B33\\u0B35-\\u0B39\\u0B3D\\u0B5C\\u0B5D\\u0B5F-\\u0B61\\u0B71\\u0B83\\u0B85-\\u0B8A\\u0B8E-\\u0B90\\u0B92-\\u0B95\\u0B99\\u0B9A\\u0B9C\\u0B9E\\u0B9F\\u0BA3\\u0BA4\\u0BA8-\\u0BAA\\u0BAE-\\u0BB9\\u0BD0\\u0C05-\\u0C0C\\u0C0E-\\u0C10\\u0C12-\\u0C28\\u0C2A-\\u0C33\\u0C35-\\u0C39\\u0C3D\\u0C58\\u0C59\\u0C60\\u0C61\\u0C85-\\u0C8C\\u0C8E-\\u0C90\\u0C92-\\u0CA8\\u0CAA-\\u0CB3\\u0CB5-\\u0CB9\\u0CBD\\u0CDE\\u0CE0\\u0CE1\\u0CF1\\u0CF2\\u0D05-\\u0D0C\\u0D0E-\\u0D10\\u0D12-\\u0D3A\\u0D3D\\u0D4E\\u0D60\\u0D61\\u0D7A-\\u0D7F\\u0D85-\\u0D96\\u0D9A-\\u0DB1\\u0DB3-\\u0DBB\\u0DBD\\u0DC0-\\u0DC6\\u0E01-\\u0E30\\u0E32\\u0E33\\u0E40-\\u0E46\\u0E81\\u0E82\\u0E84\\u0E87\\u0E88\\u0E8A\\u0E8D\\u0E94-\\u0E97\\u0E99-\\u0E9F\\u0EA1-\\u0EA3\\u0EA5\\u0EA7\\u0EAA\\u0EAB\\u0EAD-\\u0EB0\\u0EB2\\u0EB3\\u0EBD\\u0EC0-\\u0EC4\\u0EC6\\u0EDC-\\u0EDF\\u0F00\\u0F40-\\u0F47\\u0F49-\\u0F6C\\u0F88-\\u0F8C\\u1000-\\u102A\\u103F\\u1050-\\u1055\\u105A-\\u105D\\u1061\\u1065\\u1066\\u106E-\\u1070\\u1075-\\u1081\\u108E\\u10A0-\\u10C5\\u10C7\\u10CD\\u10D0-\\u10FA\\u10FC-\\u1248\\u124A-\\u124D\\u1250-\\u1256\\u1258\\u125A-\\u125D\\u1260-\\u1288\\u128A-\\u128D\\u1290-\\u12B0\\u12B2-\\u12B5\\u12B8-\\u12BE\\u12C0\\u12C2-\\u12C5\\u12C8-\\u12D6\\u12D8-\\u1310\\u1312-\\u1315\\u1318-\\u135A\\u1380-\\u138F\\u13A0-\\u13F4\\u1401-\\u166C\\u166F-\\u167F\\u1681-\\u169A\\u16A0-\\u16EA\\u16EE-\\u16F0\\u1700-\\u170C\\u170E-\\u1711\\u1720-\\u1731\\u1740-\\u1751\\u1760-\\u176C\\u176E-\\u1770\\u1780-\\u17B3\\u17D7\\u17DC\\u1820-\\u1877\\u1880-\\u18A8\\u18AA\\u18B0-\\u18F5\\u1900-\\u191C\\u1950-\\u196D\\u1970-\\u1974\\u1980-\\u19AB\\u19C1-\\u19C7\\u1A00-\\u1A16\\u1A20-\\u1A54\\u1AA7\\u1B05-\\u1B33\\u1B45-\\u1B4B\\u1B83-\\u1BA0\\u1BAE\\u1BAF\\u1BBA-\\u1BE5\\u1C00-\\u1C23\\u1C4D-\\u1C4F\\u1C5A-\\u1C7D\\u1CE9-\\u1CEC\\u1CEE-\\u1CF1\\u1CF5\\u1CF6\\u1D00-\\u1DBF\\u1E00-\\u1F15\\u1F18-\\u1F1D\\u1F20-\\u1F45\\u1F48-\\u1F4D\\u1F50-\\u1F57\\u1F59\\u1F5B\\u1F5D\\u1F5F-\\u1F7D\\u1F80-\\u1FB4\\u1FB6-\\u1FBC\\u1FBE\\u1FC2-\\u1FC4\\u1FC6-\\u1FCC\\u1FD0-\\u1FD3\\u1FD6-\\u1FDB\\u1FE0-\\u1FEC\\u1FF2-\\u1FF4\\u1FF6-\\u1FFC\\u2071\\u207F\\u2090-\\u209C\\u2102\\u2107\\u210A-\\u2113\\u2115\\u2119-\\u211D\\u2124\\u2126\\u2128\\u212A-\\u212D\\u212F-\\u2139\\u213C-\\u213F\\u2145-\\u2149\\u214E\\u2160-\\u2188\\u2C00-\\u2C2E\\u2C30-\\u2C5E\\u2C60-\\u2CE4\\u2CEB-\\u2CEE\\u2CF2\\u2CF3\\u2D00-\\u2D25\\u2D27\\u2D2D\\u2D30-\\u2D67\\u2D6F\\u2D80-\\u2D96\\u2DA0-\\u2DA6\\u2DA8-\\u2DAE\\u2DB0-\\u2DB6\\u2DB8-\\u2DBE\\u2DC0-\\u2DC6\\u2DC8-\\u2DCE\\u2DD0-\\u2DD6\\u2DD8-\\u2DDE\\u2E2F\\u3005-\\u3007\\u3021-\\u3029\\u3031-\\u3035\\u3038-\\u303C\\u3041-\\u3096\\u309D-\\u309F\\u30A1-\\u30FA\\u30FC-\\u30FF\\u3105-\\u312D\\u3131-\\u318E\\u31A0-\\u31BA\\u31F0-\\u31FF\\u3400-\\u4DB5\\u4E00-\\u9FCC\\uA000-\\uA48C\\uA4D0-\\uA4FD\\uA500-\\uA60C\\uA610-\\uA61F\\uA62A\\uA62B\\uA640-\\uA66E\\uA67F-\\uA697\\uA6A0-\\uA6EF\\uA717-\\uA71F\\uA722-\\uA788\\uA78B-\\uA78E\\uA790-\\uA793\\uA7A0-\\uA7AA\\uA7F8-\\uA801\\uA803-\\uA805\\uA807-\\uA80A\\uA80C-\\uA822\\uA840-\\uA873\\uA882-\\uA8B3\\uA8F2-\\uA8F7\\uA8FB\\uA90A-\\uA925\\uA930-\\uA946\\uA960-\\uA97C\\uA984-\\uA9B2\\uA9CF\\uAA00-\\uAA28\\uAA40-\\uAA42\\uAA44-\\uAA4B\\uAA60-\\uAA76\\uAA7A\\uAA80-\\uAAAF\\uAAB1\\uAAB5\\uAAB6\\uAAB9-\\uAABD\\uAAC0\\uAAC2\\uAADB-\\uAADD\\uAAE0-\\uAAEA\\uAAF2-\\uAAF4\\uAB01-\\uAB06\\uAB09-\\uAB0E\\uAB11-\\uAB16\\uAB20-\\uAB26\\uAB28-\\uAB2E\\uABC0-\\uABE2\\uAC00-\\uD7A3\\uD7B0-\\uD7C6\\uD7CB-\\uD7FB\\uF900-\\uFA6D\\uFA70-\\uFAD9\\uFB00-\\uFB06\\uFB13-\\uFB17\\uFB1D\\uFB1F-\\uFB28\\uFB2A-\\uFB36\\uFB38-\\uFB3C\\uFB3E\\uFB40\\uFB41\\uFB43\\uFB44\\uFB46-\\uFBB1\\uFBD3-\\uFD3D\\uFD50-\\uFD8F\\uFD92-\\uFDC7\\uFDF0-\\uFDFB\\uFE70-\\uFE74\\uFE76-\\uFEFC\\uFF21-\\uFF3A\\uFF41-\\uFF5A\\uFF66-\\uFFBE\\uFFC2-\\uFFC7\\uFFCA-\\uFFCF\\uFFD2-\\uFFD7\\uFFDA-\\uFFDC]"),combining_mark:new RegExp("[\\u0300-\\u036F\\u0483-\\u0487\\u0591-\\u05BD\\u05BF\\u05C1\\u05C2\\u05C4\\u05C5\\u05C7\\u0610-\\u061A\\u064B-\\u065F\\u0670\\u06D6-\\u06DC\\u06DF-\\u06E4\\u06E7\\u06E8\\u06EA-\\u06ED\\u0711\\u0730-\\u074A\\u07A6-\\u07B0\\u07EB-\\u07F3\\u0816-\\u0819\\u081B-\\u0823\\u0825-\\u0827\\u0829-\\u082D\\u0859-\\u085B\\u08E4-\\u08FE\\u0900-\\u0903\\u093A-\\u093C\\u093E-\\u094F\\u0951-\\u0957\\u0962\\u0963\\u0981-\\u0983\\u09BC\\u09BE-\\u09C4\\u09C7\\u09C8\\u09CB-\\u09CD\\u09D7\\u09E2\\u09E3\\u0A01-\\u0A03\\u0A3C\\u0A3E-\\u0A42\\u0A47\\u0A48\\u0A4B-\\u0A4D\\u0A51\\u0A70\\u0A71\\u0A75\\u0A81-\\u0A83\\u0ABC\\u0ABE-\\u0AC5\\u0AC7-\\u0AC9\\u0ACB-\\u0ACD\\u0AE2\\u0AE3\\u0B01-\\u0B03\\u0B3C\\u0B3E-\\u0B44\\u0B47\\u0B48\\u0B4B-\\u0B4D\\u0B56\\u0B57\\u0B62\\u0B63\\u0B82\\u0BBE-\\u0BC2\\u0BC6-\\u0BC8\\u0BCA-\\u0BCD\\u0BD7\\u0C01-\\u0C03\\u0C3E-\\u0C44\\u0C46-\\u0C48\\u0C4A-\\u0C4D\\u0C55\\u0C56\\u0C62\\u0C63\\u0C82\\u0C83\\u0CBC\\u0CBE-\\u0CC4\\u0CC6-\\u0CC8\\u0CCA-\\u0CCD\\u0CD5\\u0CD6\\u0CE2\\u0CE3\\u0D02\\u0D03\\u0D3E-\\u0D44\\u0D46-\\u0D48\\u0D4A-\\u0D4D\\u0D57\\u0D62\\u0D63\\u0D82\\u0D83\\u0DCA\\u0DCF-\\u0DD4\\u0DD6\\u0DD8-\\u0DDF\\u0DF2\\u0DF3\\u0E31\\u0E34-\\u0E3A\\u0E47-\\u0E4E\\u0EB1\\u0EB4-\\u0EB9\\u0EBB\\u0EBC\\u0EC8-\\u0ECD\\u0F18\\u0F19\\u0F35\\u0F37\\u0F39\\u0F3E\\u0F3F\\u0F71-\\u0F84\\u0F86\\u0F87\\u0F8D-\\u0F97\\u0F99-\\u0FBC\\u0FC6\\u102B-\\u103E\\u1056-\\u1059\\u105E-\\u1060\\u1062-\\u1064\\u1067-\\u106D\\u1071-\\u1074\\u1082-\\u108D\\u108F\\u109A-\\u109D\\u135D-\\u135F\\u1712-\\u1714\\u1732-\\u1734\\u1752\\u1753\\u1772\\u1773\\u17B4-\\u17D3\\u17DD\\u180B-\\u180D\\u18A9\\u1920-\\u192B\\u1930-\\u193B\\u19B0-\\u19C0\\u19C8\\u19C9\\u1A17-\\u1A1B\\u1A55-\\u1A5E\\u1A60-\\u1A7C\\u1A7F\\u1B00-\\u1B04\\u1B34-\\u1B44\\u1B6B-\\u1B73\\u1B80-\\u1B82\\u1BA1-\\u1BAD\\u1BE6-\\u1BF3\\u1C24-\\u1C37\\u1CD0-\\u1CD2\\u1CD4-\\u1CE8\\u1CED\\u1CF2-\\u1CF4\\u1DC0-\\u1DE6\\u1DFC-\\u1DFF\\u20D0-\\u20DC\\u20E1\\u20E5-\\u20F0\\u2CEF-\\u2CF1\\u2D7F\\u2DE0-\\u2DFF\\u302A-\\u302F\\u3099\\u309A\\uA66F\\uA674-\\uA67D\\uA69F\\uA6F0\\uA6F1\\uA802\\uA806\\uA80B\\uA823-\\uA827\\uA880\\uA881\\uA8B4-\\uA8C4\\uA8E0-\\uA8F1\\uA926-\\uA92D\\uA947-\\uA953\\uA980-\\uA983\\uA9B3-\\uA9C0\\uAA29-\\uAA36\\uAA43\\uAA4C\\uAA4D\\uAA7B\\uAAB0\\uAAB2-\\uAAB4\\uAAB7\\uAAB8\\uAABE\\uAABF\\uAAC1\\uAAEB-\\uAAEF\\uAAF5\\uAAF6\\uABE3-\\uABEA\\uABEC\\uABED\\uFB1E\\uFE00-\\uFE0F\\uFE20-\\uFE26]"),connector_punctuation:new RegExp("[\\u005F\\u203F\\u2040\\u2054\\uFE33\\uFE34\\uFE4D-\\uFE4F\\uFF3F]"),digit:new RegExp("[\\u0030-\\u0039\\u0660-\\u0669\\u06F0-\\u06F9\\u07C0-\\u07C9\\u0966-\\u096F\\u09E6-\\u09EF\\u0A66-\\u0A6F\\u0AE6-\\u0AEF\\u0B66-\\u0B6F\\u0BE6-\\u0BEF\\u0C66-\\u0C6F\\u0CE6-\\u0CEF\\u0D66-\\u0D6F\\u0E50-\\u0E59\\u0ED0-\\u0ED9\\u0F20-\\u0F29\\u1040-\\u1049\\u1090-\\u1099\\u17E0-\\u17E9\\u1810-\\u1819\\u1946-\\u194F\\u19D0-\\u19D9\\u1A80-\\u1A89\\u1A90-\\u1A99\\u1B50-\\u1B59\\u1BB0-\\u1BB9\\u1C40-\\u1C49\\u1C50-\\u1C59\\uA620-\\uA629\\uA8D0-\\uA8D9\\uA900-\\uA909\\uA9D0-\\uA9D9\\uAA50-\\uAA59\\uABF0-\\uABF9\\uFF10-\\uFF19]")});JS_Parse_Error.prototype.toString=function(){return this.message+" (line: "+this.line+", col: "+this.col+", pos: "+this.pos+")\n\n"+this.stack};var EX_EOF={},UNARY_PREFIX=array_to_hash(["typeof","void","delete","--","++","!","~","-","+"]),UNARY_POSTFIX=array_to_hash(["--","++"]),ASSIGNMENT=function(a,ret,i){for(;i<a.length;)ret[a[i]]=a[i].substr(0,a[i].length-1),i++;return ret}(["+=","-=","/=","*=","%=",">>=","<<=",">>>=","|=","^=","&="],{"=":!0},0),PRECEDENCE=function(a,ret){for(var i=0,n=1;i<a.length;++i,++n)for(var b=a[i],j=0;j<b.length;++j)ret[b[j]]=n;return ret}([["||"],["&&"],["|"],["^"],["&"],["==","===","!=","!=="],["<",">","<=",">=","in","instanceof"],[">>","<<",">>>"],["+","-"],["*","/","%"]],{}),STATEMENTS_WITH_LABELS=array_to_hash(["for","do","while","switch"]),ATOMIC_START_TOKEN=array_to_hash(["atom","num","string","regexp","name"]);NodeWithToken.prototype.toString=function(){return this.name};var warn=function(){};exports.tokenizer=tokenizer,exports.parse=parse,exports.slice=slice,exports.curry=curry,exports.member=member,exports.array_to_hash=array_to_hash,exports.PRECEDENCE=PRECEDENCE,exports.KEYWORDS_ATOM=KEYWORDS_ATOM,exports.RESERVED_WORDS=RESERVED_WORDS,exports.KEYWORDS=KEYWORDS,exports.ATOMIC_START_TOKEN=ATOMIC_START_TOKEN,exports.OPERATORS=OPERATORS,exports.is_alphanumeric_char=is_alphanumeric_char,exports.is_identifier_start=is_identifier_start,exports.is_identifier_char=is_identifier_char,exports.set_logger=function(logger){warn=logger}}),define("uglifyjs/squeeze-more",["require","exports","module","./parse-js","./squeeze-more"],function(require,exports){function ast_squeeze_more(ast){function with_scope(s,cont){var ret,save=scope;return scope=s,ret=cont(),scope=save,ret}function _lambda(name,args,body){return[this[0],name,args,with_scope(body.scope,curry(MAP,body,walk))]}var scope,w=pro.ast_walker(),walk=w.walk;return w.with_walkers({toplevel:function(body){return[this[0],with_scope(this.scope,curry(MAP,body,walk))]},"function":_lambda,defun:_lambda,"new":function(ctor,args){if("name"==ctor[0]){if("Array"==ctor[1]&&!scope.has("Array"))return 1!=args.length?["array",args]:walk(["call",["name","Array"],args]);if("Object"==ctor[1]&&!scope.has("Object"))return args.length?walk(["call",["name","Object"],args]):["object",[]];if(("RegExp"==ctor[1]||"Function"==ctor[1]||"Error"==ctor[1])&&!scope.has(ctor[1]))return walk(["call",["name",ctor[1]],args])}},call:function(expr,args){if("dot"==expr[0]&&"string"==expr[1][0]&&1==args.length&&(args[0][1]>0&&"substring"==expr[2]||"substr"==expr[2]))return["call",["dot",expr[1],"slice"],args];if("dot"==expr[0]&&"toString"==expr[2]&&0==args.length)return"string"==expr[1][0]?expr[1]:["binary","+",expr[1],["string",""]];if("name"==expr[0]){if("Array"==expr[1]&&1!=args.length&&!scope.has("Array"))return["array",args];if("Object"==expr[1]&&!args.length&&!scope.has("Object"))return["object",[]];if("String"==expr[1]&&!scope.has("String"))return["binary","+",args[0],["string",""]]}}},function(){return walk(pro.ast_add_scope(ast))})}{var jsp=require("./parse-js"),pro=require("./process"),curry=(jsp.slice,jsp.member,jsp.curry),MAP=pro.MAP;jsp.PRECEDENCE,jsp.OPERATORS}exports.ast_squeeze_more=ast_squeeze_more}),define("uglifyjs/process",["require","exports","module","./parse-js","./squeeze-more"],function(require,exports){function ast_walker(){function _vardefs(defs){return[this[0],MAP(defs,function(def){var a=[def[0]];return def.length>1&&(a[1]=walk(def[1])),a})]}function _block(statements){var out=[this[0]];return null!=statements&&out.push(MAP(statements,walk)),out}function walk(ast){if(null==ast)return null;try{stack.push(ast);var type=ast[0],gen=user[type];if(gen){var ret=gen.apply(ast,ast.slice(1));if(null!=ret)return ret}return gen=walkers[type],gen.apply(ast,ast.slice(1))}finally{stack.pop()}}function dive(ast){if(null==ast)return null;try{return stack.push(ast),walkers[ast[0]].apply(ast,ast.slice(1))}finally{stack.pop()}}function with_walkers(walkers,cont){var i,save={};for(i in walkers)HOP(walkers,i)&&(save[i]=user[i],user[i]=walkers[i]);var ret=cont();for(i in save)HOP(save,i)&&(save[i]?user[i]=save[i]:delete user[i]);return ret}var walkers={string:function(str){return[this[0],str]},num:function(num){return[this[0],num]},name:function(name){return[this[0],name]},toplevel:function(statements){return[this[0],MAP(statements,walk)]},block:_block,splice:_block,"var":_vardefs,"const":_vardefs,"try":function(t,c,f){return[this[0],MAP(t,walk),null!=c?[c[0],MAP(c[1],walk)]:null,null!=f?MAP(f,walk):null]},"throw":function(expr){return[this[0],walk(expr)]},"new":function(ctor,args){return[this[0],walk(ctor),MAP(args,walk)]},"switch":function(expr,body){return[this[0],walk(expr),MAP(body,function(branch){return[branch[0]?walk(branch[0]):null,MAP(branch[1],walk)]})]},"break":function(label){return[this[0],label]},"continue":function(label){return[this[0],label]},conditional:function(cond,t,e){return[this[0],walk(cond),walk(t),walk(e)]},assign:function(op,lvalue,rvalue){return[this[0],op,walk(lvalue),walk(rvalue)]},dot:function(expr){return[this[0],walk(expr)].concat(slice(arguments,1))},call:function(expr,args){return[this[0],walk(expr),MAP(args,walk)]},"function":function(name,args,body){return[this[0],name,args.slice(),MAP(body,walk)]},"debugger":function(){return[this[0]]},defun:function(name,args,body){return[this[0],name,args.slice(),MAP(body,walk)]},"if":function(conditional,t,e){return[this[0],walk(conditional),walk(t),walk(e)]
},"for":function(init,cond,step,block){return[this[0],walk(init),walk(cond),walk(step),walk(block)]},"for-in":function(vvar,key,hash,block){return[this[0],walk(vvar),walk(key),walk(hash),walk(block)]},"while":function(cond,block){return[this[0],walk(cond),walk(block)]},"do":function(cond,block){return[this[0],walk(cond),walk(block)]},"return":function(expr){return[this[0],walk(expr)]},binary:function(op,left,right){return[this[0],op,walk(left),walk(right)]},"unary-prefix":function(op,expr){return[this[0],op,walk(expr)]},"unary-postfix":function(op,expr){return[this[0],op,walk(expr)]},sub:function(expr,subscript){return[this[0],walk(expr),walk(subscript)]},object:function(props){return[this[0],MAP(props,function(p){return 2==p.length?[p[0],walk(p[1])]:[p[0],walk(p[1]),p[2]]})]},regexp:function(rx,mods){return[this[0],rx,mods]},array:function(elements){return[this[0],MAP(elements,walk)]},stat:function(stat){return[this[0],walk(stat)]},seq:function(){return[this[0]].concat(MAP(slice(arguments),walk))},label:function(name,block){return[this[0],name,walk(block)]},"with":function(expr,block){return[this[0],walk(expr),walk(block)]},atom:function(name){return[this[0],name]},directive:function(dir){return[this[0],dir]}},user={},stack=[];return{walk:walk,dive:dive,with_walkers:with_walkers,parent:function(){return stack[stack.length-2]},stack:function(){return stack}}}function Scope(parent){this.names={},this.mangled={},this.rev_mangled={},this.cname=-1,this.refs={},this.uses_with=!1,this.uses_eval=!1,this.directives=[],this.parent=parent,this.children=[],parent?(this.level=parent.level+1,parent.children.push(this)):this.level=0}function base54_digits(){return"undefined"!=typeof DIGITS_OVERRIDE_FOR_TESTING?DIGITS_OVERRIDE_FOR_TESTING:"etnrisouaflchpdvmgybwESxTNCkLAOM_DPHBjFIqRUzWXV$JKQGYZ0516372984"}function ast_add_scope(ast){function with_new_scope(cont){current_scope=new Scope(current_scope),current_scope.labels=new Scope;var ret=current_scope.body=cont();return ret.scope=current_scope,current_scope=current_scope.parent,ret}function define(name,type){return current_scope.define(name,type)}function reference(name){current_scope.refs[name]=!0}function _lambda(name,args,body){var is_defun="defun"==this[0];return[this[0],is_defun?define(name,"defun"):name,args,with_new_scope(function(){return is_defun||define(name,"lambda"),MAP(args,function(name){define(name,"arg")}),MAP(body,walk)})]}function _vardefs(type){return function(defs){MAP(defs,function(d){define(d[0],type),d[1]&&reference(d[0])})}}function _breacont(label){label&&(current_scope.labels.refs[label]=!0)}var current_scope=null,w=ast_walker(),walk=w.walk,having_eval=[];return with_new_scope(function(){function fixrefs(scope,i){for(i=scope.children.length;--i>=0;)fixrefs(scope.children[i]);for(i in scope.refs)if(HOP(scope.refs,i))for(var origin=scope.has(i),s=scope;s&&(s.refs[i]=origin,s!==origin);s=s.parent);}var ret=w.with_walkers({"function":_lambda,defun:_lambda,label:function(name){current_scope.labels.define(name)},"break":_breacont,"continue":_breacont,"with":function(){for(var s=current_scope;s;s=s.parent)s.uses_with=!0},"var":_vardefs("var"),"const":_vardefs("const"),"try":function(t,c,f){return null!=c?[this[0],MAP(t,walk),[define(c[0],"catch"),MAP(c[1],walk)],null!=f?MAP(f,walk):null]:void 0},name:function(name){"eval"==name&&having_eval.push(current_scope),reference(name)}},function(){return walk(ast)});return MAP(having_eval,function(scope){if(!scope.has("eval"))for(;scope;)scope.uses_eval=!0,scope=scope.parent}),fixrefs(current_scope),ret})}function ast_mangle(ast,options){function get_mangled(name,newMangle){return options.mangle?options.toplevel||scope.parent?options.except&&member(name,options.except)?name:options.no_functions&&HOP(scope.names,name)&&("defun"==scope.names[name]||"lambda"==scope.names[name])?name:scope.get_mangled(name,newMangle):name:name}function get_define(name){return options.defines?!scope.has(name)&&HOP(options.defines,name)?options.defines[name]:null:void 0}function _lambda(name,args,body){if(!options.no_functions&&options.mangle){var extra,is_defun="defun"==this[0];name&&(is_defun?name=get_mangled(name):body.scope.references(name)?(extra={},scope.uses_eval||scope.uses_with?extra[name]=name:name=extra[name]=scope.next_mangled()):name=null)}return body=with_scope(body.scope,function(){return args=MAP(args,function(name){return get_mangled(name)}),MAP(body,walk)},extra),[this[0],name,args,body]}function with_scope(s,cont,extra){var _scope=scope;if(scope=s,extra)for(var i in extra)HOP(extra,i)&&s.set_mangle(i,extra[i]);for(var i in s.names)HOP(s.names,i)&&get_mangled(i,!0);var ret=cont();return ret.scope=s,scope=_scope,ret}function _vardefs(defs){return[this[0],MAP(defs,function(d){return[get_mangled(d[0]),walk(d[1])]})]}function _breacont(label){return label?[this[0],scope.labels.get_mangled(label)]:void 0}var scope,w=ast_walker(),walk=w.walk;return options=defaults(options,{mangle:!0,toplevel:!1,defines:null,except:null,no_functions:!1}),w.with_walkers({"function":_lambda,defun:function(){var ast=_lambda.apply(this,arguments);switch(w.parent()[0]){case"toplevel":case"function":case"defun":return MAP.at_top(ast)}return ast},label:function(label,stat){return scope.labels.refs[label]?[this[0],scope.labels.get_mangled(label,!0),walk(stat)]:walk(stat)},"break":_breacont,"continue":_breacont,"var":_vardefs,"const":_vardefs,name:function(name){return get_define(name)||[this[0],get_mangled(name)]},"try":function(t,c,f){return[this[0],MAP(t,walk),null!=c?[get_mangled(c[0]),MAP(c[1],walk)]:null,null!=f?MAP(f,walk):null]},toplevel:function(body){var self=this;return with_scope(self.scope,function(){return[self[0],MAP(body,walk)]})},directive:function(){return MAP.at_top(this)}},function(){return walk(ast_add_scope(ast))})}function best_of(ast1,ast2){return gen_code(ast1).length>gen_code("stat"==ast2[0]?ast2[1]:ast2).length?ast2:ast1}function last_stat(b){return"block"==b[0]&&b[1]&&b[1].length>0?b[1][b[1].length-1]:b}function aborts(t){if(t)switch(last_stat(t)[0]){case"return":case"break":case"continue":case"throw":return!0}}function boolean_expr(expr){return"unary-prefix"==expr[0]&&member(expr[1],["!","delete"])||"binary"==expr[0]&&member(expr[1],["in","instanceof","==","!=","===","!==","<","<=",">=",">"])||"binary"==expr[0]&&member(expr[1],["&&","||"])&&boolean_expr(expr[2])&&boolean_expr(expr[3])||"conditional"==expr[0]&&boolean_expr(expr[2])&&boolean_expr(expr[3])||"assign"==expr[0]&&expr[1]===!0&&boolean_expr(expr[3])||"seq"==expr[0]&&boolean_expr(expr[expr.length-1])}function empty(b){return!b||"block"==b[0]&&(!b[1]||0==b[1].length)}function is_string(node){return"string"==node[0]||"unary-prefix"==node[0]&&"typeof"==node[1]||"binary"==node[0]&&"+"==node[1]&&(is_string(node[2])||is_string(node[3]))}function warn_unreachable(ast){empty(ast)||warn("Dropping unreachable code: "+gen_code(ast,!0))}function prepare_ifs(ast){function redo_if(statements){statements=MAP(statements,walk);for(var i=0;i<statements.length;++i){var fi=statements[i];if("if"==fi[0]&&!fi[3]){var t=fi[2];if(aborts(t)){var conditional=walk(fi[1]),e_body=redo_if(statements.slice(i+1)),e=1==e_body.length?e_body[0]:["block",e_body];return statements.slice(0,i).concat([[fi[0],conditional,t,e]])}}}return statements}function redo_if_lambda(name,args,body){return body=redo_if(body),[this[0],name,args,body]}function redo_if_block(statements){return[this[0],null!=statements?redo_if(statements):null]}var w=ast_walker(),walk=w.walk;return w.with_walkers({defun:redo_if_lambda,"function":redo_if_lambda,block:redo_if_block,splice:redo_if_block,toplevel:function(statements){return[this[0],redo_if(statements)]},"try":function(t,c,f){return[this[0],redo_if(t),null!=c?[c[0],redo_if(c[1])]:null,null!=f?redo_if(f):null]}},function(){return walk(ast)})}function for_side_effects(ast,handler){function stop(){throw $stop}function restart(){throw $restart}function found(){return handler.call(this,this,w,stop,restart)}function unary(op){return"++"==op||"--"==op?found.apply(this,arguments):void 0}function binary(op){return"&&"==op||"||"==op?found.apply(this,arguments):void 0}var w=ast_walker(),walk=w.walk,$stop={},$restart={};return w.with_walkers({"try":found,"throw":found,"return":found,"new":found,"switch":found,"break":found,"continue":found,assign:found,call:found,"if":found,"for":found,"for-in":found,"while":found,"do":found,"return":found,"unary-prefix":unary,"unary-postfix":unary,conditional:found,binary:binary,defun:found},function(){for(;;)try{walk(ast);break}catch(ex){if(ex===$stop)break;if(ex===$restart)continue;throw ex}})}function ast_lift_variables(ast){function do_body(body,env){var _scope=scope;scope=env,body=MAP(body,walk);var hash={},names=MAP(env.names,function(type,name){return"var"!=type?MAP.skip:env.references(name)?(hash[name]=!0,[name]):MAP.skip});return names.length>0&&(for_side_effects(["block",body],function(ast,walker,stop,restart){if("assign"==ast[0]&&ast[1]===!0&&"name"==ast[2][0]&&HOP(hash,ast[2][1])){for(var i=names.length;--i>=0;)if(names[i][0]==ast[2][1]){names[i][1]&&stop(),names[i][1]=ast[3],names.push(names.splice(i,1)[0]);break}var p=walker.parent();if("seq"==p[0]){var a=p[2];a.unshift(0,p.length),p.splice.apply(p,a)}else"stat"==p[0]?p.splice(0,p.length,"block"):stop();restart()}stop()}),body.unshift(["var",names])),scope=_scope,body}function _vardefs(defs){for(var ret=null,i=defs.length;--i>=0;){var d=defs[i];d[1]&&(d=["assign",!0,["name",d[0]],d[1]],ret=null==ret?d:["seq",d,ret])}return null==ret&&"for"!=w.parent()[0]?"for-in"==w.parent()[0]?["name",defs[0][0]]:MAP.skip:["stat",ret]}function _toplevel(body){return[this[0],do_body(body,this.scope)]}var scope,w=ast_walker(),walk=w.walk;return w.with_walkers({"function":function(name,args,body){for(var i=args.length;--i>=0&&!body.scope.references(args[i]);)args.pop();return body.scope.references(name)||(name=null),[this[0],name,args,do_body(body,body.scope)]},defun:function(name,args,body){if(!scope.references(name))return MAP.skip;for(var i=args.length;--i>=0&&!body.scope.references(args[i]);)args.pop();return[this[0],name,args,do_body(body,body.scope)]},"var":_vardefs,toplevel:_toplevel},function(){return walk(ast_add_scope(ast))})}function ast_squeeze(ast,options){return ast=squeeze_1(ast,options),ast=squeeze_2(ast,options)}function squeeze_1(ast,options){function negate(c){var not_c=["unary-prefix","!",c];switch(c[0]){case"unary-prefix":return"!"==c[1]&&boolean_expr(c[2])?c[2]:not_c;case"seq":return c=slice(c),c[c.length-1]=negate(c[c.length-1]),c;case"conditional":return best_of(not_c,["conditional",c[1],negate(c[2]),negate(c[3])]);case"binary":var op=c[1],left=c[2],right=c[3];if(!options.keep_comps)switch(op){case"<=":return["binary",">",left,right];case"<":return["binary",">=",left,right];case">=":return["binary","<",left,right];case">":return["binary","<=",left,right]}switch(op){case"==":return["binary","!=",left,right];case"!=":return["binary","==",left,right];case"===":return["binary","!==",left,right];case"!==":return["binary","===",left,right];case"&&":return best_of(not_c,["binary","||",negate(left),negate(right)]);case"||":return best_of(not_c,["binary","&&",negate(left),negate(right)])}}return not_c}function make_conditional(c,t,e){var make_real_conditional=function(){return"unary-prefix"==c[0]&&"!"==c[1]?e?["conditional",c[2],e,t]:["binary","||",c[2],t]:e?best_of(["conditional",c,t,e],["conditional",negate(c),e,t]):["binary","&&",c,t]};return when_constant(c,function(ast,val){return warn_unreachable(val?e:t),val?t:e},make_real_conditional)}function rmblock(block){return null!=block&&"block"==block[0]&&block[1]&&(1==block[1].length?block=block[1][0]:0==block[1].length&&(block=["block"])),block}function _lambda(name,args,body){return[this[0],name,args,tighten(body,"lambda")]}function tighten(statements){return statements=MAP(statements,walk),statements=statements.reduce(function(a,stat){return"block"==stat[0]?stat[1]&&a.push.apply(a,stat[1]):a.push(stat),a},[]),statements=function(a,prev){return statements.forEach(function(cur){prev&&("var"==cur[0]&&"var"==prev[0]||"const"==cur[0]&&"const"==prev[0])?prev[1]=prev[1].concat(cur[1]):(a.push(cur),prev=cur)}),a}([]),options.dead_code&&(statements=function(a,has_quit){return statements.forEach(function(st){has_quit?"function"==st[0]||"defun"==st[0]?a.push(st):"var"==st[0]||"const"==st[0]?(options.no_warnings||warn("Variables declared in unreachable code"),st[1]=MAP(st[1],function(def){return def[1]&&!options.no_warnings&&warn_unreachable(["assign",!0,["name",def[0]],def[1]]),[def[0]]}),a.push(st)):options.no_warnings||warn_unreachable(st):(a.push(st),member(st[0],["return","throw","break","continue"])&&(has_quit=!0))}),a}([])),options.make_seqs&&(statements=function(a,prev){return statements.forEach(function(cur){prev&&"stat"==prev[0]&&"stat"==cur[0]?prev[1]=["seq",prev[1],cur[1]]:(a.push(cur),prev=cur)}),a.length>=2&&"stat"==a[a.length-2][0]&&("return"==a[a.length-1][0]||"throw"==a[a.length-1][0])&&a[a.length-1][1]&&a.splice(a.length-2,2,[a[a.length-1][0],["seq",a[a.length-2][1],a[a.length-1][1]]]),a}([])),statements}function make_if(c,t,e){return when_constant(c,function(ast,val){return val?(t=walk(t),warn_unreachable(e),t||["block"]):(e=walk(e),warn_unreachable(t),e||["block"])},function(){return make_real_if(c,t,e)})}function abort_else(c,t,e){var ret=[["if",negate(c),e]];return"block"==t[0]?t[1]&&(ret=ret.concat(t[1])):ret.push(t),walk(["block",ret])}function make_real_if(c,t,e){if(c=walk(c),t=walk(t),e=walk(e),empty(e)&&empty(t))return["stat",c];empty(t)?(c=negate(c),t=e,e=null):empty(e)?e=null:!function(){var a=gen_code(c),n=negate(c),b=gen_code(n);if(b.length<a.length){var tmp=t;t=e,e=tmp,c=n}}();var ret=["if",c,t,e];return"if"==t[0]&&empty(t[3])&&empty(e)?ret=best_of(ret,walk(["if",["binary","&&",c,t[1]],t[2]])):"stat"==t[0]?e?"stat"==e[0]?ret=best_of(ret,["stat",make_conditional(c,t[1],e[1])]):aborts(e)&&(ret=abort_else(c,t,e)):ret=best_of(ret,["stat",make_conditional(c,t[1])]):e&&t[0]==e[0]&&("return"==t[0]||"throw"==t[0])&&t[1]&&e[1]?ret=best_of(ret,[t[0],make_conditional(c,t[1],e[1])]):e&&aborts(t)?(ret=[["if",c,t]],"block"==e[0]?e[1]&&(ret=ret.concat(e[1])):ret.push(e),ret=walk(["block",ret])):t&&aborts(e)&&(ret=abort_else(c,t,e)),ret}function _do_while(cond,body){return when_constant(cond,function(cond,val){return val?["for",null,null,null,walk(body)]:(warn_unreachable(body),["block"])})}options=defaults(options,{make_seqs:!0,dead_code:!0,no_warnings:!1,keep_comps:!0,unsafe:!1});var w=ast_walker(),walk=w.walk;return w.with_walkers({sub:function(expr,subscript){if("string"==subscript[0]){var name=subscript[1];if(is_identifier(name))return["dot",walk(expr),name];if(/^[1-9][0-9]*$/.test(name)||"0"===name)return["sub",walk(expr),["num",parseInt(name,10)]]}},"if":make_if,toplevel:function(body){return["toplevel",tighten(body)]},"switch":function(expr,body){var last=body.length-1;return["switch",walk(expr),MAP(body,function(branch,i){var block=tighten(branch[1]);if(i==last&&block.length>0){var node=block[block.length-1];"break"!=node[0]||node[1]||block.pop()}return[branch[0]?walk(branch[0]):null,block]})]},"function":_lambda,defun:_lambda,block:function(body){return body?rmblock(["block",tighten(body)]):void 0},binary:function(op,left,right){return when_constant(["binary",op,walk(left),walk(right)],function(c){return best_of(walk(c),this)},function(){return function(){if("=="==op||"!="==op){var l=walk(left),r=walk(right);return l&&"unary-prefix"==l[0]&&"!"==l[1]&&"num"==l[2][0]?left=["num",+!l[2][1]]:r&&"unary-prefix"==r[0]&&"!"==r[1]&&"num"==r[2][0]&&(right=["num",+!r[2][1]]),["binary",op,left,right]}}()||this})},conditional:function(c,t,e){return make_conditional(walk(c),walk(t),walk(e))},"try":function(t,c,f){return["try",tighten(t),null!=c?[c[0],tighten(c[1])]:null,null!=f?tighten(f):null]},"unary-prefix":function(op,expr){expr=walk(expr);var ret=["unary-prefix",op,expr];return"!"==op&&(ret=best_of(ret,negate(expr))),when_constant(ret,function(ast){return walk(ast)},function(){return ret})},name:function(name){switch(name){case"true":return["unary-prefix","!",["num",0]];case"false":return["unary-prefix","!",["num",1]]}},"while":_do_while,assign:function(op,lvalue,rvalue){lvalue=walk(lvalue),rvalue=walk(rvalue);var okOps=["+","-","/","*","%",">>","<<",">>>","|","^","&"];return op===!0&&"name"===lvalue[0]&&"binary"===rvalue[0]&&~okOps.indexOf(rvalue[1])&&"name"===rvalue[2][0]&&rvalue[2][1]===lvalue[1]?[this[0],rvalue[1],lvalue,rvalue[3]]:[this[0],op,lvalue,rvalue]},call:function(expr,args){return expr=walk(expr),options.unsafe&&"dot"==expr[0]&&"string"==expr[1][0]&&"toString"==expr[2]?expr[1]:[this[0],expr,MAP(args,walk)]},num:function(num){return isFinite(num)?[this[0],num]:["binary","/",num===1/0?["num",1]:num===-1/0?["unary-prefix","-",["num",1]]:["num",0],["num",0]]}},function(){return walk(prepare_ifs(walk(prepare_ifs(ast))))})}function squeeze_2(ast){function with_scope(s,cont){var ret,save=scope;return scope=s,ret=cont(),scope=save,ret}function lambda(name,args,body){return[this[0],name,args,with_scope(body.scope,curry(MAP,body,walk))]}var scope,w=ast_walker(),walk=w.walk;return w.with_walkers({directive:function(dir){return scope.active_directive(dir)?["block"]:(scope.directives.push(dir),void 0)},toplevel:function(body){return[this[0],with_scope(this.scope,curry(MAP,body,walk))]},"function":lambda,defun:lambda},function(){return walk(ast_add_scope(ast))})}function make_string(str,ascii_only){var dq=0,sq=0;return str=str.replace(/[\\\b\f\n\r\t\x22\x27\u2028\u2029\0]/g,function(s){switch(s){case"\\":return"\\\\";case"\b":return"\\b";case"\f":return"\\f";case"\n":return"\\n";case"\r":return"\\r";case"\u2028":return"\\u2028";case"\u2029":return"\\u2029";case'"':return++dq,'"';case"'":return++sq,"'";case"\x00":return"\\0"}return s}),ascii_only&&(str=to_ascii(str)),dq>sq?"'"+str.replace(/\x27/g,"\\'")+"'":'"'+str.replace(/\x22/g,'\\"')+'"'}function to_ascii(str){return str.replace(/[\u0080-\uffff]/g,function(ch){for(var code=ch.charCodeAt(0).toString(16);code.length<4;)code="0"+code;return"\\u"+code})}function gen_code(ast,options){function encode_string(str){var ret=make_string(str,options.ascii_only);return options.inline_script&&(ret=ret.replace(/<\x2fscript([>\/\t\n\f\r ])/gi,"<\\/script$1")),ret}function make_name(name){return name=name.toString(),options.ascii_only&&(name=to_ascii(name)),name}function indent(line){return null==line&&(line=""),beautify&&(line=repeat_string(" ",options.indent_start+indentation*options.indent_level)+line),line}function with_indent(cont,incr){null==incr&&(incr=1),indentation+=incr;try{return cont.apply(null,slice(arguments,1))}finally{indentation-=incr}}function last_char(str){return str=str.toString(),str.charAt(str.length-1)}function first_char(str){return str.toString().charAt(0)}function add_spaces(a){if(beautify)return a.join(" ");for(var b=[],i=0;i<a.length;++i){var next=a[i+1];b.push(a[i]),next&&(is_identifier_char(last_char(a[i]))&&(is_identifier_char(first_char(next))||"\\"==first_char(next))||/[\+\-]$/.test(a[i].toString())&&/^[\+\-]/.test(next.toString())||"/"==last_char(a[i])&&"/"==first_char(next))&&b.push(" ")}return b.join("")}function add_commas(a){return a.join(","+space)}function parenthesize(expr){for(var gen=make(expr),i=1;i<arguments.length;++i){var el=arguments[i];if(el instanceof Function&&el(expr)||expr[0]==el)return"("+gen+")"}return gen}function best_of(a){if(1==a.length)return a[0];if(2==a.length){var b=a[1];return a=a[0],a.length<=b.length?a:b}return best_of([a[0],best_of(a.slice(1))])}function needs_parens(expr){if("function"==expr[0]||"object"==expr[0])for(var a=slice(w.stack()),self=a.pop(),p=a.pop();p;){if("stat"==p[0])return!0;if(("seq"!=p[0]&&"call"!=p[0]&&"dot"!=p[0]&&"sub"!=p[0]&&"conditional"!=p[0]||p[1]!==self)&&("binary"!=p[0]&&"assign"!=p[0]&&"unary-postfix"!=p[0]||p[2]!==self))return!1;self=p,p=a.pop()}return!HOP(DOT_CALL_NO_PARENS,expr[0])}function make_num(num){var m,str=num.toString(10),a=[str.replace(/^0\./,".").replace("e+","e")];return Math.floor(num)===num?(num>=0?a.push("0x"+num.toString(16).toLowerCase(),"0"+num.toString(8)):a.push("-0x"+(-num).toString(16).toLowerCase(),"-0"+(-num).toString(8)),(m=/^(.*?)(0+)$/.exec(num))&&a.push(m[1]+"e"+m[2].length)):(m=/^0?\.(0+)(.*)$/.exec(num))&&a.push(m[2]+"e-"+(m[1].length+m[2].length),str.substr(str.indexOf("."))),best_of(a)}function make_then(th){if(null==th)return";";if("do"==th[0])return make_block([th]);for(var b=th;;){var type=b[0];if("if"==type){if(!b[3])return make(["block",[th]]);b=b[3]}else if("while"==type||"do"==type)b=b[2];else{if("for"!=type&&"for-in"!=type)break;b=b[4]}}return make(th)}function make_function(name,args,body,keyword,no_parens){var out=keyword||"function";return name&&(out+=" "+make_name(name)),out+="("+add_commas(MAP(args,make_name))+")",out=add_spaces([out,make_block(body)]),!no_parens&&needs_parens(this)?"("+out+")":out}function must_has_semicolon(node){switch(node[0]){case"with":case"while":return empty(node[2])||must_has_semicolon(node[2]);case"for":case"for-in":return empty(node[4])||must_has_semicolon(node[4]);case"if":return empty(node[2])&&!node[3]?!0:node[3]?empty(node[3])?!0:must_has_semicolon(node[3]):must_has_semicolon(node[2]);case"directive":return!0}}function make_block_statements(statements,noindent){for(var a=[],last=statements.length-1,i=0;last>=i;++i){var stat=statements[i],code=make(stat);";"!=code&&(beautify||i!=last||must_has_semicolon(stat)||(code=code.replace(/;+\s*$/,"")),a.push(code))}return noindent?a:MAP(a,indent)}function make_switch_block(body){var n=body.length;return 0==n?"{}":"{"+newline+MAP(body,function(branch,i){var has_body=branch[1].length>0,code=with_indent(function(){return indent(branch[0]?add_spaces(["case",make(branch[0])+":"]):"default:")},.5)+(has_body?newline+with_indent(function(){return make_block_statements(branch[1]).join(newline)}):"");return!beautify&&has_body&&n-1>i&&(code+=";"),code}).join(newline)+newline+indent("}")}function make_block(statements){return statements?0==statements.length?"{}":"{"+newline+with_indent(function(){return make_block_statements(statements).join(newline)})+newline+indent("}"):";"}function make_1vardef(def){var name=def[0],val=def[1];return null!=val&&(name=add_spaces([make_name(name),"=",parenthesize(val,"seq")])),name}options=defaults(options,{indent_start:0,indent_level:4,quote_keys:!1,space_colon:!1,beautify:!1,ascii_only:!1,inline_script:!1});var beautify=!!options.beautify,indentation=0,newline=beautify?"\n":"",space=beautify?" ":"",w=ast_walker(),make=w.walk;return w.with_walkers({string:encode_string,num:make_num,name:make_name,"debugger":function(){return"debugger;"},toplevel:function(statements){return make_block_statements(statements).join(newline+newline)},splice:function(statements){var parent=w.parent();return HOP(SPLICE_NEEDS_BRACKETS,parent)?make_block.apply(this,arguments):MAP(make_block_statements(statements,!0),function(line,i){return i>0?indent(line):line}).join(newline)},block:make_block,"var":function(defs){return"var "+add_commas(MAP(defs,make_1vardef))+";"},"const":function(defs){return"const "+add_commas(MAP(defs,make_1vardef))+";"},"try":function(tr,ca,fi){var out=["try",make_block(tr)];return ca&&out.push("catch","("+ca[0]+")",make_block(ca[1])),fi&&out.push("finally",make_block(fi)),add_spaces(out)},"throw":function(expr){return add_spaces(["throw",make(expr)])+";"},"new":function(ctor,args){return args=args.length>0?"("+add_commas(MAP(args,function(expr){return parenthesize(expr,"seq")}))+")":"",add_spaces(["new",parenthesize(ctor,"seq","binary","conditional","assign",function(expr){var w=ast_walker(),has_call={};try{w.with_walkers({call:function(){throw has_call},"function":function(){return this}},function(){w.walk(expr)})}catch(ex){if(ex===has_call)return!0;throw ex}})+args])},"switch":function(expr,body){return add_spaces(["switch","("+make(expr)+")",make_switch_block(body)])},"break":function(label){var out="break";return null!=label&&(out+=" "+make_name(label)),out+";"},"continue":function(label){var out="continue";return null!=label&&(out+=" "+make_name(label)),out+";"},conditional:function(co,th,el){return add_spaces([parenthesize(co,"assign","seq","conditional"),"?",parenthesize(th,"seq"),":",parenthesize(el,"seq")])},assign:function(op,lvalue,rvalue){return op&&op!==!0?op+="=":op="=",add_spaces([make(lvalue),op,parenthesize(rvalue,"seq")])},dot:function(expr){var out=make(expr),i=1;for("num"==expr[0]?/[a-f.]/i.test(out)||(out+="."):"function"!=expr[0]&&needs_parens(expr)&&(out="("+out+")");i<arguments.length;)out+="."+make_name(arguments[i++]);return out},call:function(func,args){var f=make(func);return"("!=f.charAt(0)&&needs_parens(func)&&(f="("+f+")"),f+"("+add_commas(MAP(args,function(expr){return parenthesize(expr,"seq")}))+")"},"function":make_function,defun:make_function,"if":function(co,th,el){var out=["if","("+make(co)+")",el?make_then(th):make(th)];return el&&out.push("else",make(el)),add_spaces(out)},"for":function(init,cond,step,block){var out=["for"];init=(null!=init?make(init):"").replace(/;*\s*$/,";"+space),cond=(null!=cond?make(cond):"").replace(/;*\s*$/,";"+space),step=(null!=step?make(step):"").replace(/;*\s*$/,"");var args=init+cond+step;return"; ; "==args&&(args=";;"),out.push("("+args+")",make(block)),add_spaces(out)},"for-in":function(vvar,key,hash,block){return add_spaces(["for","("+(vvar?make(vvar).replace(/;+$/,""):make(key)),"in",make(hash)+")",make(block)])},"while":function(condition,block){return add_spaces(["while","("+make(condition)+")",make(block)])},"do":function(condition,block){return add_spaces(["do",make(block),"while","("+make(condition)+")"])+";"},"return":function(expr){var out=["return"];return null!=expr&&out.push(make(expr)),add_spaces(out)+";"},binary:function(operator,lvalue,rvalue){var left=make(lvalue),right=make(rvalue);return(member(lvalue[0],["assign","conditional","seq"])||"binary"==lvalue[0]&&PRECEDENCE[operator]>PRECEDENCE[lvalue[1]]||"function"==lvalue[0]&&needs_parens(this))&&(left="("+left+")"),member(rvalue[0],["assign","conditional","seq"])||"binary"==rvalue[0]&&PRECEDENCE[operator]>=PRECEDENCE[rvalue[1]]&&(rvalue[1]!=operator||!member(operator,["&&","||","*"]))?right="("+right+")":beautify||!options.inline_script||"<"!=operator&&"<<"!=operator||"regexp"!=rvalue[0]||!/^script/i.test(rvalue[1])||(right=" "+right),add_spaces([left,operator,right])},"unary-prefix":function(operator,expr){var val=make(expr);return"num"!=expr[0]&&("unary-prefix"!=expr[0]||HOP(OPERATORS,operator+expr[1]))&&needs_parens(expr)&&(val="("+val+")"),operator+(jsp.is_alphanumeric_char(operator.charAt(0))?" ":"")+val},"unary-postfix":function(operator,expr){var val=make(expr);return"num"!=expr[0]&&("unary-postfix"!=expr[0]||HOP(OPERATORS,operator+expr[1]))&&needs_parens(expr)&&(val="("+val+")"),val+operator},sub:function(expr,subscript){var hash=make(expr);return needs_parens(expr)&&(hash="("+hash+")"),hash+"["+make(subscript)+"]"},object:function(props){var obj_needs_parens=needs_parens(this);if(0==props.length)return obj_needs_parens?"({})":"{}";var out="{"+newline+with_indent(function(){return MAP(props,function(p){if(3==p.length)return indent(make_function(p[0],p[1][2],p[1][3],p[2],!0));var key=p[0],val=parenthesize(p[1],"seq");return options.quote_keys?key=encode_string(key):("number"==typeof key||!beautify&&+key+""==key)&&parseFloat(key)>=0?key=make_num(+key):is_identifier(key)||(key=encode_string(key)),indent(add_spaces(beautify&&options.space_colon?[key,":",val]:[key+":",val]))}).join(","+newline)})+newline+indent("}");return obj_needs_parens?"("+out+")":out},regexp:function(rx,mods){return options.ascii_only&&(rx=to_ascii(rx)),"/"+rx+"/"+mods},array:function(elements){return 0==elements.length?"[]":add_spaces(["[",add_commas(MAP(elements,function(el,i){return beautify||"atom"!=el[0]||"undefined"!=el[1]?parenthesize(el,"seq"):i===elements.length-1?",":""})),"]"])},stat:function(stmt){return null!=stmt?make(stmt).replace(/;*\s*$/,";"):";"},seq:function(){return add_commas(MAP(slice(arguments),make))},label:function(name,block){return add_spaces([make_name(name),":",make(block)])},"with":function(expr,block){return add_spaces(["with","("+make(expr)+")",make(block)])},atom:function(name){return make_name(name)},directive:function(dir){return make_string(dir)+";"}},function(){return make(ast)})}function split_lines(code,max_line_length){var splits=[0];return jsp.parse(function(){function current_length(tok){return tok.pos-last_split}function split_here(tok){last_split=tok.pos,splits.push(last_split)}function custom(){var tok=next_token.apply(this,arguments);out:if((!prev_token||"keyword"!=prev_token.type)&&current_length(tok)>max_line_length)switch(tok.type){case"keyword":case"atom":case"name":case"punc":split_here(tok);break out}return prev_token=tok,tok}var prev_token,next_token=jsp.tokenizer(code),last_split=0;return custom.context=function(){return next_token.context.apply(this,arguments)},custom}()),splits.map(function(pos,i){return code.substring(pos,splits[i+1]||code.length)}).join("\n")}function repeat_string(str,i){if(0>=i)return"";if(1==i)return str;var d=repeat_string(str,i>>1);return d+=d,1&i&&(d+=str),d}function defaults(args,defs){var ret={};args===!0&&(args={});for(var i in defs)HOP(defs,i)&&(ret[i]=args&&HOP(args,i)?args[i]:defs[i]);return ret}function is_identifier(name){return/^[a-z_$][a-z0-9_$]*$/i.test(name)&&"this"!=name&&!HOP(jsp.KEYWORDS_ATOM,name)&&!HOP(jsp.RESERVED_WORDS,name)&&!HOP(jsp.KEYWORDS,name)}function HOP(obj,prop){return Object.prototype.hasOwnProperty.call(obj,prop)}var jsp=require("./parse-js"),curry=jsp.curry,slice=jsp.slice,member=jsp.member,is_identifier_char=jsp.is_identifier_char,PRECEDENCE=jsp.PRECEDENCE,OPERATORS=jsp.OPERATORS,base54=function(){var DIGITS=base54_digits();return function(num){var ret="",base=54;do ret+=DIGITS.charAt(num%base),num=Math.floor(num/base),base=64;while(num>0);return ret}}();Scope.prototype={has:function(name){for(var s=this;s;s=s.parent)if(HOP(s.names,name))return s},has_mangled:function(mname){for(var s=this;s;s=s.parent)if(HOP(s.rev_mangled,mname))return s},toJSON:function(){return{names:this.names,uses_eval:this.uses_eval,uses_with:this.uses_with}},next_mangled:function(){for(;;){var prior,m=base54(++this.cname);if(prior=this.has_mangled(m),!(prior&&this.refs[prior.rev_mangled[m]]===prior||(prior=this.has(m),prior&&prior!==this&&this.refs[m]===prior&&!prior.has_mangled(m)||HOP(this.refs,m)&&null==this.refs[m]||!is_identifier(m))))return m}},set_mangle:function(name,m){return this.rev_mangled[m]=name,this.mangled[name]=m},get_mangled:function(name,newMangle){if(this.uses_eval||this.uses_with)return name;var s=this.has(name);return s?HOP(s.mangled,name)?s.mangled[name]:newMangle?s.set_mangle(name,s.next_mangled()):name:name},references:function(name){return name&&!this.parent||this.uses_with||this.uses_eval||this.refs[name]},define:function(name,type){return null!=name?("var"!=type&&HOP(this.names,name)||(this.names[name]=type||"var"),name):void 0},active_directive:function(dir){return member(dir,this.directives)||this.parent&&this.parent.active_directive(dir)}};var MAP,warn=function(){},when_constant=function(){function evaluate(expr){switch(expr[0]){case"string":case"num":return expr[1];case"name":case"atom":switch(expr[1]){case"true":return!0;case"false":return!1;case"null":return null}break;case"unary-prefix":switch(expr[1]){case"!":return!evaluate(expr[2]);case"typeof":return typeof evaluate(expr[2]);case"~":return~evaluate(expr[2]);case"-":return-evaluate(expr[2]);case"+":return+evaluate(expr[2])}break;case"binary":var left=expr[2],right=expr[3];switch(expr[1]){case"&&":return evaluate(left)&&evaluate(right);case"||":return evaluate(left)||evaluate(right);case"|":return evaluate(left)|evaluate(right);case"&":return evaluate(left)&evaluate(right);case"^":return evaluate(left)^evaluate(right);case"+":return evaluate(left)+evaluate(right);
case"*":return evaluate(left)*evaluate(right);case"/":return evaluate(left)/evaluate(right);case"%":return evaluate(left)%evaluate(right);case"-":return evaluate(left)-evaluate(right);case"<<":return evaluate(left)<<evaluate(right);case">>":return evaluate(left)>>evaluate(right);case">>>":return evaluate(left)>>>evaluate(right);case"==":return evaluate(left)==evaluate(right);case"===":return evaluate(left)===evaluate(right);case"!=":return evaluate(left)!=evaluate(right);case"!==":return evaluate(left)!==evaluate(right);case"<":return evaluate(left)<evaluate(right);case"<=":return evaluate(left)<=evaluate(right);case">":return evaluate(left)>evaluate(right);case">=":return evaluate(left)>=evaluate(right);case"in":return evaluate(left)in evaluate(right);case"instanceof":return evaluate(left)instanceof evaluate(right)}}throw $NOT_CONSTANT}var $NOT_CONSTANT={};return function(expr,yes,no){try{var ast,val=evaluate(expr);switch(typeof val){case"string":ast=["string",val];break;case"number":ast=["num",val];break;case"boolean":ast=["name",String(val)];break;default:if(null===val){ast=["atom","null"];break}throw new Error("Can't handle constant of type: "+typeof val)}return yes.call(expr,ast,val)}catch(ex){if(ex===$NOT_CONSTANT){if("binary"!=expr[0]||"==="!=expr[1]&&"!=="!=expr[1]||!(is_string(expr[2])&&is_string(expr[3])||boolean_expr(expr[2])&&boolean_expr(expr[3]))){if(no&&"binary"==expr[0]&&("||"==expr[1]||"&&"==expr[1]))try{var lval=evaluate(expr[2]);expr="&&"==expr[1]&&(lval?expr[3]:lval)||"||"==expr[1]&&(lval?lval:expr[3])||expr}catch(ex2){}}else expr[1]=expr[1].substr(0,2);return no?no.call(expr,expr):null}throw ex}}}(),DOT_CALL_NO_PARENS=jsp.array_to_hash(["name","array","object","string","dot","sub","call","regexp","defun"]),SPLICE_NEEDS_BRACKETS=jsp.array_to_hash(["if","while","do","for","for-in","with"]);!function(){function AtTop(val){this.v=val}function Splice(val){this.v=val}MAP=function(a,f,o){function doit(){var val=f.call(o,a[i],i);val instanceof AtTop?(val=val.v,val instanceof Splice?top.push.apply(top,val.v):top.push(val)):val!=skip&&(val instanceof Splice?ret.push.apply(ret,val.v):ret.push(val))}var i,ret=[],top=[];if(a instanceof Array)for(i=0;i<a.length;++i)doit();else for(i in a)HOP(a,i)&&doit();return top.concat(ret)},MAP.at_top=function(val){return new AtTop(val)},MAP.splice=function(val){return new Splice(val)};var skip=MAP.skip={}}(),exports.ast_walker=ast_walker,exports.ast_mangle=ast_mangle,exports.ast_squeeze=ast_squeeze,exports.ast_lift_variables=ast_lift_variables,exports.gen_code=gen_code,exports.ast_add_scope=ast_add_scope,exports.set_logger=function(logger){warn=logger},exports.make_string=make_string,exports.split_lines=split_lines,exports.MAP=MAP,exports.ast_squeeze_more=require("./squeeze-more").ast_squeeze_more}),define("uglifyjs/index",["require","exports","module","./parse-js","./process","./consolidator"],function(require,exports,module){function uglify(orig_code,options){options||(options={});var jsp=uglify.parser,pro=uglify.uglify,ast=jsp.parse(orig_code,options.strict_semicolons);ast=pro.ast_mangle(ast,options.mangle_options),ast=pro.ast_squeeze(ast,options.squeeze_options);var final_code=pro.gen_code(ast,options.gen_options);return final_code}uglify.parser=require("./parse-js"),uglify.uglify=require("./process"),uglify.consolidator=require("./consolidator"),module.exports=uglify}),define("source-map/array-set",function(require,exports){function ArraySet(){this._array=[],this._set={}}var util=require("./util");ArraySet.fromArray=function(aArray,aAllowDuplicates){for(var set=new ArraySet,i=0,len=aArray.length;len>i;i++)set.add(aArray[i],aAllowDuplicates);return set},ArraySet.prototype.add=function(aStr,aAllowDuplicates){var isDuplicate=this.has(aStr),idx=this._array.length;(!isDuplicate||aAllowDuplicates)&&this._array.push(aStr),isDuplicate||(this._set[util.toSetString(aStr)]=idx)},ArraySet.prototype.has=function(aStr){return Object.prototype.hasOwnProperty.call(this._set,util.toSetString(aStr))},ArraySet.prototype.indexOf=function(aStr){if(this.has(aStr))return this._set[util.toSetString(aStr)];throw new Error('"'+aStr+'" is not in the set.')},ArraySet.prototype.at=function(aIdx){if(aIdx>=0&&aIdx<this._array.length)return this._array[aIdx];throw new Error("No element indexed by "+aIdx)},ArraySet.prototype.toArray=function(){return this._array.slice()},exports.ArraySet=ArraySet}),define("source-map/base64-vlq",function(require,exports){function toVLQSigned(aValue){return 0>aValue?(-aValue<<1)+1:(aValue<<1)+0}function fromVLQSigned(aValue){var isNegative=1===(1&aValue),shifted=aValue>>1;return isNegative?-shifted:shifted}var base64=require("./base64"),VLQ_BASE_SHIFT=5,VLQ_BASE=1<<VLQ_BASE_SHIFT,VLQ_BASE_MASK=VLQ_BASE-1,VLQ_CONTINUATION_BIT=VLQ_BASE;exports.encode=function(aValue){var digit,encoded="",vlq=toVLQSigned(aValue);do digit=vlq&VLQ_BASE_MASK,vlq>>>=VLQ_BASE_SHIFT,vlq>0&&(digit|=VLQ_CONTINUATION_BIT),encoded+=base64.encode(digit);while(vlq>0);return encoded},exports.decode=function(aStr){var continuation,digit,i=0,strLen=aStr.length,result=0,shift=0;do{if(i>=strLen)throw new Error("Expected more digits in base 64 VLQ value.");digit=base64.decode(aStr.charAt(i++)),continuation=!!(digit&VLQ_CONTINUATION_BIT),digit&=VLQ_BASE_MASK,result+=digit<<shift,shift+=VLQ_BASE_SHIFT}while(continuation);return{value:fromVLQSigned(result),rest:aStr.slice(i)}}}),define("source-map/base64",function(require,exports){var charToIntMap={},intToCharMap={};"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".split("").forEach(function(ch,index){charToIntMap[ch]=index,intToCharMap[index]=ch}),exports.encode=function(aNumber){if(aNumber in intToCharMap)return intToCharMap[aNumber];throw new TypeError("Must be between 0 and 63: "+aNumber)},exports.decode=function(aChar){if(aChar in charToIntMap)return charToIntMap[aChar];throw new TypeError("Not a valid base 64 digit: "+aChar)}}),define("source-map/binary-search",function(require,exports){function recursiveSearch(aLow,aHigh,aNeedle,aHaystack,aCompare){var mid=Math.floor((aHigh-aLow)/2)+aLow,cmp=aCompare(aNeedle,aHaystack[mid],!0);return 0===cmp?aHaystack[mid]:cmp>0?aHigh-mid>1?recursiveSearch(mid,aHigh,aNeedle,aHaystack,aCompare):aHaystack[mid]:mid-aLow>1?recursiveSearch(aLow,mid,aNeedle,aHaystack,aCompare):0>aLow?null:aHaystack[aLow]}exports.search=function(aNeedle,aHaystack,aCompare){return aHaystack.length>0?recursiveSearch(-1,aHaystack.length,aNeedle,aHaystack,aCompare):null}}),define("source-map/source-map-consumer",function(require,exports){function SourceMapConsumer(aSourceMap){var sourceMap=aSourceMap;"string"==typeof aSourceMap&&(sourceMap=JSON.parse(aSourceMap.replace(/^\)\]\}'/,"")));var version=util.getArg(sourceMap,"version"),sources=util.getArg(sourceMap,"sources"),names=util.getArg(sourceMap,"names"),sourceRoot=util.getArg(sourceMap,"sourceRoot",null),sourcesContent=util.getArg(sourceMap,"sourcesContent",null),mappings=util.getArg(sourceMap,"mappings"),file=util.getArg(sourceMap,"file",null);if(version!==this._version)throw new Error("Unsupported version: "+version);this._names=ArraySet.fromArray(names,!0),this._sources=ArraySet.fromArray(sources,!0),this.sourceRoot=sourceRoot,this.sourcesContent=sourcesContent,this.file=file,this._generatedMappings=[],this._originalMappings=[],this._parseMappings(mappings,sourceRoot)}var util=require("./util"),binarySearch=require("./binary-search"),ArraySet=require("./array-set").ArraySet,base64VLQ=require("./base64-vlq");SourceMapConsumer.fromSourceMap=function(aSourceMap){var smc=Object.create(SourceMapConsumer.prototype);return smc._names=ArraySet.fromArray(aSourceMap._names.toArray(),!0),smc._sources=ArraySet.fromArray(aSourceMap._sources.toArray(),!0),smc.sourceRoot=aSourceMap._sourceRoot,smc.sourcesContent=aSourceMap._generateSourcesContent(smc._sources.toArray(),smc.sourceRoot),smc.file=aSourceMap._file,smc._generatedMappings=aSourceMap._mappings.slice().sort(util.compareByGeneratedPositions),smc._originalMappings=aSourceMap._mappings.slice().sort(util.compareByOriginalPositions),smc},SourceMapConsumer.prototype._version=3,Object.defineProperty(SourceMapConsumer.prototype,"sources",{get:function(){return this._sources.toArray().map(function(s){return this.sourceRoot?util.join(this.sourceRoot,s):s},this)}}),SourceMapConsumer.prototype._parseMappings=function(aStr){for(var mapping,temp,generatedLine=1,previousGeneratedColumn=0,previousOriginalLine=0,previousOriginalColumn=0,previousSource=0,previousName=0,mappingSeparator=/^[,;]/,str=aStr;str.length>0;)if(";"===str.charAt(0))generatedLine++,str=str.slice(1),previousGeneratedColumn=0;else if(","===str.charAt(0))str=str.slice(1);else{if(mapping={},mapping.generatedLine=generatedLine,temp=base64VLQ.decode(str),mapping.generatedColumn=previousGeneratedColumn+temp.value,previousGeneratedColumn=mapping.generatedColumn,str=temp.rest,str.length>0&&!mappingSeparator.test(str.charAt(0))){if(temp=base64VLQ.decode(str),mapping.source=this._sources.at(previousSource+temp.value),previousSource+=temp.value,str=temp.rest,0===str.length||mappingSeparator.test(str.charAt(0)))throw new Error("Found a source, but no line and column");if(temp=base64VLQ.decode(str),mapping.originalLine=previousOriginalLine+temp.value,previousOriginalLine=mapping.originalLine,mapping.originalLine+=1,str=temp.rest,0===str.length||mappingSeparator.test(str.charAt(0)))throw new Error("Found a source and line, but no column");temp=base64VLQ.decode(str),mapping.originalColumn=previousOriginalColumn+temp.value,previousOriginalColumn=mapping.originalColumn,str=temp.rest,str.length>0&&!mappingSeparator.test(str.charAt(0))&&(temp=base64VLQ.decode(str),mapping.name=this._names.at(previousName+temp.value),previousName+=temp.value,str=temp.rest)}this._generatedMappings.push(mapping),"number"==typeof mapping.originalLine&&this._originalMappings.push(mapping)}this._originalMappings.sort(util.compareByOriginalPositions)},SourceMapConsumer.prototype._findMapping=function(aNeedle,aMappings,aLineName,aColumnName,aComparator){if(aNeedle[aLineName]<=0)throw new TypeError("Line must be greater than or equal to 1, got "+aNeedle[aLineName]);if(aNeedle[aColumnName]<0)throw new TypeError("Column must be greater than or equal to 0, got "+aNeedle[aColumnName]);return binarySearch.search(aNeedle,aMappings,aComparator)},SourceMapConsumer.prototype.originalPositionFor=function(aArgs){var needle={generatedLine:util.getArg(aArgs,"line"),generatedColumn:util.getArg(aArgs,"column")},mapping=this._findMapping(needle,this._generatedMappings,"generatedLine","generatedColumn",util.compareByGeneratedPositions);if(mapping){var source=util.getArg(mapping,"source",null);return source&&this.sourceRoot&&(source=util.join(this.sourceRoot,source)),{source:source,line:util.getArg(mapping,"originalLine",null),column:util.getArg(mapping,"originalColumn",null),name:util.getArg(mapping,"name",null)}}return{source:null,line:null,column:null,name:null}},SourceMapConsumer.prototype.sourceContentFor=function(aSource){if(!this.sourcesContent)return null;if(this.sourceRoot&&(aSource=util.relative(this.sourceRoot,aSource)),this._sources.has(aSource))return this.sourcesContent[this._sources.indexOf(aSource)];var url;if(this.sourceRoot&&(url=util.urlParse(this.sourceRoot))){var fileUriAbsPath=aSource.replace(/^file:\/\//,"");if("file"==url.scheme&&this._sources.has(fileUriAbsPath))return this.sourcesContent[this._sources.indexOf(fileUriAbsPath)];if((!url.path||"/"==url.path)&&this._sources.has("/"+aSource))return this.sourcesContent[this._sources.indexOf("/"+aSource)]}throw new Error('"'+aSource+'" is not in the SourceMap.')},SourceMapConsumer.prototype.generatedPositionFor=function(aArgs){var needle={source:util.getArg(aArgs,"source"),originalLine:util.getArg(aArgs,"line"),originalColumn:util.getArg(aArgs,"column")};this.sourceRoot&&(needle.source=util.relative(this.sourceRoot,needle.source));var mapping=this._findMapping(needle,this._originalMappings,"originalLine","originalColumn",util.compareByOriginalPositions);return mapping?{line:util.getArg(mapping,"generatedLine",null),column:util.getArg(mapping,"generatedColumn",null)}:{line:null,column:null}},SourceMapConsumer.GENERATED_ORDER=1,SourceMapConsumer.ORIGINAL_ORDER=2,SourceMapConsumer.prototype.eachMapping=function(aCallback,aContext,aOrder){var mappings,context=aContext||null,order=aOrder||SourceMapConsumer.GENERATED_ORDER;switch(order){case SourceMapConsumer.GENERATED_ORDER:mappings=this._generatedMappings;break;case SourceMapConsumer.ORIGINAL_ORDER:mappings=this._originalMappings;break;default:throw new Error("Unknown order of iteration.")}var sourceRoot=this.sourceRoot;mappings.map(function(mapping){var source=mapping.source;return source&&sourceRoot&&(source=util.join(sourceRoot,source)),{source:source,generatedLine:mapping.generatedLine,generatedColumn:mapping.generatedColumn,originalLine:mapping.originalLine,originalColumn:mapping.originalColumn,name:mapping.name}}).forEach(aCallback,context)},exports.SourceMapConsumer=SourceMapConsumer}),define("source-map/source-map-generator",function(require,exports){function SourceMapGenerator(aArgs){this._file=util.getArg(aArgs,"file"),this._sourceRoot=util.getArg(aArgs,"sourceRoot",null),this._sources=new ArraySet,this._names=new ArraySet,this._mappings=[],this._sourcesContents=null}var base64VLQ=require("./base64-vlq"),util=require("./util"),ArraySet=require("./array-set").ArraySet;SourceMapGenerator.prototype._version=3,SourceMapGenerator.fromSourceMap=function(aSourceMapConsumer){var sourceRoot=aSourceMapConsumer.sourceRoot,generator=new SourceMapGenerator({file:aSourceMapConsumer.file,sourceRoot:sourceRoot});return aSourceMapConsumer.eachMapping(function(mapping){var newMapping={generated:{line:mapping.generatedLine,column:mapping.generatedColumn}};mapping.source&&(newMapping.source=mapping.source,sourceRoot&&(newMapping.source=util.relative(sourceRoot,newMapping.source)),newMapping.original={line:mapping.originalLine,column:mapping.originalColumn},mapping.name&&(newMapping.name=mapping.name)),generator.addMapping(newMapping)}),aSourceMapConsumer.sources.forEach(function(sourceFile){var content=aSourceMapConsumer.sourceContentFor(sourceFile);content&&generator.setSourceContent(sourceFile,content)}),generator},SourceMapGenerator.prototype.addMapping=function(aArgs){var generated=util.getArg(aArgs,"generated"),original=util.getArg(aArgs,"original",null),source=util.getArg(aArgs,"source",null),name=util.getArg(aArgs,"name",null);this._validateMapping(generated,original,source,name),source&&!this._sources.has(source)&&this._sources.add(source),name&&!this._names.has(name)&&this._names.add(name),this._mappings.push({generatedLine:generated.line,generatedColumn:generated.column,originalLine:null!=original&&original.line,originalColumn:null!=original&&original.column,source:source,name:name})},SourceMapGenerator.prototype.setSourceContent=function(aSourceFile,aSourceContent){var source=aSourceFile;this._sourceRoot&&(source=util.relative(this._sourceRoot,source)),null!==aSourceContent?(this._sourcesContents||(this._sourcesContents={}),this._sourcesContents[util.toSetString(source)]=aSourceContent):(delete this._sourcesContents[util.toSetString(source)],0===Object.keys(this._sourcesContents).length&&(this._sourcesContents=null))},SourceMapGenerator.prototype.applySourceMap=function(aSourceMapConsumer,aSourceFile){aSourceFile||(aSourceFile=aSourceMapConsumer.file);var sourceRoot=this._sourceRoot;sourceRoot&&(aSourceFile=util.relative(sourceRoot,aSourceFile));var newSources=new ArraySet,newNames=new ArraySet;this._mappings.forEach(function(mapping){if(mapping.source===aSourceFile&&mapping.originalLine){var original=aSourceMapConsumer.originalPositionFor({line:mapping.originalLine,column:mapping.originalColumn});null!==original.source&&(mapping.source=sourceRoot?util.relative(sourceRoot,original.source):original.source,mapping.originalLine=original.line,mapping.originalColumn=original.column,null!==original.name&&null!==mapping.name&&(mapping.name=original.name))}var source=mapping.source;source&&!newSources.has(source)&&newSources.add(source);var name=mapping.name;name&&!newNames.has(name)&&newNames.add(name)},this),this._sources=newSources,this._names=newNames,aSourceMapConsumer.sources.forEach(function(sourceFile){var content=aSourceMapConsumer.sourceContentFor(sourceFile);content&&(sourceRoot&&(sourceFile=util.relative(sourceRoot,sourceFile)),this.setSourceContent(sourceFile,content))},this)},SourceMapGenerator.prototype._validateMapping=function(aGenerated,aOriginal,aSource,aName){if(!(aGenerated&&"line"in aGenerated&&"column"in aGenerated&&aGenerated.line>0&&aGenerated.column>=0&&!aOriginal&&!aSource&&!aName||aGenerated&&"line"in aGenerated&&"column"in aGenerated&&aOriginal&&"line"in aOriginal&&"column"in aOriginal&&aGenerated.line>0&&aGenerated.column>=0&&aOriginal.line>0&&aOriginal.column>=0&&aSource))throw new Error("Invalid mapping: "+JSON.stringify({generated:aGenerated,source:aSource,orginal:aOriginal,name:aName}))},SourceMapGenerator.prototype._serializeMappings=function(){var mapping,previousGeneratedColumn=0,previousGeneratedLine=1,previousOriginalColumn=0,previousOriginalLine=0,previousName=0,previousSource=0,result="";this._mappings.sort(util.compareByGeneratedPositions);for(var i=0,len=this._mappings.length;len>i;i++){if(mapping=this._mappings[i],mapping.generatedLine!==previousGeneratedLine)for(previousGeneratedColumn=0;mapping.generatedLine!==previousGeneratedLine;)result+=";",previousGeneratedLine++;else if(i>0){if(!util.compareByGeneratedPositions(mapping,this._mappings[i-1]))continue;result+=","}result+=base64VLQ.encode(mapping.generatedColumn-previousGeneratedColumn),previousGeneratedColumn=mapping.generatedColumn,mapping.source&&(result+=base64VLQ.encode(this._sources.indexOf(mapping.source)-previousSource),previousSource=this._sources.indexOf(mapping.source),result+=base64VLQ.encode(mapping.originalLine-1-previousOriginalLine),previousOriginalLine=mapping.originalLine-1,result+=base64VLQ.encode(mapping.originalColumn-previousOriginalColumn),previousOriginalColumn=mapping.originalColumn,mapping.name&&(result+=base64VLQ.encode(this._names.indexOf(mapping.name)-previousName),previousName=this._names.indexOf(mapping.name)))}return result},SourceMapGenerator.prototype._generateSourcesContent=function(aSources,aSourceRoot){return aSources.map(function(source){if(!this._sourcesContents)return null;aSourceRoot&&(source=util.relative(aSourceRoot,source));var key=util.toSetString(source);return Object.prototype.hasOwnProperty.call(this._sourcesContents,key)?this._sourcesContents[key]:null},this)},SourceMapGenerator.prototype.toJSON=function(){var map={version:this._version,file:this._file,sources:this._sources.toArray(),names:this._names.toArray(),mappings:this._serializeMappings()};return this._sourceRoot&&(map.sourceRoot=this._sourceRoot),this._sourcesContents&&(map.sourcesContent=this._generateSourcesContent(map.sources,map.sourceRoot)),map},SourceMapGenerator.prototype.toString=function(){return JSON.stringify(this)},exports.SourceMapGenerator=SourceMapGenerator}),define("source-map/source-node",function(require,exports){function SourceNode(aLine,aColumn,aSource,aChunks,aName){this.children=[],this.sourceContents={},this.line=void 0===aLine?null:aLine,this.column=void 0===aColumn?null:aColumn,this.source=void 0===aSource?null:aSource,this.name=void 0===aName?null:aName,null!=aChunks&&this.add(aChunks)}var SourceMapGenerator=require("./source-map-generator").SourceMapGenerator,util=require("./util");SourceNode.fromStringWithSourceMap=function(aGeneratedCode,aSourceMapConsumer){function addMappingWithCode(mapping,code){null===mapping||void 0===mapping.source?node.add(code):node.add(new SourceNode(mapping.originalLine,mapping.originalColumn,mapping.source,code,mapping.name))}var node=new SourceNode,remainingLines=aGeneratedCode.split("\n"),lastGeneratedLine=1,lastGeneratedColumn=0,lastMapping=null;return aSourceMapConsumer.eachMapping(function(mapping){if(null===lastMapping){for(;lastGeneratedLine<mapping.generatedLine;)node.add(remainingLines.shift()+"\n"),lastGeneratedLine++;if(lastGeneratedColumn<mapping.generatedColumn){var nextLine=remainingLines[0];node.add(nextLine.substr(0,mapping.generatedColumn)),remainingLines[0]=nextLine.substr(mapping.generatedColumn),lastGeneratedColumn=mapping.generatedColumn}}else if(lastGeneratedLine<mapping.generatedLine){var code="";do code+=remainingLines.shift()+"\n",lastGeneratedLine++,lastGeneratedColumn=0;while(lastGeneratedLine<mapping.generatedLine);if(lastGeneratedColumn<mapping.generatedColumn){var nextLine=remainingLines[0];code+=nextLine.substr(0,mapping.generatedColumn),remainingLines[0]=nextLine.substr(mapping.generatedColumn),lastGeneratedColumn=mapping.generatedColumn}addMappingWithCode(lastMapping,code)}else{var nextLine=remainingLines[0],code=nextLine.substr(0,mapping.generatedColumn-lastGeneratedColumn);remainingLines[0]=nextLine.substr(mapping.generatedColumn-lastGeneratedColumn),lastGeneratedColumn=mapping.generatedColumn,addMappingWithCode(lastMapping,code)}lastMapping=mapping},this),addMappingWithCode(lastMapping,remainingLines.join("\n")),aSourceMapConsumer.sources.forEach(function(sourceFile){var content=aSourceMapConsumer.sourceContentFor(sourceFile);content&&node.setSourceContent(sourceFile,content)}),node},SourceNode.prototype.add=function(aChunk){if(Array.isArray(aChunk))aChunk.forEach(function(chunk){this.add(chunk)},this);else{if(!(aChunk instanceof SourceNode||"string"==typeof aChunk))throw new TypeError("Expected a SourceNode, string, or an array of SourceNodes and strings. Got "+aChunk);aChunk&&this.children.push(aChunk)}return this},SourceNode.prototype.prepend=function(aChunk){if(Array.isArray(aChunk))for(var i=aChunk.length-1;i>=0;i--)this.prepend(aChunk[i]);else{if(!(aChunk instanceof SourceNode||"string"==typeof aChunk))throw new TypeError("Expected a SourceNode, string, or an array of SourceNodes and strings. Got "+aChunk);this.children.unshift(aChunk)}return this},SourceNode.prototype.walk=function(aFn){for(var chunk,i=0,len=this.children.length;len>i;i++)chunk=this.children[i],chunk instanceof SourceNode?chunk.walk(aFn):""!==chunk&&aFn(chunk,{source:this.source,line:this.line,column:this.column,name:this.name})},SourceNode.prototype.join=function(aSep){var newChildren,i,len=this.children.length;if(len>0){for(newChildren=[],i=0;len-1>i;i++)newChildren.push(this.children[i]),newChildren.push(aSep);newChildren.push(this.children[i]),this.children=newChildren}return this},SourceNode.prototype.replaceRight=function(aPattern,aReplacement){var lastChild=this.children[this.children.length-1];return lastChild instanceof SourceNode?lastChild.replaceRight(aPattern,aReplacement):"string"==typeof lastChild?this.children[this.children.length-1]=lastChild.replace(aPattern,aReplacement):this.children.push("".replace(aPattern,aReplacement)),this},SourceNode.prototype.setSourceContent=function(aSourceFile,aSourceContent){this.sourceContents[util.toSetString(aSourceFile)]=aSourceContent},SourceNode.prototype.walkSourceContents=function(aFn){for(var i=0,len=this.children.length;len>i;i++)this.children[i]instanceof SourceNode&&this.children[i].walkSourceContents(aFn);for(var sources=Object.keys(this.sourceContents),i=0,len=sources.length;len>i;i++)aFn(util.fromSetString(sources[i]),this.sourceContents[sources[i]])},SourceNode.prototype.toString=function(){var str="";return this.walk(function(chunk){str+=chunk}),str},SourceNode.prototype.toStringWithSourceMap=function(aArgs){var generated={code:"",line:1,column:0},map=new SourceMapGenerator(aArgs),sourceMappingActive=!1,lastOriginalSource=null,lastOriginalLine=null,lastOriginalColumn=null,lastOriginalName=null;return this.walk(function(chunk,original){generated.code+=chunk,null!==original.source&&null!==original.line&&null!==original.column?((lastOriginalSource!==original.source||lastOriginalLine!==original.line||lastOriginalColumn!==original.column||lastOriginalName!==original.name)&&map.addMapping({source:original.source,original:{line:original.line,column:original.column},generated:{line:generated.line,column:generated.column},name:original.name}),lastOriginalSource=original.source,lastOriginalLine=original.line,lastOriginalColumn=original.column,lastOriginalName=original.name,sourceMappingActive=!0):sourceMappingActive&&(map.addMapping({generated:{line:generated.line,column:generated.column}}),lastOriginalSource=null,sourceMappingActive=!1),chunk.split("").forEach(function(ch){"\n"===ch?(generated.line++,generated.column=0):generated.column++})}),this.walkSourceContents(function(sourceFile,sourceContent){map.setSourceContent(sourceFile,sourceContent)}),{code:generated.code,map:map}},exports.SourceNode=SourceNode}),define("source-map/util",function(require,exports){function getArg(aArgs,aName,aDefaultValue){if(aName in aArgs)return aArgs[aName];if(3===arguments.length)return aDefaultValue;throw new Error('"'+aName+'" is a required argument.')}function urlParse(aUrl){var match=aUrl.match(urlRegexp);return match?{scheme:match[1],auth:match[3],host:match[4],port:match[6],path:match[7]}:null}function urlGenerate(aParsedUrl){var url=aParsedUrl.scheme+"://";return aParsedUrl.auth&&(url+=aParsedUrl.auth+"@"),aParsedUrl.host&&(url+=aParsedUrl.host),aParsedUrl.port&&(url+=":"+aParsedUrl.port),aParsedUrl.path&&(url+=aParsedUrl.path),url}function join(aRoot,aPath){var url;return aPath.match(urlRegexp)||aPath.match(dataUrlRegexp)?aPath:"/"===aPath.charAt(0)&&(url=urlParse(aRoot))?(url.path=aPath,urlGenerate(url)):aRoot.replace(/\/$/,"")+"/"+aPath}function toSetString(aStr){return"$"+aStr}function fromSetString(aStr){return aStr.substr(1)}function relative(aRoot,aPath){aRoot=aRoot.replace(/\/$/,"");var url=urlParse(aRoot);return"/"==aPath.charAt(0)&&url&&"/"==url.path?aPath.slice(1):0===aPath.indexOf(aRoot+"/")?aPath.substr(aRoot.length+1):aPath}function strcmp(aStr1,aStr2){var s1=aStr1||"",s2=aStr2||"";return(s1>s2)-(s2>s1)}function compareByOriginalPositions(mappingA,mappingB,onlyCompareOriginal){var cmp;return(cmp=strcmp(mappingA.source,mappingB.source))?cmp:(cmp=mappingA.originalLine-mappingB.originalLine)?cmp:(cmp=mappingA.originalColumn-mappingB.originalColumn,cmp||onlyCompareOriginal?cmp:(cmp=strcmp(mappingA.name,mappingB.name))?cmp:(cmp=mappingA.generatedLine-mappingB.generatedLine,cmp?cmp:mappingA.generatedColumn-mappingB.generatedColumn))}function compareByGeneratedPositions(mappingA,mappingB,onlyCompareGenerated){var cmp;return(cmp=mappingA.generatedLine-mappingB.generatedLine)?cmp:(cmp=mappingA.generatedColumn-mappingB.generatedColumn,cmp||onlyCompareGenerated?cmp:(cmp=strcmp(mappingA.source,mappingB.source))?cmp:(cmp=mappingA.originalLine-mappingB.originalLine)?cmp:(cmp=mappingA.originalColumn-mappingB.originalColumn,cmp?cmp:strcmp(mappingA.name,mappingB.name)))}exports.getArg=getArg;var urlRegexp=/([\w+\-.]+):\/\/((\w+:\w+)@)?([\w.]+)?(:(\d+))?(\S+)?/,dataUrlRegexp=/^data:.+\,.+/;exports.urlParse=urlParse,exports.urlGenerate=urlGenerate,exports.join=join,exports.toSetString=toSetString,exports.fromSetString=fromSetString,exports.relative=relative,exports.compareByOriginalPositions=compareByOriginalPositions,exports.compareByGeneratedPositions=compareByGeneratedPositions}),define("source-map",function(require,exports){exports.SourceMapGenerator=require("./source-map/source-map-generator").SourceMapGenerator,exports.SourceMapConsumer=require("./source-map/source-map-consumer").SourceMapConsumer,exports.SourceNode=require("./source-map/source-node").SourceNode}),define("uglifyjs2",["exports","source-map","logger","env!env/file"],function(exports,MOZ_SourceMap,logger,rjsFile){!function(exports,global){function array_to_hash(a){for(var ret=Object.create(null),i=0;i<a.length;++i)ret[a[i]]=!0;return ret}function slice(a,start){return Array.prototype.slice.call(a,start||0)}function characters(str){return str.split("")}function member(name,array){for(var i=array.length;--i>=0;)if(array[i]==name)return!0;return!1}function find_if(func,array){for(var i=0,n=array.length;n>i;++i)if(func(array[i]))return array[i]}function repeat_string(str,i){if(0>=i)return"";if(1==i)return str;var d=repeat_string(str,i>>1);return d+=d,1&i&&(d+=str),d}function DefaultsError(msg,defs){this.msg=msg,this.defs=defs}function defaults(args,defs,croak){args===!0&&(args={});var ret=args||{};if(croak)for(var i in ret)if(ret.hasOwnProperty(i)&&!defs.hasOwnProperty(i))throw new DefaultsError("`"+i+"` is not a supported option",defs);for(var i in defs)defs.hasOwnProperty(i)&&(ret[i]=args&&args.hasOwnProperty(i)?args[i]:defs[i]);return ret}function merge(obj,ext){for(var i in ext)ext.hasOwnProperty(i)&&(obj[i]=ext[i]);return obj}function noop(){}function push_uniq(array,el){array.indexOf(el)<0&&array.push(el)}function string_template(text,props){return text.replace(/\{(.+?)\}/g,function(str,p){return props[p]})}function remove(array,el){for(var i=array.length;--i>=0;)array[i]===el&&array.splice(i,1)}function mergeSort(array,cmp){function merge(a,b){for(var r=[],ai=0,bi=0,i=0;ai<a.length&&bi<b.length;)r[i++]=cmp(a[ai],b[bi])<=0?a[ai++]:b[bi++];return ai<a.length&&r.push.apply(r,a.slice(ai)),bi<b.length&&r.push.apply(r,b.slice(bi)),r}function _ms(a){if(a.length<=1)return a;var m=Math.floor(a.length/2),left=a.slice(0,m),right=a.slice(m);return left=_ms(left),right=_ms(right),merge(left,right)}return array.length<2?array.slice():_ms(array)}function set_difference(a,b){return a.filter(function(el){return b.indexOf(el)<0})}function set_intersection(a,b){return a.filter(function(el){return b.indexOf(el)>=0})}function makePredicate(words){function compareTo(arr){if(1==arr.length)return f+="return str === "+JSON.stringify(arr[0])+";";f+="switch(str){";for(var i=0;i<arr.length;++i)f+="case "+JSON.stringify(arr[i])+":";f+="return true}return false;"}words instanceof Array||(words=words.split(" "));var f="",cats=[];out:for(var i=0;i<words.length;++i){for(var j=0;j<cats.length;++j)if(cats[j][0].length==words[i].length){cats[j].push(words[i]);continue out}cats.push([words[i]])}if(cats.length>3){cats.sort(function(a,b){return b.length-a.length}),f+="switch(str.length){";for(var i=0;i<cats.length;++i){var cat=cats[i];f+="case "+cat[0].length+":",compareTo(cat)}f+="}"}else compareTo(words);return new Function("str",f)}function all(array,predicate){for(var i=array.length;--i>=0;)if(!predicate(array[i]))return!1;return!0}function Dictionary(){this._values=Object.create(null),this._size=0}function DEFNODE(type,props,methods,base){arguments.length<4&&(base=AST_Node),props=props?props.split(/\s+/):[];var self_props=props;base&&base.PROPS&&(props=props.concat(base.PROPS));for(var code="return function AST_"+type+"(props){ if (props) { ",i=props.length;--i>=0;)code+="this."+props[i]+" = props."+props[i]+";";var proto=base&&new base;(proto&&proto.initialize||methods&&methods.initialize)&&(code+="this.initialize();"),code+="}}";var ctor=new Function(code)();if(proto&&(ctor.prototype=proto,ctor.BASE=base),base&&base.SUBCLASSES.push(ctor),ctor.prototype.CTOR=ctor,ctor.PROPS=props||null,ctor.SELF_PROPS=self_props,ctor.SUBCLASSES=[],type&&(ctor.prototype.TYPE=ctor.TYPE=type),methods)for(i in methods)methods.hasOwnProperty(i)&&(/^\$/.test(i)?ctor[i.substr(1)]=methods[i]:ctor.prototype[i]=methods[i]);return ctor.DEFMETHOD=function(name,method){this.prototype[name]=method},ctor}function walk_body(node,visitor){node.body instanceof AST_Statement?node.body._walk(visitor):node.body.forEach(function(stat){stat._walk(visitor)})}function TreeWalker(callback){this.visit=callback,this.stack=[]}function is_letter(code){return code>=97&&122>=code||code>=65&&90>=code||code>=170&&UNICODE.letter.test(String.fromCharCode(code))}function is_digit(code){return code>=48&&57>=code}function is_alphanumeric_char(code){return is_digit(code)||is_letter(code)}function is_unicode_combining_mark(ch){return UNICODE.non_spacing_mark.test(ch)||UNICODE.space_combining_mark.test(ch)
}function is_unicode_connector_punctuation(ch){return UNICODE.connector_punctuation.test(ch)}function is_identifier(name){return!RESERVED_WORDS(name)&&/^[a-z_$][a-z0-9_$]*$/i.test(name)}function is_identifier_start(code){return 36==code||95==code||is_letter(code)}function is_identifier_char(ch){var code=ch.charCodeAt(0);return is_identifier_start(code)||is_digit(code)||8204==code||8205==code||is_unicode_combining_mark(ch)||is_unicode_connector_punctuation(ch)}function is_identifier_string(str){var i=str.length;if(0==i)return!1;if(is_digit(str.charCodeAt(0)))return!1;for(;--i>=0;)if(!is_identifier_char(str.charAt(i)))return!1;return!0}function parse_js_number(num){return RE_HEX_NUMBER.test(num)?parseInt(num.substr(2),16):RE_OCT_NUMBER.test(num)?parseInt(num.substr(1),8):RE_DEC_NUMBER.test(num)?parseFloat(num):void 0}function JS_Parse_Error(message,line,col,pos){this.message=message,this.line=line,this.col=col,this.pos=pos,this.stack=(new Error).stack}function js_error(message,filename,line,col,pos){throw new JS_Parse_Error(message,line,col,pos)}function is_token(token,type,val){return token.type==type&&(null==val||token.value==val)}function tokenizer($TEXT,filename){function peek(){return S.text.charAt(S.pos)}function next(signal_eof,in_string){var ch=S.text.charAt(S.pos++);if(signal_eof&&!ch)throw EX_EOF;return"\n"==ch?(S.newline_before=S.newline_before||!in_string,++S.line,S.col=0):++S.col,ch}function find(what,signal_eof){var pos=S.text.indexOf(what,S.pos);if(signal_eof&&-1==pos)throw EX_EOF;return pos}function start_token(){S.tokline=S.line,S.tokcol=S.col,S.tokpos=S.pos}function token(type,value,is_comment){S.regex_allowed="operator"==type&&!UNARY_POSTFIX(value)||"keyword"==type&&KEYWORDS_BEFORE_EXPRESSION(value)||"punc"==type&&PUNC_BEFORE_EXPRESSION(value);var ret={type:type,value:value,line:S.tokline,col:S.tokcol,pos:S.tokpos,endpos:S.pos,nlb:S.newline_before,file:filename};if(!is_comment){ret.comments_before=S.comments_before,S.comments_before=[];for(var i=0,len=ret.comments_before.length;len>i;i++)ret.nlb=ret.nlb||ret.comments_before[i].nlb}return S.newline_before=!1,new AST_Token(ret)}function skip_whitespace(){for(;WHITESPACE_CHARS(peek());)next()}function read_while(pred){for(var ch,ret="",i=0;(ch=peek())&&pred(ch,i++);)ret+=next();return ret}function parse_error(err){js_error(err,filename,S.tokline,S.tokcol,S.tokpos)}function read_num(prefix){var has_e=!1,after_e=!1,has_x=!1,has_dot="."==prefix,num=read_while(function(ch,i){var code=ch.charCodeAt(0);switch(code){case 120:case 88:return has_x?!1:has_x=!0;case 101:case 69:return has_x?!0:has_e?!1:has_e=after_e=!0;case 45:return after_e||0==i&&!prefix;case 43:return after_e;case after_e=!1,46:return has_dot||has_x||has_e?!1:has_dot=!0}return is_alphanumeric_char(code)});prefix&&(num=prefix+num);var valid=parse_js_number(num);return isNaN(valid)?(parse_error("Invalid syntax: "+num),void 0):token("num",valid)}function read_escaped_char(in_string){var ch=next(!0,in_string);switch(ch.charCodeAt(0)){case 110:return"\n";case 114:return"\r";case 116:return"	";case 98:return"\b";case 118:return"";case 102:return"\f";case 48:return"\x00";case 120:return String.fromCharCode(hex_bytes(2));case 117:return String.fromCharCode(hex_bytes(4));case 10:return"";default:return ch}}function hex_bytes(n){for(var num=0;n>0;--n){var digit=parseInt(next(!0),16);isNaN(digit)&&parse_error("Invalid hex-character pattern in string"),num=num<<4|digit}return num}function read_line_comment(){next();var ret,i=find("\n");return-1==i?(ret=S.text.substr(S.pos),S.pos=S.text.length):(ret=S.text.substring(S.pos,i),S.pos=i),token("comment1",ret,!0)}function read_name(){for(var ch,hex,backslash=!1,name="",escaped=!1;null!=(ch=peek());)if(backslash)"u"!=ch&&parse_error("Expecting UnicodeEscapeSequence -- uXXXX"),ch=read_escaped_char(),is_identifier_char(ch)||parse_error("Unicode char: "+ch.charCodeAt(0)+" is not valid in identifier"),name+=ch,backslash=!1;else if("\\"==ch)escaped=backslash=!0,next();else{if(!is_identifier_char(ch))break;name+=next()}return KEYWORDS(name)&&escaped&&(hex=name.charCodeAt(0).toString(16).toUpperCase(),name="\\u"+"0000".substr(hex.length)+hex+name.slice(1)),name}function read_operator(prefix){function grow(op){if(!peek())return op;var bigger=op+peek();return OPERATORS(bigger)?(next(),grow(bigger)):op}return token("operator",grow(prefix||next()))}function handle_slash(){next();var regex_allowed=S.regex_allowed;switch(peek()){case"/":return S.comments_before.push(read_line_comment()),S.regex_allowed=regex_allowed,next_token();case"*":return S.comments_before.push(read_multiline_comment()),S.regex_allowed=regex_allowed,next_token()}return S.regex_allowed?read_regexp(""):read_operator("/")}function handle_dot(){return next(),is_digit(peek().charCodeAt(0))?read_num("."):token("punc",".")}function read_word(){var word=read_name();return KEYWORDS_ATOM(word)?token("atom",word):KEYWORDS(word)?OPERATORS(word)?token("operator",word):token("keyword",word):token("name",word)}function with_eof_error(eof_error,cont){return function(x){try{return cont(x)}catch(ex){if(ex!==EX_EOF)throw ex;parse_error(eof_error)}}}function next_token(force_regexp){if(null!=force_regexp)return read_regexp(force_regexp);skip_whitespace(),start_token();var ch=peek();if(!ch)return token("eof");var code=ch.charCodeAt(0);switch(code){case 34:case 39:return read_string();case 46:return handle_dot();case 47:return handle_slash()}return is_digit(code)?read_num():PUNC_CHARS(ch)?token("punc",next()):OPERATOR_CHARS(ch)?read_operator():92==code||is_identifier_start(code)?read_word():(parse_error("Unexpected character '"+ch+"'"),void 0)}var S={text:$TEXT.replace(/\r\n?|[\n\u2028\u2029]/g,"\n").replace(/\uFEFF/g,""),filename:filename,pos:0,tokpos:0,line:1,tokline:0,col:0,tokcol:0,newline_before:!1,regex_allowed:!1,comments_before:[]},read_string=with_eof_error("Unterminated string constant",function(){for(var quote=next(),ret="";;){var ch=next(!0);if("\\"==ch){var octal_len=0,first=null;ch=read_while(function(ch){if(ch>="0"&&"7">=ch){if(!first)return first=ch,++octal_len;if("3">=first&&2>=octal_len)return++octal_len;if(first>="4"&&1>=octal_len)return++octal_len}return!1}),ch=octal_len>0?String.fromCharCode(parseInt(ch,8)):read_escaped_char(!0)}else if(ch==quote)break;ret+=ch}return token("string",ret)}),read_multiline_comment=with_eof_error("Unterminated multiline comment",function(){next();var i=find("*/",!0),text=S.text.substring(S.pos,i),a=text.split("\n"),n=a.length;return S.pos=i+2,S.line+=n-1,n>1?S.col=a[n-1].length:S.col+=a[n-1].length,S.col+=2,S.newline_before=S.newline_before||text.indexOf("\n")>=0,token("comment2",text,!0)}),read_regexp=with_eof_error("Unterminated regular expression",function(regexp){for(var ch,prev_backslash=!1,in_class=!1;ch=next(!0);)if(prev_backslash)regexp+="\\"+ch,prev_backslash=!1;else if("["==ch)in_class=!0,regexp+=ch;else if("]"==ch&&in_class)in_class=!1,regexp+=ch;else{if("/"==ch&&!in_class)break;"\\"==ch?prev_backslash=!0:regexp+=ch}var mods=read_name();return token("regexp",new RegExp(regexp,mods))});return next_token.context=function(nc){return nc&&(S=nc),S},next_token}function parse($TEXT,options){function is(type,value){return is_token(S.token,type,value)}function peek(){return S.peeked||(S.peeked=S.input())}function next(){return S.prev=S.token,S.peeked?(S.token=S.peeked,S.peeked=null):S.token=S.input(),S.in_directives=S.in_directives&&("string"==S.token.type||is("punc",";")),S.token}function prev(){return S.prev}function croak(msg,line,col,pos){var ctx=S.input.context();js_error(msg,ctx.filename,null!=line?line:ctx.tokline,null!=col?col:ctx.tokcol,null!=pos?pos:ctx.tokpos)}function token_error(token,msg){croak(msg,token.line,token.col)}function unexpected(token){null==token&&(token=S.token),token_error(token,"Unexpected token: "+token.type+" ("+token.value+")")}function expect_token(type,val){return is(type,val)?next():(token_error(S.token,"Unexpected token "+S.token.type+" «"+S.token.value+"», expected "+type+" «"+val+"»"),void 0)}function expect(punc){return expect_token("punc",punc)}function can_insert_semicolon(){return!options.strict&&(S.token.nlb||is("eof")||is("punc","}"))}function semicolon(){is("punc",";")?next():can_insert_semicolon()||unexpected()}function parenthesised(){expect("(");var exp=expression(!0);return expect(")"),exp}function embed_tokens(parser){return function(){var start=S.token,expr=parser(),end=prev();return expr.start=start,expr.end=end,expr}}function labeled_statement(){var label=as_symbol(AST_Label);find_if(function(l){return l.name==label.name},S.labels)&&croak("Label "+label.name+" defined twice"),expect(":"),S.labels.push(label);var stat=statement();return S.labels.pop(),new AST_LabeledStatement({body:stat,label:label})}function simple_statement(tmp){return new AST_SimpleStatement({body:(tmp=expression(!0),semicolon(),tmp)})}function break_cont(type){var label=null;return can_insert_semicolon()||(label=as_symbol(AST_LabelRef,!0)),null!=label?find_if(function(l){return l.name==label.name},S.labels)||croak("Undefined label "+label.name):0==S.in_loop&&croak(type.TYPE+" not inside a loop or switch"),semicolon(),new type({label:label})}function for_(){expect("(");var init=null;return!is("punc",";")&&(init=is("keyword","var")?(next(),var_(!0)):expression(!0,!0),is("operator","in"))?(init instanceof AST_Var&&init.definitions.length>1&&croak("Only one variable declaration allowed in for..in loop"),next(),for_in(init)):regular_for(init)}function regular_for(init){expect(";");var test=is("punc",";")?null:expression(!0);expect(";");var step=is("punc",")")?null:expression(!0);return expect(")"),new AST_For({init:init,condition:test,step:step,body:in_loop(statement)})}function for_in(init){var lhs=init instanceof AST_Var?init.definitions[0].name:null,obj=expression(!0);return expect(")"),new AST_ForIn({init:init,name:lhs,object:obj,body:in_loop(statement)})}function if_(){var cond=parenthesised(),body=statement(),belse=null;return is("keyword","else")&&(next(),belse=statement()),new AST_If({condition:cond,body:body,alternative:belse})}function block_(){expect("{");for(var a=[];!is("punc","}");)is("eof")&&unexpected(),a.push(statement());return next(),a}function switch_body_(){expect("{");for(var tmp,a=[],cur=null,branch=null;!is("punc","}");)is("eof")&&unexpected(),is("keyword","case")?(branch&&(branch.end=prev()),cur=[],branch=new AST_Case({start:(tmp=S.token,next(),tmp),expression:expression(!0),body:cur}),a.push(branch),expect(":")):is("keyword","default")?(branch&&(branch.end=prev()),cur=[],branch=new AST_Default({start:(tmp=S.token,next(),expect(":"),tmp),body:cur}),a.push(branch)):(cur||unexpected(),cur.push(statement()));return branch&&(branch.end=prev()),next(),a}function try_(){var body=block_(),bcatch=null,bfinally=null;if(is("keyword","catch")){var start=S.token;next(),expect("(");var name=as_symbol(AST_SymbolCatch);expect(")"),bcatch=new AST_Catch({start:start,argname:name,body:block_(),end:prev()})}if(is("keyword","finally")){var start=S.token;next(),bfinally=new AST_Finally({start:start,body:block_(),end:prev()})}return bcatch||bfinally||croak("Missing catch/finally blocks"),new AST_Try({body:body,bcatch:bcatch,bfinally:bfinally})}function vardefs(no_in,in_const){for(var a=[];a.push(new AST_VarDef({start:S.token,name:as_symbol(in_const?AST_SymbolConst:AST_SymbolVar),value:is("operator","=")?(next(),expression(!1,no_in)):null,end:prev()})),is("punc",",");)next();return a}function as_atom_node(){var ret,tok=S.token;switch(tok.type){case"name":return as_symbol(AST_SymbolRef);case"num":ret=new AST_Number({start:tok,end:tok,value:tok.value});break;case"string":ret=new AST_String({start:tok,end:tok,value:tok.value});break;case"regexp":ret=new AST_RegExp({start:tok,end:tok,value:tok.value});break;case"atom":switch(tok.value){case"false":ret=new AST_False({start:tok,end:tok});break;case"true":ret=new AST_True({start:tok,end:tok});break;case"null":ret=new AST_Null({start:tok,end:tok})}}return next(),ret}function expr_list(closing,allow_trailing_comma,allow_empty){for(var first=!0,a=[];!is("punc",closing)&&(first?first=!1:expect(","),!allow_trailing_comma||!is("punc",closing));)is("punc",",")&&allow_empty?a.push(new AST_Hole({start:S.token,end:S.token})):a.push(expression(!1));return next(),a}function as_property_name(){var tmp=S.token;switch(next(),tmp.type){case"num":case"string":case"name":case"operator":case"keyword":case"atom":return tmp.value;default:unexpected()}}function as_name(){var tmp=S.token;switch(next(),tmp.type){case"name":case"operator":case"keyword":case"atom":return tmp.value;default:unexpected()}}function as_symbol(type,noerror){if(!is("name"))return noerror||croak("Name expected"),null;var name=S.token.value,sym=new("this"==name?AST_This:type)({name:String(S.token.value),start:S.token,end:S.token});return next(),sym}function make_unary(ctor,op,expr){return"++"!=op&&"--"!=op||is_assignable(expr)||croak("Invalid use of "+op+" operator"),new ctor({operator:op,expression:expr})}function expr_ops(no_in){return expr_op(maybe_unary(!0),0,no_in)}function is_assignable(expr){return options.strict?expr instanceof AST_This?!1:expr instanceof AST_PropAccess||expr instanceof AST_Symbol:!0}function in_loop(cont){++S.in_loop;var ret=cont();return--S.in_loop,ret}options=defaults(options,{strict:!1,filename:null,toplevel:null,expression:!1});var S={input:"string"==typeof $TEXT?tokenizer($TEXT,options.filename):$TEXT,token:null,prev:null,peeked:null,in_function:0,in_directives:!0,in_loop:0,labels:[]};S.token=next();var statement=embed_tokens(function(){var tmp;switch((is("operator","/")||is("operator","/="))&&(S.peeked=null,S.token=S.input(S.token.value.substr(1))),S.token.type){case"string":var dir=S.in_directives,stat=simple_statement();return dir&&stat.body instanceof AST_String&&!is("punc",",")?new AST_Directive({value:stat.body.value}):stat;case"num":case"regexp":case"operator":case"atom":return simple_statement();case"name":return is_token(peek(),"punc",":")?labeled_statement():simple_statement();case"punc":switch(S.token.value){case"{":return new AST_BlockStatement({start:S.token,body:block_(),end:prev()});case"[":case"(":return simple_statement();case";":return next(),new AST_EmptyStatement;default:unexpected()}case"keyword":switch(tmp=S.token.value,next(),tmp){case"break":return break_cont(AST_Break);case"continue":return break_cont(AST_Continue);case"debugger":return semicolon(),new AST_Debugger;case"do":return new AST_Do({body:in_loop(statement),condition:(expect_token("keyword","while"),tmp=parenthesised(),semicolon(),tmp)});case"while":return new AST_While({condition:parenthesised(),body:in_loop(statement)});case"for":return for_();case"function":return function_(!0);case"if":return if_();case"return":return 0==S.in_function&&croak("'return' outside of function"),new AST_Return({value:is("punc",";")?(next(),null):can_insert_semicolon()?null:(tmp=expression(!0),semicolon(),tmp)});case"switch":return new AST_Switch({expression:parenthesised(),body:in_loop(switch_body_)});case"throw":return S.token.nlb&&croak("Illegal newline after 'throw'"),new AST_Throw({value:(tmp=expression(!0),semicolon(),tmp)});case"try":return try_();case"var":return tmp=var_(),semicolon(),tmp;case"const":return tmp=const_(),semicolon(),tmp;case"with":return new AST_With({expression:parenthesised(),body:statement()});default:unexpected()}}}),function_=function(in_statement,ctor){var is_accessor=ctor===AST_Accessor,name=is("name")?as_symbol(in_statement?AST_SymbolDefun:is_accessor?AST_SymbolAccessor:AST_SymbolLambda):is_accessor&&(is("string")||is("num"))?as_atom_node():null;return in_statement&&!name&&unexpected(),expect("("),ctor||(ctor=in_statement?AST_Defun:AST_Function),new ctor({name:name,argnames:function(first,a){for(;!is("punc",")");)first?first=!1:expect(","),a.push(as_symbol(AST_SymbolFunarg));return next(),a}(!0,[]),body:function(loop,labels){++S.in_function,S.in_directives=!0,S.in_loop=0,S.labels=[];var a=block_();return--S.in_function,S.in_loop=loop,S.labels=labels,a}(S.in_loop,S.labels)})},var_=function(no_in){return new AST_Var({start:prev(),definitions:vardefs(no_in,!1),end:prev()})},const_=function(){return new AST_Const({start:prev(),definitions:vardefs(!1,!0),end:prev()})},new_=function(){var start=S.token;expect_token("operator","new");var args,newexp=expr_atom(!1);return is("punc","(")?(next(),args=expr_list(")")):args=[],subscripts(new AST_New({start:start,expression:newexp,args:args,end:prev()}),!0)},expr_atom=function(allow_calls){if(is("operator","new"))return new_();var start=S.token;if(is("punc")){switch(start.value){case"(":next();var ex=expression(!0);return ex.start=start,ex.end=S.token,expect(")"),subscripts(ex,allow_calls);case"[":return subscripts(array_(),allow_calls);case"{":return subscripts(object_(),allow_calls)}unexpected()}if(is("keyword","function")){next();var func=function_(!1);return func.start=start,func.end=prev(),subscripts(func,allow_calls)}return ATOMIC_START_TOKEN[S.token.type]?subscripts(as_atom_node(),allow_calls):(unexpected(),void 0)},array_=embed_tokens(function(){return expect("["),new AST_Array({elements:expr_list("]",!options.strict,!0)})}),object_=embed_tokens(function(){expect("{");for(var first=!0,a=[];!is("punc","}")&&(first?first=!1:expect(","),options.strict||!is("punc","}"));){var start=S.token,type=start.type,name=as_property_name();if("name"==type&&!is("punc",":")){if("get"==name){a.push(new AST_ObjectGetter({start:start,key:name,value:function_(!1,AST_Accessor),end:prev()}));continue}if("set"==name){a.push(new AST_ObjectSetter({start:start,key:name,value:function_(!1,AST_Accessor),end:prev()}));continue}}expect(":"),a.push(new AST_ObjectKeyVal({start:start,key:name,value:expression(!1),end:prev()}))}return next(),new AST_Object({properties:a})}),subscripts=function(expr,allow_calls){var start=expr.start;if(is("punc","."))return next(),subscripts(new AST_Dot({start:start,expression:expr,property:as_name(),end:prev()}),allow_calls);if(is("punc","[")){next();var prop=expression(!0);return expect("]"),subscripts(new AST_Sub({start:start,expression:expr,property:prop,end:prev()}),allow_calls)}return allow_calls&&is("punc","(")?(next(),subscripts(new AST_Call({start:start,expression:expr,args:expr_list(")"),end:prev()}),!0)):expr},maybe_unary=function(allow_calls){var start=S.token;if(is("operator")&&UNARY_PREFIX(start.value)){next();var ex=make_unary(AST_UnaryPrefix,start.value,maybe_unary(allow_calls));return ex.start=start,ex.end=prev(),ex}for(var val=expr_atom(allow_calls);is("operator")&&UNARY_POSTFIX(S.token.value)&&!S.token.nlb;)val=make_unary(AST_UnaryPostfix,S.token.value,val),val.start=start,val.end=S.token,next();return val},expr_op=function(left,min_prec,no_in){var op=is("operator")?S.token.value:null;"in"==op&&no_in&&(op=null);var prec=null!=op?PRECEDENCE[op]:null;if(null!=prec&&prec>min_prec){next();var right=expr_op(maybe_unary(!0),prec,no_in);return expr_op(new AST_Binary({start:left.start,left:left,operator:op,right:right,end:right.end}),min_prec,no_in)}return left},maybe_conditional=function(no_in){var start=S.token,expr=expr_ops(no_in);if(is("operator","?")){next();var yes=expression(!1);return expect(":"),new AST_Conditional({start:start,condition:expr,consequent:yes,alternative:expression(!1,no_in),end:peek()})}return expr},maybe_assign=function(no_in){var start=S.token,left=maybe_conditional(no_in),val=S.token.value;if(is("operator")&&ASSIGNMENT(val)){if(is_assignable(left))return next(),new AST_Assign({start:start,left:left,operator:val,right:maybe_assign(no_in),end:prev()});croak("Invalid assignment")}return left},expression=function(commas,no_in){var start=S.token,expr=maybe_assign(no_in);return commas&&is("punc",",")?(next(),new AST_Seq({start:start,car:expr,cdr:expression(!0,no_in),end:peek()})):expr};return options.expression?expression(!0):function(){for(var start=S.token,body=[];!is("eof");)body.push(statement());var end=prev(),toplevel=options.toplevel;return toplevel?(toplevel.body=toplevel.body.concat(body),toplevel.end=end):toplevel=new AST_Toplevel({start:start,body:body,end:end}),toplevel}()}function TreeTransformer(before,after){TreeWalker.call(this),this.before=before,this.after=after}function SymbolDef(scope,index,orig){this.name=orig.name,this.orig=[orig],this.scope=scope,this.references=[],this.global=!1,this.mangled_name=null,this.undeclared=!1,this.constant=!1,this.index=index}function OutputStream(options){function to_ascii(str,identifier){return str.replace(/[\u0080-\uffff]/g,function(ch){var code=ch.charCodeAt(0).toString(16);if(code.length<=2&&!identifier){for(;code.length<2;)code="0"+code;return"\\x"+code}for(;code.length<4;)code="0"+code;return"\\u"+code})}function make_string(str){var dq=0,sq=0;return str=str.replace(/[\\\b\f\n\r\t\x22\x27\u2028\u2029\0]/g,function(s){switch(s){case"\\":return"\\\\";case"\b":return"\\b";case"\f":return"\\f";case"\n":return"\\n";case"\r":return"\\r";case"\u2028":return"\\u2028";case"\u2029":return"\\u2029";case'"':return++dq,'"';case"'":return++sq,"'";case"\x00":return"\\x00"}return s}),options.ascii_only&&(str=to_ascii(str)),dq>sq?"'"+str.replace(/\x27/g,"\\'")+"'":'"'+str.replace(/\x22/g,'\\"')+'"'}function encode_string(str){var ret=make_string(str);return options.inline_script&&(ret=ret.replace(/<\x2fscript([>\/\t\n\f\r ])/gi,"<\\/script$1")),ret}function make_name(name){return name=name.toString(),options.ascii_only&&(name=to_ascii(name,!0)),name}function make_indent(back){return repeat_string(" ",options.indent_start+indentation-back*options.indent_level)}function last_char(){return last.charAt(last.length-1)}function maybe_newline(){options.max_line_len&&current_col>options.max_line_len&&print("\n")}function print(str){str=String(str);var ch=str.charAt(0);if(might_need_semicolon&&(ch&&!(";}".indexOf(ch)<0)||/[;]$/.test(last)||(options.semicolons||requireSemicolonChars(ch)?(OUTPUT+=";",current_col++,current_pos++):(OUTPUT+="\n",current_pos++,current_line++,current_col=0),options.beautify||(might_need_space=!1)),might_need_semicolon=!1,maybe_newline()),!options.beautify&&options.preserve_line&&stack[stack.length-1])for(var target_line=stack[stack.length-1].start.line;target_line>current_line;)OUTPUT+="\n",current_pos++,current_line++,current_col=0,might_need_space=!1;if(might_need_space){var prev=last_char();(is_identifier_char(prev)&&(is_identifier_char(ch)||"\\"==ch)||/^[\+\-\/]$/.test(ch)&&ch==prev)&&(OUTPUT+=" ",current_col++,current_pos++),might_need_space=!1}var a=str.split(/\r?\n/),n=a.length-1;current_line+=n,0==n?current_col+=a[n].length:current_col=a[n].length,current_pos+=str.length,last=str,OUTPUT+=str}function force_semicolon(){might_need_semicolon=!1,print(";")}function next_indent(){return indentation+options.indent_level}function with_block(cont){var ret;return print("{"),newline(),with_indent(next_indent(),function(){ret=cont()}),indent(),print("}"),ret}function with_parens(cont){print("(");var ret=cont();return print(")"),ret}function with_square(cont){print("[");var ret=cont();return print("]"),ret}function comma(){print(","),space()}function colon(){print(":"),options.space_colon&&space()}function get(){return OUTPUT}options=defaults(options,{indent_start:0,indent_level:4,quote_keys:!1,space_colon:!0,ascii_only:!1,inline_script:!1,width:80,max_line_len:32e3,beautify:!1,source_map:null,bracketize:!1,semicolons:!0,comments:!1,preserve_line:!1,screw_ie8:!1},!0);var indentation=0,current_col=0,current_line=1,current_pos=0,OUTPUT="",might_need_space=!1,might_need_semicolon=!1,last=null,requireSemicolonChars=makePredicate("( [ + * / - , ."),space=options.beautify?function(){print(" ")}:function(){might_need_space=!0},indent=options.beautify?function(half){options.beautify&&print(make_indent(half?.5:0))}:noop,with_indent=options.beautify?function(col,cont){col===!0&&(col=next_indent());var save_indentation=indentation;indentation=col;var ret=cont();return indentation=save_indentation,ret}:function(col,cont){return cont()},newline=options.beautify?function(){print("\n")}:noop,semicolon=options.beautify?function(){print(";")}:function(){might_need_semicolon=!0},add_mapping=options.source_map?function(token,name){try{token&&options.source_map.add(token.file||"?",current_line,current_col,token.line,token.col,name||"name"!=token.type?name:token.value)}catch(ex){AST_Node.warn("Couldn't figure out mapping for {file}:{line},{col} → {cline},{ccol} [{name}]",{file:token.file,line:token.line,col:token.col,cline:current_line,ccol:current_col,name:name||""})}}:noop,stack=[];return{get:get,toString:get,indent:indent,indentation:function(){return indentation},current_width:function(){return current_col-indentation},should_break:function(){return options.width&&this.current_width()>=options.width},newline:newline,print:print,space:space,comma:comma,colon:colon,last:function(){return last},semicolon:semicolon,force_semicolon:force_semicolon,to_ascii:to_ascii,print_name:function(name){print(make_name(name))},print_string:function(str){print(encode_string(str))},next_indent:next_indent,with_indent:with_indent,with_block:with_block,with_parens:with_parens,with_square:with_square,add_mapping:add_mapping,option:function(opt){return options[opt]},line:function(){return current_line},col:function(){return current_col},pos:function(){return current_pos},push_node:function(node){stack.push(node)},pop_node:function(){return stack.pop()},stack:function(){return stack},parent:function(n){return stack[stack.length-2-(n||0)]}}}function Compressor(options,false_by_default){return this instanceof Compressor?(TreeTransformer.call(this,this.before,this.after),this.options=defaults(options,{sequences:!false_by_default,properties:!false_by_default,dead_code:!false_by_default,drop_debugger:!false_by_default,unsafe:!1,unsafe_comps:!1,conditionals:!false_by_default,comparisons:!false_by_default,evaluate:!false_by_default,booleans:!false_by_default,loops:!false_by_default,unused:!false_by_default,hoist_funs:!false_by_default,hoist_vars:!1,if_return:!false_by_default,join_vars:!false_by_default,cascade:!false_by_default,side_effects:!false_by_default,negate_iife:!false_by_default,screw_ie8:!1,warnings:!0,global_defs:{}},!0),void 0):new Compressor(options,false_by_default)}function SourceMap(options){function add(source,gen_line,gen_col,orig_line,orig_col,name){if(orig_map){var info=orig_map.originalPositionFor({line:orig_line,column:orig_col});source=info.source,orig_line=info.line,orig_col=info.column,name=info.name}generator.addMapping({generated:{line:gen_line,column:gen_col},original:{line:orig_line,column:orig_col},source:source,name:name})}options=defaults(options,{file:null,root:null,orig:null});var generator=new MOZ_SourceMap.SourceMapGenerator({file:options.file,sourceRoot:options.root}),orig_map=options.orig&&new MOZ_SourceMap.SourceMapConsumer(options.orig);return{add:add,get:function(){return generator},toString:function(){return generator.toString()}}}global.UglifyJS=exports;var MAP=function(){function MAP(a,f,backwards){function doit(){var val=f(a[i],i),is_last=val instanceof Last;return is_last&&(val=val.v),val instanceof AtTop?(val=val.v,val instanceof Splice?top.push.apply(top,backwards?val.v.slice().reverse():val.v):top.push(val)):val!==skip&&(val instanceof Splice?ret.push.apply(ret,backwards?val.v.slice().reverse():val.v):ret.push(val)),is_last}var i,ret=[],top=[];if(a instanceof Array)if(backwards){for(i=a.length;--i>=0&&!doit(););ret.reverse(),top.reverse()}else for(i=0;i<a.length&&!doit();++i);else for(i in a)if(a.hasOwnProperty(i)&&doit())break;return top.concat(ret)}function AtTop(val){this.v=val}function Splice(val){this.v=val}function Last(val){this.v=val}MAP.at_top=function(val){return new AtTop(val)},MAP.splice=function(val){return new Splice(val)},MAP.last=function(val){return new Last(val)};var skip=MAP.skip={};return MAP}();Dictionary.prototype={set:function(key,val){return this.has(key)||++this._size,this._values["$"+key]=val,this},add:function(key,val){return this.has(key)?this.get(key).push(val):this.set(key,[val]),this},get:function(key){return this._values["$"+key]},del:function(key){return this.has(key)&&(--this._size,delete this._values["$"+key]),this},has:function(key){return"$"+key in this._values},each:function(f){for(var i in this._values)f(this._values[i],i.substr(1))},size:function(){return this._size},map:function(f){var ret=[];for(var i in this._values)ret.push(f(this._values[i],i.substr(1)));return ret}};var AST_Token=DEFNODE("Token","type value line col pos endpos nlb comments_before file",{},null),AST_Node=DEFNODE("Node","start end",{clone:function(){return new this.CTOR(this)},$documentation:"Base class of all AST nodes",$propdoc:{start:"[AST_Token] The first token of this node",end:"[AST_Token] The last token of this node"},_walk:function(visitor){return visitor._visit(this)},walk:function(visitor){return this._walk(visitor)}},null);AST_Node.warn_function=null,AST_Node.warn=function(txt,props){AST_Node.warn_function&&AST_Node.warn_function(string_template(txt,props))};var AST_Statement=DEFNODE("Statement",null,{$documentation:"Base class of all statements"}),AST_Debugger=DEFNODE("Debugger",null,{$documentation:"Represents a debugger statement"},AST_Statement),AST_Directive=DEFNODE("Directive","value scope",{$documentation:'Represents a directive, like "use strict";',$propdoc:{value:"[string] The value of this directive as a plain string (it's not an AST_String!)",scope:"[AST_Scope/S] The scope that this directive affects"}},AST_Statement),AST_SimpleStatement=DEFNODE("SimpleStatement","body",{$documentation:"A statement consisting of an expression, i.e. a = 1 + 2",$propdoc:{body:"[AST_Node] an expression node (should not be instanceof AST_Statement)"},_walk:function(visitor){return visitor._visit(this,function(){this.body._walk(visitor)})}},AST_Statement),AST_Block=DEFNODE("Block","body",{$documentation:"A body of statements (usually bracketed)",$propdoc:{body:"[AST_Statement*] an array of statements"},_walk:function(visitor){return visitor._visit(this,function(){walk_body(this,visitor)})}},AST_Statement),AST_BlockStatement=DEFNODE("BlockStatement",null,{$documentation:"A block statement"},AST_Block),AST_EmptyStatement=DEFNODE("EmptyStatement",null,{$documentation:"The empty statement (empty block or simply a semicolon)",_walk:function(visitor){return visitor._visit(this)}},AST_Statement),AST_StatementWithBody=DEFNODE("StatementWithBody","body",{$documentation:"Base class for all statements that contain one nested body: `For`, `ForIn`, `Do`, `While`, `With`",$propdoc:{body:"[AST_Statement] the body; this should always be present, even if it's an AST_EmptyStatement"},_walk:function(visitor){return visitor._visit(this,function(){this.body._walk(visitor)})}},AST_Statement),AST_LabeledStatement=DEFNODE("LabeledStatement","label",{$documentation:"Statement with a label",$propdoc:{label:"[AST_Label] a label definition"},_walk:function(visitor){return visitor._visit(this,function(){this.label._walk(visitor),this.body._walk(visitor)})}},AST_StatementWithBody),AST_DWLoop=DEFNODE("DWLoop","condition",{$documentation:"Base class for do/while statements",$propdoc:{condition:"[AST_Node] the loop condition.  Should not be instanceof AST_Statement"},_walk:function(visitor){return visitor._visit(this,function(){this.condition._walk(visitor),this.body._walk(visitor)})}},AST_StatementWithBody),AST_Do=DEFNODE("Do",null,{$documentation:"A `do` statement"},AST_DWLoop),AST_While=DEFNODE("While",null,{$documentation:"A `while` statement"},AST_DWLoop),AST_For=DEFNODE("For","init condition step",{$documentation:"A `for` statement",$propdoc:{init:"[AST_Node?] the `for` initialization code, or null if empty",condition:"[AST_Node?] the `for` termination clause, or null if empty",step:"[AST_Node?] the `for` update clause, or null if empty"},_walk:function(visitor){return visitor._visit(this,function(){this.init&&this.init._walk(visitor),this.condition&&this.condition._walk(visitor),this.step&&this.step._walk(visitor),this.body._walk(visitor)
})}},AST_StatementWithBody),AST_ForIn=DEFNODE("ForIn","init name object",{$documentation:"A `for ... in` statement",$propdoc:{init:"[AST_Node] the `for/in` initialization code",name:"[AST_SymbolRef?] the loop variable, only if `init` is AST_Var",object:"[AST_Node] the object that we're looping through"},_walk:function(visitor){return visitor._visit(this,function(){this.init._walk(visitor),this.object._walk(visitor),this.body._walk(visitor)})}},AST_StatementWithBody),AST_With=DEFNODE("With","expression",{$documentation:"A `with` statement",$propdoc:{expression:"[AST_Node] the `with` expression"},_walk:function(visitor){return visitor._visit(this,function(){this.expression._walk(visitor),this.body._walk(visitor)})}},AST_StatementWithBody),AST_Scope=DEFNODE("Scope","directives variables functions uses_with uses_eval parent_scope enclosed cname",{$documentation:"Base class for all statements introducing a lexical scope",$propdoc:{directives:"[string*/S] an array of directives declared in this scope",variables:"[Object/S] a map of name -> SymbolDef for all variables/functions defined in this scope",functions:"[Object/S] like `variables`, but only lists function declarations",uses_with:"[boolean/S] tells whether this scope uses the `with` statement",uses_eval:"[boolean/S] tells whether this scope contains a direct call to the global `eval`",parent_scope:"[AST_Scope?/S] link to the parent scope",enclosed:"[SymbolDef*/S] a list of all symbol definitions that are accessed from this scope or any subscopes",cname:"[integer/S] current index for mangling variables (used internally by the mangler)"}},AST_Block),AST_Toplevel=DEFNODE("Toplevel","globals",{$documentation:"The toplevel scope",$propdoc:{globals:"[Object/S] a map of name -> SymbolDef for all undeclared names"},wrap_enclose:function(arg_parameter_pairs){var self=this,args=[],parameters=[];arg_parameter_pairs.forEach(function(pair){var split=pair.split(":");args.push(split[0]),parameters.push(split[1])});var wrapped_tl="(function("+parameters.join(",")+"){ '$ORIG'; })("+args.join(",")+")";return wrapped_tl=parse(wrapped_tl),wrapped_tl=wrapped_tl.transform(new TreeTransformer(function(node){return node instanceof AST_Directive&&"$ORIG"==node.value?MAP.splice(self.body):void 0}))},wrap_commonjs:function(name,export_all){var self=this,to_export=[];export_all&&(self.figure_out_scope(),self.walk(new TreeWalker(function(node){node instanceof AST_SymbolDeclaration&&node.definition().global&&(find_if(function(n){return n.name==node.name},to_export)||to_export.push(node))})));var wrapped_tl="(function(exports, global){ global['"+name+"'] = exports; '$ORIG'; '$EXPORTS'; }({}, (function(){return this}())))";return wrapped_tl=parse(wrapped_tl),wrapped_tl=wrapped_tl.transform(new TreeTransformer(function(node){if(node instanceof AST_SimpleStatement&&(node=node.body,node instanceof AST_String))switch(node.getValue()){case"$ORIG":return MAP.splice(self.body);case"$EXPORTS":var body=[];return to_export.forEach(function(sym){body.push(new AST_SimpleStatement({body:new AST_Assign({left:new AST_Sub({expression:new AST_SymbolRef({name:"exports"}),property:new AST_String({value:sym.name})}),operator:"=",right:new AST_SymbolRef(sym)})}))}),MAP.splice(body)}}))}},AST_Scope),AST_Lambda=DEFNODE("Lambda","name argnames uses_arguments",{$documentation:"Base class for functions",$propdoc:{name:"[AST_SymbolDeclaration?] the name of this function",argnames:"[AST_SymbolFunarg*] array of function arguments",uses_arguments:"[boolean/S] tells whether this function accesses the arguments array"},_walk:function(visitor){return visitor._visit(this,function(){this.name&&this.name._walk(visitor),this.argnames.forEach(function(arg){arg._walk(visitor)}),walk_body(this,visitor)})}},AST_Scope),AST_Accessor=DEFNODE("Accessor",null,{$documentation:"A setter/getter function"},AST_Lambda),AST_Function=DEFNODE("Function",null,{$documentation:"A function expression"},AST_Lambda),AST_Defun=DEFNODE("Defun",null,{$documentation:"A function definition"},AST_Lambda),AST_Jump=DEFNODE("Jump",null,{$documentation:"Base class for “jumps” (for now that's `return`, `throw`, `break` and `continue`)"},AST_Statement),AST_Exit=DEFNODE("Exit","value",{$documentation:"Base class for “exits” (`return` and `throw`)",$propdoc:{value:"[AST_Node?] the value returned or thrown by this statement; could be null for AST_Return"},_walk:function(visitor){return visitor._visit(this,this.value&&function(){this.value._walk(visitor)})}},AST_Jump),AST_Return=DEFNODE("Return",null,{$documentation:"A `return` statement"},AST_Exit),AST_Throw=DEFNODE("Throw",null,{$documentation:"A `throw` statement"},AST_Exit),AST_LoopControl=DEFNODE("LoopControl","label",{$documentation:"Base class for loop control statements (`break` and `continue`)",$propdoc:{label:"[AST_LabelRef?] the label, or null if none"},_walk:function(visitor){return visitor._visit(this,this.label&&function(){this.label._walk(visitor)})}},AST_Jump),AST_Break=DEFNODE("Break",null,{$documentation:"A `break` statement"},AST_LoopControl),AST_Continue=DEFNODE("Continue",null,{$documentation:"A `continue` statement"},AST_LoopControl),AST_If=DEFNODE("If","condition alternative",{$documentation:"A `if` statement",$propdoc:{condition:"[AST_Node] the `if` condition",alternative:"[AST_Statement?] the `else` part, or null if not present"},_walk:function(visitor){return visitor._visit(this,function(){this.condition._walk(visitor),this.body._walk(visitor),this.alternative&&this.alternative._walk(visitor)})}},AST_StatementWithBody),AST_Switch=DEFNODE("Switch","expression",{$documentation:"A `switch` statement",$propdoc:{expression:"[AST_Node] the `switch` “discriminant”"},_walk:function(visitor){return visitor._visit(this,function(){this.expression._walk(visitor),walk_body(this,visitor)})}},AST_Block),AST_SwitchBranch=DEFNODE("SwitchBranch",null,{$documentation:"Base class for `switch` branches"},AST_Block),AST_Default=DEFNODE("Default",null,{$documentation:"A `default` switch branch"},AST_SwitchBranch),AST_Case=DEFNODE("Case","expression",{$documentation:"A `case` switch branch",$propdoc:{expression:"[AST_Node] the `case` expression"},_walk:function(visitor){return visitor._visit(this,function(){this.expression._walk(visitor),walk_body(this,visitor)})}},AST_SwitchBranch),AST_Try=DEFNODE("Try","bcatch bfinally",{$documentation:"A `try` statement",$propdoc:{bcatch:"[AST_Catch?] the catch block, or null if not present",bfinally:"[AST_Finally?] the finally block, or null if not present"},_walk:function(visitor){return visitor._visit(this,function(){walk_body(this,visitor),this.bcatch&&this.bcatch._walk(visitor),this.bfinally&&this.bfinally._walk(visitor)})}},AST_Block),AST_Catch=DEFNODE("Catch","argname",{$documentation:"A `catch` node; only makes sense as part of a `try` statement",$propdoc:{argname:"[AST_SymbolCatch] symbol for the exception"},_walk:function(visitor){return visitor._visit(this,function(){this.argname._walk(visitor),walk_body(this,visitor)})}},AST_Block),AST_Finally=DEFNODE("Finally",null,{$documentation:"A `finally` node; only makes sense as part of a `try` statement"},AST_Block),AST_Definitions=DEFNODE("Definitions","definitions",{$documentation:"Base class for `var` or `const` nodes (variable declarations/initializations)",$propdoc:{definitions:"[AST_VarDef*] array of variable definitions"},_walk:function(visitor){return visitor._visit(this,function(){this.definitions.forEach(function(def){def._walk(visitor)})})}},AST_Statement),AST_Var=DEFNODE("Var",null,{$documentation:"A `var` statement"},AST_Definitions),AST_Const=DEFNODE("Const",null,{$documentation:"A `const` statement"},AST_Definitions),AST_VarDef=DEFNODE("VarDef","name value",{$documentation:"A variable declaration; only appears in a AST_Definitions node",$propdoc:{name:"[AST_SymbolVar|AST_SymbolConst] name of the variable",value:"[AST_Node?] initializer, or null of there's no initializer"},_walk:function(visitor){return visitor._visit(this,function(){this.name._walk(visitor),this.value&&this.value._walk(visitor)})}}),AST_Call=DEFNODE("Call","expression args",{$documentation:"A function call expression",$propdoc:{expression:"[AST_Node] expression to invoke as function",args:"[AST_Node*] array of arguments"},_walk:function(visitor){return visitor._visit(this,function(){this.expression._walk(visitor),this.args.forEach(function(arg){arg._walk(visitor)})})}}),AST_New=DEFNODE("New",null,{$documentation:"An object instantiation.  Derives from a function call since it has exactly the same properties"},AST_Call),AST_Seq=DEFNODE("Seq","car cdr",{$documentation:"A sequence expression (two comma-separated expressions)",$propdoc:{car:"[AST_Node] first element in sequence",cdr:"[AST_Node] second element in sequence"},$cons:function(x,y){var seq=new AST_Seq(x);return seq.car=x,seq.cdr=y,seq},$from_array:function(array){if(0==array.length)return null;if(1==array.length)return array[0].clone();for(var list=null,i=array.length;--i>=0;)list=AST_Seq.cons(array[i],list);for(var p=list;p;){if(p.cdr&&!p.cdr.cdr){p.cdr=p.cdr.car;break}p=p.cdr}return list},to_array:function(){for(var p=this,a=[];p;){if(a.push(p.car),p.cdr&&!(p.cdr instanceof AST_Seq)){a.push(p.cdr);break}p=p.cdr}return a},add:function(node){for(var p=this;p;){if(!(p.cdr instanceof AST_Seq)){var cell=AST_Seq.cons(p.cdr,node);return p.cdr=cell}p=p.cdr}},_walk:function(visitor){return visitor._visit(this,function(){this.car._walk(visitor),this.cdr&&this.cdr._walk(visitor)})}}),AST_PropAccess=DEFNODE("PropAccess","expression property",{$documentation:'Base class for property access expressions, i.e. `a.foo` or `a["foo"]`',$propdoc:{expression:"[AST_Node] the “container” expression",property:"[AST_Node|string] the property to access.  For AST_Dot this is always a plain string, while for AST_Sub it's an arbitrary AST_Node"}}),AST_Dot=DEFNODE("Dot",null,{$documentation:"A dotted property access expression",_walk:function(visitor){return visitor._visit(this,function(){this.expression._walk(visitor)})}},AST_PropAccess),AST_Sub=DEFNODE("Sub",null,{$documentation:'Index-style property access, i.e. `a["foo"]`',_walk:function(visitor){return visitor._visit(this,function(){this.expression._walk(visitor),this.property._walk(visitor)})}},AST_PropAccess),AST_Unary=DEFNODE("Unary","operator expression",{$documentation:"Base class for unary expressions",$propdoc:{operator:"[string] the operator",expression:"[AST_Node] expression that this unary operator applies to"},_walk:function(visitor){return visitor._visit(this,function(){this.expression._walk(visitor)})}}),AST_UnaryPrefix=DEFNODE("UnaryPrefix",null,{$documentation:"Unary prefix expression, i.e. `typeof i` or `++i`"},AST_Unary),AST_UnaryPostfix=DEFNODE("UnaryPostfix",null,{$documentation:"Unary postfix expression, i.e. `i++`"},AST_Unary),AST_Binary=DEFNODE("Binary","left operator right",{$documentation:"Binary expression, i.e. `a + b`",$propdoc:{left:"[AST_Node] left-hand side expression",operator:"[string] the operator",right:"[AST_Node] right-hand side expression"},_walk:function(visitor){return visitor._visit(this,function(){this.left._walk(visitor),this.right._walk(visitor)})}}),AST_Conditional=DEFNODE("Conditional","condition consequent alternative",{$documentation:"Conditional expression using the ternary operator, i.e. `a ? b : c`",$propdoc:{condition:"[AST_Node]",consequent:"[AST_Node]",alternative:"[AST_Node]"},_walk:function(visitor){return visitor._visit(this,function(){this.condition._walk(visitor),this.consequent._walk(visitor),this.alternative._walk(visitor)})}}),AST_Assign=DEFNODE("Assign",null,{$documentation:"An assignment expression — `a = b + 5`"},AST_Binary),AST_Array=DEFNODE("Array","elements",{$documentation:"An array literal",$propdoc:{elements:"[AST_Node*] array of elements"},_walk:function(visitor){return visitor._visit(this,function(){this.elements.forEach(function(el){el._walk(visitor)})})}}),AST_Object=DEFNODE("Object","properties",{$documentation:"An object literal",$propdoc:{properties:"[AST_ObjectProperty*] array of properties"},_walk:function(visitor){return visitor._visit(this,function(){this.properties.forEach(function(prop){prop._walk(visitor)})})}}),AST_ObjectProperty=DEFNODE("ObjectProperty","key value",{$documentation:"Base class for literal object properties",$propdoc:{key:"[string] the property name; it's always a plain string in our AST, no matter if it was a string, number or identifier in original code",value:"[AST_Node] property value.  For setters and getters this is an AST_Function."},_walk:function(visitor){return visitor._visit(this,function(){this.value._walk(visitor)})}}),AST_ObjectKeyVal=DEFNODE("ObjectKeyVal",null,{$documentation:"A key: value object property"},AST_ObjectProperty),AST_ObjectSetter=DEFNODE("ObjectSetter",null,{$documentation:"An object setter property"},AST_ObjectProperty),AST_ObjectGetter=DEFNODE("ObjectGetter",null,{$documentation:"An object getter property"},AST_ObjectProperty),AST_Symbol=DEFNODE("Symbol","scope name thedef",{$propdoc:{name:"[string] name of this symbol",scope:"[AST_Scope/S] the current scope (not necessarily the definition scope)",thedef:"[SymbolDef/S] the definition of this symbol"},$documentation:"Base class for all symbols"}),AST_SymbolAccessor=DEFNODE("SymbolAccessor",null,{$documentation:"The name of a property accessor (setter/getter function)"},AST_Symbol),AST_SymbolDeclaration=DEFNODE("SymbolDeclaration","init",{$documentation:"A declaration symbol (symbol in var/const, function name or argument, symbol in catch)",$propdoc:{init:"[AST_Node*/S] array of initializers for this declaration."}},AST_Symbol),AST_SymbolVar=DEFNODE("SymbolVar",null,{$documentation:"Symbol defining a variable"},AST_SymbolDeclaration),AST_SymbolConst=DEFNODE("SymbolConst",null,{$documentation:"A constant declaration"},AST_SymbolDeclaration),AST_SymbolFunarg=DEFNODE("SymbolFunarg",null,{$documentation:"Symbol naming a function argument"},AST_SymbolVar),AST_SymbolDefun=DEFNODE("SymbolDefun",null,{$documentation:"Symbol defining a function"},AST_SymbolDeclaration),AST_SymbolLambda=DEFNODE("SymbolLambda",null,{$documentation:"Symbol naming a function expression"},AST_SymbolDeclaration),AST_SymbolCatch=DEFNODE("SymbolCatch",null,{$documentation:"Symbol naming the exception in catch"},AST_SymbolDeclaration),AST_Label=DEFNODE("Label","references",{$documentation:"Symbol naming a label (declaration)",$propdoc:{references:"[AST_LabelRef*] a list of nodes referring to this label"}},AST_Symbol),AST_SymbolRef=DEFNODE("SymbolRef",null,{$documentation:"Reference to some symbol (not definition/declaration)"},AST_Symbol),AST_LabelRef=DEFNODE("LabelRef",null,{$documentation:"Reference to a label symbol"},AST_Symbol),AST_This=DEFNODE("This",null,{$documentation:"The `this` symbol"},AST_Symbol),AST_Constant=DEFNODE("Constant",null,{$documentation:"Base class for all constants",getValue:function(){return this.value}}),AST_String=DEFNODE("String","value",{$documentation:"A string literal",$propdoc:{value:"[string] the contents of this string"}},AST_Constant),AST_Number=DEFNODE("Number","value",{$documentation:"A number literal",$propdoc:{value:"[number] the numeric value"}},AST_Constant),AST_RegExp=DEFNODE("RegExp","value",{$documentation:"A regexp literal",$propdoc:{value:"[RegExp] the actual regexp"}},AST_Constant),AST_Atom=DEFNODE("Atom",null,{$documentation:"Base class for atoms"},AST_Constant),AST_Null=DEFNODE("Null",null,{$documentation:"The `null` atom",value:null},AST_Atom),AST_NaN=DEFNODE("NaN",null,{$documentation:"The impossible value",value:0/0},AST_Atom),AST_Undefined=DEFNODE("Undefined",null,{$documentation:"The `undefined` value",value:void 0},AST_Atom),AST_Hole=DEFNODE("Hole",null,{$documentation:"A hole in an array",value:void 0},AST_Atom),AST_Infinity=DEFNODE("Infinity",null,{$documentation:"The `Infinity` value",value:1/0},AST_Atom),AST_Boolean=DEFNODE("Boolean",null,{$documentation:"Base class for booleans"},AST_Atom),AST_False=DEFNODE("False",null,{$documentation:"The `false` atom",value:!1},AST_Boolean),AST_True=DEFNODE("True",null,{$documentation:"The `true` atom",value:!0},AST_Boolean);TreeWalker.prototype={_visit:function(node,descend){this.stack.push(node);var ret=this.visit(node,descend?function(){descend.call(node)}:noop);return!ret&&descend&&descend.call(node),this.stack.pop(),ret},parent:function(n){return this.stack[this.stack.length-2-(n||0)]},push:function(node){this.stack.push(node)},pop:function(){return this.stack.pop()},self:function(){return this.stack[this.stack.length-1]},find_parent:function(type){for(var stack=this.stack,i=stack.length;--i>=0;){var x=stack[i];if(x instanceof type)return x}},has_directive:function(type){return this.find_parent(AST_Scope).has_directive(type)},in_boolean_context:function(){for(var stack=this.stack,i=stack.length,self=stack[--i];i>0;){var p=stack[--i];if(p instanceof AST_If&&p.condition===self||p instanceof AST_Conditional&&p.condition===self||p instanceof AST_DWLoop&&p.condition===self||p instanceof AST_For&&p.condition===self||p instanceof AST_UnaryPrefix&&"!"==p.operator&&p.expression===self)return!0;if(!(p instanceof AST_Binary)||"&&"!=p.operator&&"||"!=p.operator)return!1;self=p}},loopcontrol_target:function(label){var stack=this.stack;if(label)for(var i=stack.length;--i>=0;){var x=stack[i];if(x instanceof AST_LabeledStatement&&x.label.name==label.name)return x.body}else for(var i=stack.length;--i>=0;){var x=stack[i];if(x instanceof AST_Switch||x instanceof AST_For||x instanceof AST_ForIn||x instanceof AST_DWLoop)return x}}};var KEYWORDS="break case catch const continue debugger default delete do else finally for function if in instanceof new return switch throw try typeof var void while with",KEYWORDS_ATOM="false null true",RESERVED_WORDS="abstract boolean byte char class double enum export extends final float goto implements import int interface long native package private protected public short static super synchronized this throws transient volatile "+KEYWORDS_ATOM+" "+KEYWORDS,KEYWORDS_BEFORE_EXPRESSION="return new delete throw else case";KEYWORDS=makePredicate(KEYWORDS),RESERVED_WORDS=makePredicate(RESERVED_WORDS),KEYWORDS_BEFORE_EXPRESSION=makePredicate(KEYWORDS_BEFORE_EXPRESSION),KEYWORDS_ATOM=makePredicate(KEYWORDS_ATOM);var OPERATOR_CHARS=makePredicate(characters("+-*&%=<>!?|~^")),RE_HEX_NUMBER=/^0x[0-9a-f]+$/i,RE_OCT_NUMBER=/^0[0-7]+$/,RE_DEC_NUMBER=/^\d*\.?\d*(?:e[+-]?\d*(?:\d\.?|\.?\d)\d*)?$/i,OPERATORS=makePredicate(["in","instanceof","typeof","new","void","delete","++","--","+","-","!","~","&","|","^","*","/","%",">>","<<",">>>","<",">","<=",">=","==","===","!=","!==","?","=","+=","-=","/=","*=","%=",">>=","<<=",">>>=","|=","^=","&=","&&","||"]),WHITESPACE_CHARS=makePredicate(characters("  \n\r	\f​᠎             　")),PUNC_BEFORE_EXPRESSION=makePredicate(characters("[{(,.;:")),PUNC_CHARS=makePredicate(characters("[]{}(),;:")),REGEXP_MODIFIERS=makePredicate(characters("gmsiy")),UNICODE={letter:new RegExp("[\\u0041-\\u005A\\u0061-\\u007A\\u00AA\\u00B5\\u00BA\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02C1\\u02C6-\\u02D1\\u02E0-\\u02E4\\u02EC\\u02EE\\u0370-\\u0374\\u0376\\u0377\\u037A-\\u037D\\u0386\\u0388-\\u038A\\u038C\\u038E-\\u03A1\\u03A3-\\u03F5\\u03F7-\\u0481\\u048A-\\u0523\\u0531-\\u0556\\u0559\\u0561-\\u0587\\u05D0-\\u05EA\\u05F0-\\u05F2\\u0621-\\u064A\\u066E\\u066F\\u0671-\\u06D3\\u06D5\\u06E5\\u06E6\\u06EE\\u06EF\\u06FA-\\u06FC\\u06FF\\u0710\\u0712-\\u072F\\u074D-\\u07A5\\u07B1\\u07CA-\\u07EA\\u07F4\\u07F5\\u07FA\\u0904-\\u0939\\u093D\\u0950\\u0958-\\u0961\\u0971\\u0972\\u097B-\\u097F\\u0985-\\u098C\\u098F\\u0990\\u0993-\\u09A8\\u09AA-\\u09B0\\u09B2\\u09B6-\\u09B9\\u09BD\\u09CE\\u09DC\\u09DD\\u09DF-\\u09E1\\u09F0\\u09F1\\u0A05-\\u0A0A\\u0A0F\\u0A10\\u0A13-\\u0A28\\u0A2A-\\u0A30\\u0A32\\u0A33\\u0A35\\u0A36\\u0A38\\u0A39\\u0A59-\\u0A5C\\u0A5E\\u0A72-\\u0A74\\u0A85-\\u0A8D\\u0A8F-\\u0A91\\u0A93-\\u0AA8\\u0AAA-\\u0AB0\\u0AB2\\u0AB3\\u0AB5-\\u0AB9\\u0ABD\\u0AD0\\u0AE0\\u0AE1\\u0B05-\\u0B0C\\u0B0F\\u0B10\\u0B13-\\u0B28\\u0B2A-\\u0B30\\u0B32\\u0B33\\u0B35-\\u0B39\\u0B3D\\u0B5C\\u0B5D\\u0B5F-\\u0B61\\u0B71\\u0B83\\u0B85-\\u0B8A\\u0B8E-\\u0B90\\u0B92-\\u0B95\\u0B99\\u0B9A\\u0B9C\\u0B9E\\u0B9F\\u0BA3\\u0BA4\\u0BA8-\\u0BAA\\u0BAE-\\u0BB9\\u0BD0\\u0C05-\\u0C0C\\u0C0E-\\u0C10\\u0C12-\\u0C28\\u0C2A-\\u0C33\\u0C35-\\u0C39\\u0C3D\\u0C58\\u0C59\\u0C60\\u0C61\\u0C85-\\u0C8C\\u0C8E-\\u0C90\\u0C92-\\u0CA8\\u0CAA-\\u0CB3\\u0CB5-\\u0CB9\\u0CBD\\u0CDE\\u0CE0\\u0CE1\\u0D05-\\u0D0C\\u0D0E-\\u0D10\\u0D12-\\u0D28\\u0D2A-\\u0D39\\u0D3D\\u0D60\\u0D61\\u0D7A-\\u0D7F\\u0D85-\\u0D96\\u0D9A-\\u0DB1\\u0DB3-\\u0DBB\\u0DBD\\u0DC0-\\u0DC6\\u0E01-\\u0E30\\u0E32\\u0E33\\u0E40-\\u0E46\\u0E81\\u0E82\\u0E84\\u0E87\\u0E88\\u0E8A\\u0E8D\\u0E94-\\u0E97\\u0E99-\\u0E9F\\u0EA1-\\u0EA3\\u0EA5\\u0EA7\\u0EAA\\u0EAB\\u0EAD-\\u0EB0\\u0EB2\\u0EB3\\u0EBD\\u0EC0-\\u0EC4\\u0EC6\\u0EDC\\u0EDD\\u0F00\\u0F40-\\u0F47\\u0F49-\\u0F6C\\u0F88-\\u0F8B\\u1000-\\u102A\\u103F\\u1050-\\u1055\\u105A-\\u105D\\u1061\\u1065\\u1066\\u106E-\\u1070\\u1075-\\u1081\\u108E\\u10A0-\\u10C5\\u10D0-\\u10FA\\u10FC\\u1100-\\u1159\\u115F-\\u11A2\\u11A8-\\u11F9\\u1200-\\u1248\\u124A-\\u124D\\u1250-\\u1256\\u1258\\u125A-\\u125D\\u1260-\\u1288\\u128A-\\u128D\\u1290-\\u12B0\\u12B2-\\u12B5\\u12B8-\\u12BE\\u12C0\\u12C2-\\u12C5\\u12C8-\\u12D6\\u12D8-\\u1310\\u1312-\\u1315\\u1318-\\u135A\\u1380-\\u138F\\u13A0-\\u13F4\\u1401-\\u166C\\u166F-\\u1676\\u1681-\\u169A\\u16A0-\\u16EA\\u1700-\\u170C\\u170E-\\u1711\\u1720-\\u1731\\u1740-\\u1751\\u1760-\\u176C\\u176E-\\u1770\\u1780-\\u17B3\\u17D7\\u17DC\\u1820-\\u1877\\u1880-\\u18A8\\u18AA\\u1900-\\u191C\\u1950-\\u196D\\u1970-\\u1974\\u1980-\\u19A9\\u19C1-\\u19C7\\u1A00-\\u1A16\\u1B05-\\u1B33\\u1B45-\\u1B4B\\u1B83-\\u1BA0\\u1BAE\\u1BAF\\u1C00-\\u1C23\\u1C4D-\\u1C4F\\u1C5A-\\u1C7D\\u1D00-\\u1DBF\\u1E00-\\u1F15\\u1F18-\\u1F1D\\u1F20-\\u1F45\\u1F48-\\u1F4D\\u1F50-\\u1F57\\u1F59\\u1F5B\\u1F5D\\u1F5F-\\u1F7D\\u1F80-\\u1FB4\\u1FB6-\\u1FBC\\u1FBE\\u1FC2-\\u1FC4\\u1FC6-\\u1FCC\\u1FD0-\\u1FD3\\u1FD6-\\u1FDB\\u1FE0-\\u1FEC\\u1FF2-\\u1FF4\\u1FF6-\\u1FFC\\u2071\\u207F\\u2090-\\u2094\\u2102\\u2107\\u210A-\\u2113\\u2115\\u2119-\\u211D\\u2124\\u2126\\u2128\\u212A-\\u212D\\u212F-\\u2139\\u213C-\\u213F\\u2145-\\u2149\\u214E\\u2183\\u2184\\u2C00-\\u2C2E\\u2C30-\\u2C5E\\u2C60-\\u2C6F\\u2C71-\\u2C7D\\u2C80-\\u2CE4\\u2D00-\\u2D25\\u2D30-\\u2D65\\u2D6F\\u2D80-\\u2D96\\u2DA0-\\u2DA6\\u2DA8-\\u2DAE\\u2DB0-\\u2DB6\\u2DB8-\\u2DBE\\u2DC0-\\u2DC6\\u2DC8-\\u2DCE\\u2DD0-\\u2DD6\\u2DD8-\\u2DDE\\u2E2F\\u3005\\u3006\\u3031-\\u3035\\u303B\\u303C\\u3041-\\u3096\\u309D-\\u309F\\u30A1-\\u30FA\\u30FC-\\u30FF\\u3105-\\u312D\\u3131-\\u318E\\u31A0-\\u31B7\\u31F0-\\u31FF\\u3400\\u4DB5\\u4E00\\u9FC3\\uA000-\\uA48C\\uA500-\\uA60C\\uA610-\\uA61F\\uA62A\\uA62B\\uA640-\\uA65F\\uA662-\\uA66E\\uA67F-\\uA697\\uA717-\\uA71F\\uA722-\\uA788\\uA78B\\uA78C\\uA7FB-\\uA801\\uA803-\\uA805\\uA807-\\uA80A\\uA80C-\\uA822\\uA840-\\uA873\\uA882-\\uA8B3\\uA90A-\\uA925\\uA930-\\uA946\\uAA00-\\uAA28\\uAA40-\\uAA42\\uAA44-\\uAA4B\\uAC00\\uD7A3\\uF900-\\uFA2D\\uFA30-\\uFA6A\\uFA70-\\uFAD9\\uFB00-\\uFB06\\uFB13-\\uFB17\\uFB1D\\uFB1F-\\uFB28\\uFB2A-\\uFB36\\uFB38-\\uFB3C\\uFB3E\\uFB40\\uFB41\\uFB43\\uFB44\\uFB46-\\uFBB1\\uFBD3-\\uFD3D\\uFD50-\\uFD8F\\uFD92-\\uFDC7\\uFDF0-\\uFDFB\\uFE70-\\uFE74\\uFE76-\\uFEFC\\uFF21-\\uFF3A\\uFF41-\\uFF5A\\uFF66-\\uFFBE\\uFFC2-\\uFFC7\\uFFCA-\\uFFCF\\uFFD2-\\uFFD7\\uFFDA-\\uFFDC]"),non_spacing_mark:new RegExp("[\\u0300-\\u036F\\u0483-\\u0487\\u0591-\\u05BD\\u05BF\\u05C1\\u05C2\\u05C4\\u05C5\\u05C7\\u0610-\\u061A\\u064B-\\u065E\\u0670\\u06D6-\\u06DC\\u06DF-\\u06E4\\u06E7\\u06E8\\u06EA-\\u06ED\\u0711\\u0730-\\u074A\\u07A6-\\u07B0\\u07EB-\\u07F3\\u0816-\\u0819\\u081B-\\u0823\\u0825-\\u0827\\u0829-\\u082D\\u0900-\\u0902\\u093C\\u0941-\\u0948\\u094D\\u0951-\\u0955\\u0962\\u0963\\u0981\\u09BC\\u09C1-\\u09C4\\u09CD\\u09E2\\u09E3\\u0A01\\u0A02\\u0A3C\\u0A41\\u0A42\\u0A47\\u0A48\\u0A4B-\\u0A4D\\u0A51\\u0A70\\u0A71\\u0A75\\u0A81\\u0A82\\u0ABC\\u0AC1-\\u0AC5\\u0AC7\\u0AC8\\u0ACD\\u0AE2\\u0AE3\\u0B01\\u0B3C\\u0B3F\\u0B41-\\u0B44\\u0B4D\\u0B56\\u0B62\\u0B63\\u0B82\\u0BC0\\u0BCD\\u0C3E-\\u0C40\\u0C46-\\u0C48\\u0C4A-\\u0C4D\\u0C55\\u0C56\\u0C62\\u0C63\\u0CBC\\u0CBF\\u0CC6\\u0CCC\\u0CCD\\u0CE2\\u0CE3\\u0D41-\\u0D44\\u0D4D\\u0D62\\u0D63\\u0DCA\\u0DD2-\\u0DD4\\u0DD6\\u0E31\\u0E34-\\u0E3A\\u0E47-\\u0E4E\\u0EB1\\u0EB4-\\u0EB9\\u0EBB\\u0EBC\\u0EC8-\\u0ECD\\u0F18\\u0F19\\u0F35\\u0F37\\u0F39\\u0F71-\\u0F7E\\u0F80-\\u0F84\\u0F86\\u0F87\\u0F90-\\u0F97\\u0F99-\\u0FBC\\u0FC6\\u102D-\\u1030\\u1032-\\u1037\\u1039\\u103A\\u103D\\u103E\\u1058\\u1059\\u105E-\\u1060\\u1071-\\u1074\\u1082\\u1085\\u1086\\u108D\\u109D\\u135F\\u1712-\\u1714\\u1732-\\u1734\\u1752\\u1753\\u1772\\u1773\\u17B7-\\u17BD\\u17C6\\u17C9-\\u17D3\\u17DD\\u180B-\\u180D\\u18A9\\u1920-\\u1922\\u1927\\u1928\\u1932\\u1939-\\u193B\\u1A17\\u1A18\\u1A56\\u1A58-\\u1A5E\\u1A60\\u1A62\\u1A65-\\u1A6C\\u1A73-\\u1A7C\\u1A7F\\u1B00-\\u1B03\\u1B34\\u1B36-\\u1B3A\\u1B3C\\u1B42\\u1B6B-\\u1B73\\u1B80\\u1B81\\u1BA2-\\u1BA5\\u1BA8\\u1BA9\\u1C2C-\\u1C33\\u1C36\\u1C37\\u1CD0-\\u1CD2\\u1CD4-\\u1CE0\\u1CE2-\\u1CE8\\u1CED\\u1DC0-\\u1DE6\\u1DFD-\\u1DFF\\u20D0-\\u20DC\\u20E1\\u20E5-\\u20F0\\u2CEF-\\u2CF1\\u2DE0-\\u2DFF\\u302A-\\u302F\\u3099\\u309A\\uA66F\\uA67C\\uA67D\\uA6F0\\uA6F1\\uA802\\uA806\\uA80B\\uA825\\uA826\\uA8C4\\uA8E0-\\uA8F1\\uA926-\\uA92D\\uA947-\\uA951\\uA980-\\uA982\\uA9B3\\uA9B6-\\uA9B9\\uA9BC\\uAA29-\\uAA2E\\uAA31\\uAA32\\uAA35\\uAA36\\uAA43\\uAA4C\\uAAB0\\uAAB2-\\uAAB4\\uAAB7\\uAAB8\\uAABE\\uAABF\\uAAC1\\uABE5\\uABE8\\uABED\\uFB1E\\uFE00-\\uFE0F\\uFE20-\\uFE26]"),space_combining_mark:new RegExp("[\\u0903\\u093E-\\u0940\\u0949-\\u094C\\u094E\\u0982\\u0983\\u09BE-\\u09C0\\u09C7\\u09C8\\u09CB\\u09CC\\u09D7\\u0A03\\u0A3E-\\u0A40\\u0A83\\u0ABE-\\u0AC0\\u0AC9\\u0ACB\\u0ACC\\u0B02\\u0B03\\u0B3E\\u0B40\\u0B47\\u0B48\\u0B4B\\u0B4C\\u0B57\\u0BBE\\u0BBF\\u0BC1\\u0BC2\\u0BC6-\\u0BC8\\u0BCA-\\u0BCC\\u0BD7\\u0C01-\\u0C03\\u0C41-\\u0C44\\u0C82\\u0C83\\u0CBE\\u0CC0-\\u0CC4\\u0CC7\\u0CC8\\u0CCA\\u0CCB\\u0CD5\\u0CD6\\u0D02\\u0D03\\u0D3E-\\u0D40\\u0D46-\\u0D48\\u0D4A-\\u0D4C\\u0D57\\u0D82\\u0D83\\u0DCF-\\u0DD1\\u0DD8-\\u0DDF\\u0DF2\\u0DF3\\u0F3E\\u0F3F\\u0F7F\\u102B\\u102C\\u1031\\u1038\\u103B\\u103C\\u1056\\u1057\\u1062-\\u1064\\u1067-\\u106D\\u1083\\u1084\\u1087-\\u108C\\u108F\\u109A-\\u109C\\u17B6\\u17BE-\\u17C5\\u17C7\\u17C8\\u1923-\\u1926\\u1929-\\u192B\\u1930\\u1931\\u1933-\\u1938\\u19B0-\\u19C0\\u19C8\\u19C9\\u1A19-\\u1A1B\\u1A55\\u1A57\\u1A61\\u1A63\\u1A64\\u1A6D-\\u1A72\\u1B04\\u1B35\\u1B3B\\u1B3D-\\u1B41\\u1B43\\u1B44\\u1B82\\u1BA1\\u1BA6\\u1BA7\\u1BAA\\u1C24-\\u1C2B\\u1C34\\u1C35\\u1CE1\\u1CF2\\uA823\\uA824\\uA827\\uA880\\uA881\\uA8B4-\\uA8C3\\uA952\\uA953\\uA983\\uA9B4\\uA9B5\\uA9BA\\uA9BB\\uA9BD-\\uA9C0\\uAA2F\\uAA30\\uAA33\\uAA34\\uAA4D\\uAA7B\\uABE3\\uABE4\\uABE6\\uABE7\\uABE9\\uABEA\\uABEC]"),connector_punctuation:new RegExp("[\\u005F\\u203F\\u2040\\u2054\\uFE33\\uFE34\\uFE4D-\\uFE4F\\uFF3F]")};JS_Parse_Error.prototype.toString=function(){return this.message+" (line: "+this.line+", col: "+this.col+", pos: "+this.pos+")\n\n"+this.stack};var EX_EOF={},UNARY_PREFIX=makePredicate(["typeof","void","delete","--","++","!","~","-","+"]),UNARY_POSTFIX=makePredicate(["--","++"]),ASSIGNMENT=makePredicate(["=","+=","-=","/=","*=","%=",">>=","<<=",">>>=","|=","^=","&="]),PRECEDENCE=function(a,ret){for(var i=0,n=1;i<a.length;++i,++n)for(var b=a[i],j=0;j<b.length;++j)ret[b[j]]=n;return ret}([["||"],["&&"],["|"],["^"],["&"],["==","===","!=","!=="],["<",">","<=",">=","in","instanceof"],[">>","<<",">>>"],["+","-"],["*","/","%"]],{}),STATEMENTS_WITH_LABELS=array_to_hash(["for","do","while","switch"]),ATOMIC_START_TOKEN=array_to_hash(["atom","num","string","regexp","name"]);TreeTransformer.prototype=new TreeWalker,function(undefined){function _(node,descend){node.DEFMETHOD("transform",function(tw,in_list){var x,y;return tw.push(this),tw.before&&(x=tw.before(this,descend,in_list)),x===undefined&&(tw.after?(tw.stack[tw.stack.length-1]=x=this.clone(),descend(x,tw),y=tw.after(x,in_list),y!==undefined&&(x=y)):(x=this,descend(x,tw))),tw.pop(),x})}function do_list(list,tw){return MAP(list,function(node){return node.transform(tw,!0)})}_(AST_Node,noop),_(AST_LabeledStatement,function(self,tw){self.label=self.label.transform(tw),self.body=self.body.transform(tw)}),_(AST_SimpleStatement,function(self,tw){self.body=self.body.transform(tw)}),_(AST_Block,function(self,tw){self.body=do_list(self.body,tw)}),_(AST_DWLoop,function(self,tw){self.condition=self.condition.transform(tw),self.body=self.body.transform(tw)}),_(AST_For,function(self,tw){self.init&&(self.init=self.init.transform(tw)),self.condition&&(self.condition=self.condition.transform(tw)),self.step&&(self.step=self.step.transform(tw)),self.body=self.body.transform(tw)}),_(AST_ForIn,function(self,tw){self.init=self.init.transform(tw),self.object=self.object.transform(tw),self.body=self.body.transform(tw)}),_(AST_With,function(self,tw){self.expression=self.expression.transform(tw),self.body=self.body.transform(tw)}),_(AST_Exit,function(self,tw){self.value&&(self.value=self.value.transform(tw))}),_(AST_LoopControl,function(self,tw){self.label&&(self.label=self.label.transform(tw))}),_(AST_If,function(self,tw){self.condition=self.condition.transform(tw),self.body=self.body.transform(tw),self.alternative&&(self.alternative=self.alternative.transform(tw))}),_(AST_Switch,function(self,tw){self.expression=self.expression.transform(tw),self.body=do_list(self.body,tw)}),_(AST_Case,function(self,tw){self.expression=self.expression.transform(tw),self.body=do_list(self.body,tw)}),_(AST_Try,function(self,tw){self.body=do_list(self.body,tw),self.bcatch&&(self.bcatch=self.bcatch.transform(tw)),self.bfinally&&(self.bfinally=self.bfinally.transform(tw))}),_(AST_Catch,function(self,tw){self.argname=self.argname.transform(tw),self.body=do_list(self.body,tw)}),_(AST_Definitions,function(self,tw){self.definitions=do_list(self.definitions,tw)}),_(AST_VarDef,function(self,tw){self.name=self.name.transform(tw),self.value&&(self.value=self.value.transform(tw))}),_(AST_Lambda,function(self,tw){self.name&&(self.name=self.name.transform(tw)),self.argnames=do_list(self.argnames,tw),self.body=do_list(self.body,tw)}),_(AST_Call,function(self,tw){self.expression=self.expression.transform(tw),self.args=do_list(self.args,tw)}),_(AST_Seq,function(self,tw){self.car=self.car.transform(tw),self.cdr=self.cdr.transform(tw)}),_(AST_Dot,function(self,tw){self.expression=self.expression.transform(tw)}),_(AST_Sub,function(self,tw){self.expression=self.expression.transform(tw),self.property=self.property.transform(tw)}),_(AST_Unary,function(self,tw){self.expression=self.expression.transform(tw)}),_(AST_Binary,function(self,tw){self.left=self.left.transform(tw),self.right=self.right.transform(tw)}),_(AST_Conditional,function(self,tw){self.condition=self.condition.transform(tw),self.consequent=self.consequent.transform(tw),self.alternative=self.alternative.transform(tw)}),_(AST_Array,function(self,tw){self.elements=do_list(self.elements,tw)}),_(AST_Object,function(self,tw){self.properties=do_list(self.properties,tw)}),_(AST_ObjectProperty,function(self,tw){self.value=self.value.transform(tw)})}(),SymbolDef.prototype={unmangleable:function(options){return this.global&&!(options&&options.toplevel)||this.undeclared||!(options&&options.eval)&&(this.scope.uses_eval||this.scope.uses_with)},mangle:function(options){if(!this.mangled_name&&!this.unmangleable(options)){var s=this.scope;this.orig[0]instanceof AST_SymbolLambda&&!options.screw_ie8&&(s=s.parent_scope),this.mangled_name=s.next_mangled(options)}}},AST_Toplevel.DEFMETHOD("figure_out_scope",function(){var self=this,scope=self.parent_scope=null,labels=new Dictionary,nesting=0,tw=new TreeWalker(function(node,descend){if(node instanceof AST_Scope){node.init_scope_vars(nesting);var save_scope=node.parent_scope=scope,save_labels=labels;return++nesting,scope=node,labels=new Dictionary,descend(),labels=save_labels,scope=save_scope,--nesting,!0}if(node instanceof AST_Directive)return node.scope=scope,push_uniq(scope.directives,node.value),!0;
if(node instanceof AST_With)for(var s=scope;s;s=s.parent_scope)s.uses_with=!0;else{if(node instanceof AST_LabeledStatement){var l=node.label;if(labels.has(l.name))throw new Error(string_template("Label {name} defined twice",l));return labels.set(l.name,l),descend(),labels.del(l.name),!0}if(node instanceof AST_Symbol&&(node.scope=scope),node instanceof AST_Label&&(node.thedef=node,node.init_scope_vars()),node instanceof AST_SymbolLambda)scope.def_function(node);else if(node instanceof AST_SymbolDefun)(node.scope=scope.parent_scope).def_function(node);else if(node instanceof AST_SymbolVar||node instanceof AST_SymbolConst){var def=scope.def_variable(node);def.constant=node instanceof AST_SymbolConst,def.init=tw.parent().value}else node instanceof AST_SymbolCatch&&scope.def_variable(node);if(node instanceof AST_LabelRef){var sym=labels.get(node.name);if(!sym)throw new Error(string_template("Undefined label {name} [{line},{col}]",{name:node.name,line:node.start.line,col:node.start.col}));node.thedef=sym}}});self.walk(tw);var func=null,globals=self.globals=new Dictionary,tw=new TreeWalker(function(node,descend){if(node instanceof AST_Lambda){var prev_func=func;return func=node,descend(),func=prev_func,!0}if(node instanceof AST_LabelRef)return node.reference(),!0;if(node instanceof AST_SymbolRef){var name=node.name,sym=node.scope.find_variable(name);if(sym)node.thedef=sym;else{var g;if(globals.has(name)?g=globals.get(name):(g=new SymbolDef(self,globals.size(),node),g.undeclared=!0,g.global=!0,globals.set(name,g)),node.thedef=g,"eval"==name&&tw.parent()instanceof AST_Call)for(var s=node.scope;s&&!s.uses_eval;s=s.parent_scope)s.uses_eval=!0;"arguments"==name&&(func.uses_arguments=!0)}return node.reference(),!0}});self.walk(tw)}),AST_Scope.DEFMETHOD("init_scope_vars",function(nesting){this.directives=[],this.variables=new Dictionary,this.functions=new Dictionary,this.uses_with=!1,this.uses_eval=!1,this.parent_scope=null,this.enclosed=[],this.cname=-1,this.nesting=nesting}),AST_Scope.DEFMETHOD("strict",function(){return this.has_directive("use strict")}),AST_Lambda.DEFMETHOD("init_scope_vars",function(){AST_Scope.prototype.init_scope_vars.apply(this,arguments),this.uses_arguments=!1}),AST_SymbolRef.DEFMETHOD("reference",function(){var def=this.definition();def.references.push(this);for(var s=this.scope;s&&(push_uniq(s.enclosed,def),s!==def.scope);)s=s.parent_scope;this.frame=this.scope.nesting-def.scope.nesting}),AST_Label.DEFMETHOD("init_scope_vars",function(){this.references=[]}),AST_LabelRef.DEFMETHOD("reference",function(){this.thedef.references.push(this)}),AST_Scope.DEFMETHOD("find_variable",function(name){return name instanceof AST_Symbol&&(name=name.name),this.variables.get(name)||this.parent_scope&&this.parent_scope.find_variable(name)}),AST_Scope.DEFMETHOD("has_directive",function(value){return this.parent_scope&&this.parent_scope.has_directive(value)||(this.directives.indexOf(value)>=0?this:null)}),AST_Scope.DEFMETHOD("def_function",function(symbol){this.functions.set(symbol.name,this.def_variable(symbol))}),AST_Scope.DEFMETHOD("def_variable",function(symbol){var def;return this.variables.has(symbol.name)?(def=this.variables.get(symbol.name),def.orig.push(symbol)):(def=new SymbolDef(this,this.variables.size(),symbol),this.variables.set(symbol.name,def),def.global=!this.parent_scope),symbol.thedef=def}),AST_Scope.DEFMETHOD("next_mangled",function(options){var ext=this.enclosed;out:for(;;){var m=base54(++this.cname);if(is_identifier(m)){for(var i=ext.length;--i>=0;){var sym=ext[i],name=sym.mangled_name||sym.unmangleable(options)&&sym.name;if(m==name)continue out}return m}}}),AST_Scope.DEFMETHOD("references",function(sym){return sym instanceof AST_Symbol&&(sym=sym.definition()),this.enclosed.indexOf(sym)<0?null:sym}),AST_Symbol.DEFMETHOD("unmangleable",function(options){return this.definition().unmangleable(options)}),AST_SymbolAccessor.DEFMETHOD("unmangleable",function(){return!0}),AST_Label.DEFMETHOD("unmangleable",function(){return!1}),AST_Symbol.DEFMETHOD("unreferenced",function(){return 0==this.definition().references.length&&!(this.scope.uses_eval||this.scope.uses_with)}),AST_Symbol.DEFMETHOD("undeclared",function(){return this.definition().undeclared}),AST_LabelRef.DEFMETHOD("undeclared",function(){return!1}),AST_Label.DEFMETHOD("undeclared",function(){return!1}),AST_Symbol.DEFMETHOD("definition",function(){return this.thedef}),AST_Symbol.DEFMETHOD("global",function(){return this.definition().global}),AST_Toplevel.DEFMETHOD("_default_mangler_options",function(options){return defaults(options,{except:[],eval:!1,sort:!1,toplevel:!1,screw_ie8:!1})}),AST_Toplevel.DEFMETHOD("mangle_names",function(options){options=this._default_mangler_options(options);var lname=-1,to_mangle=[],tw=new TreeWalker(function(node,descend){if(node instanceof AST_LabeledStatement){var save_nesting=lname;return descend(),lname=save_nesting,!0}if(node instanceof AST_Scope){var a=(tw.parent(),[]);return node.variables.each(function(symbol){options.except.indexOf(symbol.name)<0&&a.push(symbol)}),options.sort&&a.sort(function(a,b){return b.references.length-a.references.length}),to_mangle.push.apply(to_mangle,a),void 0}if(node instanceof AST_Label){var name;do name=base54(++lname);while(!is_identifier(name));return node.mangled_name=name,!0}});this.walk(tw),to_mangle.forEach(function(def){def.mangle(options)})}),AST_Toplevel.DEFMETHOD("compute_char_frequency",function(options){options=this._default_mangler_options(options);var tw=new TreeWalker(function(node){node instanceof AST_Constant?base54.consider(node.print_to_string()):node instanceof AST_Return?base54.consider("return"):node instanceof AST_Throw?base54.consider("throw"):node instanceof AST_Continue?base54.consider("continue"):node instanceof AST_Break?base54.consider("break"):node instanceof AST_Debugger?base54.consider("debugger"):node instanceof AST_Directive?base54.consider(node.value):node instanceof AST_While?base54.consider("while"):node instanceof AST_Do?base54.consider("do while"):node instanceof AST_If?(base54.consider("if"),node.alternative&&base54.consider("else")):node instanceof AST_Var?base54.consider("var"):node instanceof AST_Const?base54.consider("const"):node instanceof AST_Lambda?base54.consider("function"):node instanceof AST_For?base54.consider("for"):node instanceof AST_ForIn?base54.consider("for in"):node instanceof AST_Switch?base54.consider("switch"):node instanceof AST_Case?base54.consider("case"):node instanceof AST_Default?base54.consider("default"):node instanceof AST_With?base54.consider("with"):node instanceof AST_ObjectSetter?base54.consider("set"+node.key):node instanceof AST_ObjectGetter?base54.consider("get"+node.key):node instanceof AST_ObjectKeyVal?base54.consider(node.key):node instanceof AST_New?base54.consider("new"):node instanceof AST_This?base54.consider("this"):node instanceof AST_Try?base54.consider("try"):node instanceof AST_Catch?base54.consider("catch"):node instanceof AST_Finally?base54.consider("finally"):node instanceof AST_Symbol&&node.unmangleable(options)?base54.consider(node.name):node instanceof AST_Unary||node instanceof AST_Binary?base54.consider(node.operator):node instanceof AST_Dot&&base54.consider(node.property)});this.walk(tw),base54.sort()});var base54=function(){function reset(){frequency=Object.create(null),chars=string.split("").map(function(ch){return ch.charCodeAt(0)}),chars.forEach(function(ch){frequency[ch]=0})}function base54(num){var ret="",base=54;do ret+=String.fromCharCode(chars[num%base]),num=Math.floor(num/base),base=64;while(num>0);return ret}var chars,frequency,string="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ$_0123456789";return base54.consider=function(str){for(var i=str.length;--i>=0;){var code=str.charCodeAt(i);code in frequency&&++frequency[code]}},base54.sort=function(){chars=mergeSort(chars,function(a,b){return is_digit(a)&&!is_digit(b)?1:is_digit(b)&&!is_digit(a)?-1:frequency[b]-frequency[a]})},base54.reset=reset,reset(),base54.get=function(){return chars},base54.freq=function(){return frequency},base54}();AST_Toplevel.DEFMETHOD("scope_warnings",function(options){options=defaults(options,{undeclared:!1,unreferenced:!0,assign_to_global:!0,func_arguments:!0,nested_defuns:!0,eval:!0});var tw=new TreeWalker(function(node){if(options.undeclared&&node instanceof AST_SymbolRef&&node.undeclared()&&AST_Node.warn("Undeclared symbol: {name} [{file}:{line},{col}]",{name:node.name,file:node.start.file,line:node.start.line,col:node.start.col}),options.assign_to_global){var sym=null;node instanceof AST_Assign&&node.left instanceof AST_SymbolRef?sym=node.left:node instanceof AST_ForIn&&node.init instanceof AST_SymbolRef&&(sym=node.init),sym&&(sym.undeclared()||sym.global()&&sym.scope!==sym.definition().scope)&&AST_Node.warn("{msg}: {name} [{file}:{line},{col}]",{msg:sym.undeclared()?"Accidental global?":"Assignment to global",name:sym.name,file:sym.start.file,line:sym.start.line,col:sym.start.col})}options.eval&&node instanceof AST_SymbolRef&&node.undeclared()&&"eval"==node.name&&AST_Node.warn("Eval is used [{file}:{line},{col}]",node.start),options.unreferenced&&(node instanceof AST_SymbolDeclaration||node instanceof AST_Label)&&node.unreferenced()&&AST_Node.warn("{type} {name} is declared but not referenced [{file}:{line},{col}]",{type:node instanceof AST_Label?"Label":"Symbol",name:node.name,file:node.start.file,line:node.start.line,col:node.start.col}),options.func_arguments&&node instanceof AST_Lambda&&node.uses_arguments&&AST_Node.warn("arguments used in function {name} [{file}:{line},{col}]",{name:node.name?node.name.name:"anonymous",file:node.start.file,line:node.start.line,col:node.start.col}),options.nested_defuns&&node instanceof AST_Defun&&!(tw.parent()instanceof AST_Scope)&&AST_Node.warn('Function {name} declared in nested statement "{type}" [{file}:{line},{col}]',{name:node.name.name,type:tw.parent().TYPE,file:node.start.file,line:node.start.line,col:node.start.col})});this.walk(tw)}),function(){function DEFPRINT(nodetype,generator){nodetype.DEFMETHOD("_codegen",generator)}function PARENS(nodetype,func){nodetype.DEFMETHOD("needs_parens",func)}function assign_and_conditional_paren_rules(output){var p=output.parent();return p instanceof AST_Unary?!0:p instanceof AST_Binary&&!(p instanceof AST_Assign)?!0:p instanceof AST_Call&&p.expression===this?!0:p instanceof AST_Conditional&&p.condition===this?!0:p instanceof AST_PropAccess&&p.expression===this?!0:void 0}function display_body(body,is_toplevel,output){var last=body.length-1;body.forEach(function(stmt,i){stmt instanceof AST_EmptyStatement||(output.indent(),stmt.print(output),i==last&&is_toplevel||(output.newline(),is_toplevel&&output.newline()))})}function print_bracketed(body,output){body.length>0?output.with_block(function(){display_body(body,!1,output)}):output.print("{}")}function make_then(self,output){if(output.option("bracketize"))return make_block(self.body,output),void 0;if(!self.body)return output.force_semicolon();if(self.body instanceof AST_Do&&!output.option("screw_ie8"))return make_block(self.body,output),void 0;for(var b=self.body;;)if(b instanceof AST_If){if(!b.alternative)return make_block(self.body,output),void 0;b=b.alternative}else{if(!(b instanceof AST_StatementWithBody))break;b=b.body}force_statement(self.body,output)}function parenthesize_for_noin(node,output,noin){if(noin)try{node.walk(new TreeWalker(function(node){if(node instanceof AST_Binary&&"in"==node.operator)throw output})),node.print(output)}catch(ex){if(ex!==output)throw ex;node.print(output,!0)}else node.print(output)}function force_statement(stat,output){output.option("bracketize")?!stat||stat instanceof AST_EmptyStatement?output.print("{}"):stat instanceof AST_BlockStatement?stat.print(output):output.with_block(function(){output.indent(),stat.print(output),output.newline()}):!stat||stat instanceof AST_EmptyStatement?output.force_semicolon():stat.print(output)}function first_in_statement(output){for(var a=output.stack(),i=a.length,node=a[--i],p=a[--i];i>0;){if(p instanceof AST_Statement&&p.body===node)return!0;if(!(p instanceof AST_Seq&&p.car===node||p instanceof AST_Call&&p.expression===node&&!(p instanceof AST_New)||p instanceof AST_Dot&&p.expression===node||p instanceof AST_Sub&&p.expression===node||p instanceof AST_Conditional&&p.condition===node||p instanceof AST_Binary&&p.left===node||p instanceof AST_UnaryPostfix&&p.expression===node))return!1;node=p,p=a[--i]}}function no_constructor_parens(self,output){return 0==self.args.length&&!output.option("beautify")}function best_of(a){for(var best=a[0],len=best.length,i=1;i<a.length;++i)a[i].length<len&&(best=a[i],len=best.length);return best}function make_num(num){var m,str=num.toString(10),a=[str.replace(/^0\./,".").replace("e+","e")];return Math.floor(num)===num?(num>=0?a.push("0x"+num.toString(16).toLowerCase(),"0"+num.toString(8)):a.push("-0x"+(-num).toString(16).toLowerCase(),"-0"+(-num).toString(8)),(m=/^(.*?)(0+)$/.exec(num))&&a.push(m[1]+"e"+m[2].length)):(m=/^0?\.(0+)(.*)$/.exec(num))&&a.push(m[2]+"e-"+(m[1].length+m[2].length),str.substr(str.indexOf("."))),best_of(a)}function make_block(stmt,output){return stmt instanceof AST_BlockStatement?(stmt.print(output),void 0):(output.with_block(function(){output.indent(),stmt.print(output),output.newline()}),void 0)}function DEFMAP(nodetype,generator){nodetype.DEFMETHOD("add_source_map",function(stream){generator(this,stream)})}function basic_sourcemap_gen(self,output){output.add_mapping(self.start)}AST_Node.DEFMETHOD("print",function(stream,force_parens){function doit(){self.add_comments(stream),self.add_source_map(stream),generator(self,stream)}var self=this,generator=self._codegen;stream.push_node(self),force_parens||self.needs_parens(stream)?stream.with_parens(doit):doit(),stream.pop_node()}),AST_Node.DEFMETHOD("print_to_string",function(options){var s=OutputStream(options);return this.print(s),s.get()}),AST_Node.DEFMETHOD("add_comments",function(output){var c=output.option("comments"),self=this;if(c){var start=self.start;if(start&&!start._comments_dumped){start._comments_dumped=!0;var comments=start.comments_before;self instanceof AST_Exit&&self.value&&self.value.start.comments_before.length>0&&(comments=(comments||[]).concat(self.value.start.comments_before),self.value.start.comments_before=[]),c.test?comments=comments.filter(function(comment){return c.test(comment.value)}):"function"==typeof c&&(comments=comments.filter(function(comment){return c(self,comment)})),comments.forEach(function(c){"comment1"==c.type?(output.print("//"+c.value+"\n"),output.indent()):"comment2"==c.type&&(output.print("/*"+c.value+"*/"),start.nlb?(output.print("\n"),output.indent()):output.space())})}}}),PARENS(AST_Node,function(){return!1}),PARENS(AST_Function,function(output){return first_in_statement(output)}),PARENS(AST_Object,function(output){return first_in_statement(output)}),PARENS(AST_Unary,function(output){var p=output.parent();return p instanceof AST_PropAccess&&p.expression===this}),PARENS(AST_Seq,function(output){var p=output.parent();return p instanceof AST_Call||p instanceof AST_Unary||p instanceof AST_Binary||p instanceof AST_VarDef||p instanceof AST_Dot||p instanceof AST_Array||p instanceof AST_ObjectProperty||p instanceof AST_Conditional}),PARENS(AST_Binary,function(output){var p=output.parent();if(p instanceof AST_Call&&p.expression===this)return!0;if(p instanceof AST_Unary)return!0;if(p instanceof AST_PropAccess&&p.expression===this)return!0;if(p instanceof AST_Binary){var po=p.operator,pp=PRECEDENCE[po],so=this.operator,sp=PRECEDENCE[so];if(pp>sp||pp==sp&&this===p.right&&(so!=po||"*"!=so&&"&&"!=so&&"||"!=so))return!0}}),PARENS(AST_PropAccess,function(output){var p=output.parent();if(p instanceof AST_New&&p.expression===this)try{this.walk(new TreeWalker(function(node){if(node instanceof AST_Call)throw p}))}catch(ex){if(ex!==p)throw ex;return!0}}),PARENS(AST_Call,function(output){var p=output.parent();return p instanceof AST_New&&p.expression===this}),PARENS(AST_New,function(output){var p=output.parent();return no_constructor_parens(this,output)&&(p instanceof AST_PropAccess||p instanceof AST_Call&&p.expression===this)?!0:void 0}),PARENS(AST_Number,function(output){var p=output.parent();return this.getValue()<0&&p instanceof AST_PropAccess&&p.expression===this?!0:void 0}),PARENS(AST_NaN,function(output){var p=output.parent();return p instanceof AST_PropAccess&&p.expression===this?!0:void 0}),PARENS(AST_Assign,assign_and_conditional_paren_rules),PARENS(AST_Conditional,assign_and_conditional_paren_rules),DEFPRINT(AST_Directive,function(self,output){output.print_string(self.value),output.semicolon()}),DEFPRINT(AST_Debugger,function(self,output){output.print("debugger"),output.semicolon()}),AST_StatementWithBody.DEFMETHOD("_do_print_body",function(output){force_statement(this.body,output)}),DEFPRINT(AST_Statement,function(self,output){self.body.print(output),output.semicolon()}),DEFPRINT(AST_Toplevel,function(self,output){display_body(self.body,!0,output),output.print("")}),DEFPRINT(AST_LabeledStatement,function(self,output){self.label.print(output),output.colon(),self.body.print(output)}),DEFPRINT(AST_SimpleStatement,function(self,output){self.body.print(output),output.semicolon()}),DEFPRINT(AST_BlockStatement,function(self,output){print_bracketed(self.body,output)}),DEFPRINT(AST_EmptyStatement,function(self,output){output.semicolon()}),DEFPRINT(AST_Do,function(self,output){output.print("do"),output.space(),self._do_print_body(output),output.space(),output.print("while"),output.space(),output.with_parens(function(){self.condition.print(output)}),output.semicolon()}),DEFPRINT(AST_While,function(self,output){output.print("while"),output.space(),output.with_parens(function(){self.condition.print(output)}),output.space(),self._do_print_body(output)}),DEFPRINT(AST_For,function(self,output){output.print("for"),output.space(),output.with_parens(function(){self.init?(self.init instanceof AST_Definitions?self.init.print(output):parenthesize_for_noin(self.init,output,!0),output.print(";"),output.space()):output.print(";"),self.condition?(self.condition.print(output),output.print(";"),output.space()):output.print(";"),self.step&&self.step.print(output)}),output.space(),self._do_print_body(output)}),DEFPRINT(AST_ForIn,function(self,output){output.print("for"),output.space(),output.with_parens(function(){self.init.print(output),output.space(),output.print("in"),output.space(),self.object.print(output)}),output.space(),self._do_print_body(output)}),DEFPRINT(AST_With,function(self,output){output.print("with"),output.space(),output.with_parens(function(){self.expression.print(output)}),output.space(),self._do_print_body(output)}),AST_Lambda.DEFMETHOD("_do_print",function(output,nokeyword){var self=this;nokeyword||output.print("function"),self.name&&(output.space(),self.name.print(output)),output.with_parens(function(){self.argnames.forEach(function(arg,i){i&&output.comma(),arg.print(output)})}),output.space(),print_bracketed(self.body,output)}),DEFPRINT(AST_Lambda,function(self,output){self._do_print(output)}),AST_Exit.DEFMETHOD("_do_print",function(output,kind){output.print(kind),this.value&&(output.space(),this.value.print(output)),output.semicolon()}),DEFPRINT(AST_Return,function(self,output){self._do_print(output,"return")}),DEFPRINT(AST_Throw,function(self,output){self._do_print(output,"throw")}),AST_LoopControl.DEFMETHOD("_do_print",function(output,kind){output.print(kind),this.label&&(output.space(),this.label.print(output)),output.semicolon()}),DEFPRINT(AST_Break,function(self,output){self._do_print(output,"break")}),DEFPRINT(AST_Continue,function(self,output){self._do_print(output,"continue")}),DEFPRINT(AST_If,function(self,output){output.print("if"),output.space(),output.with_parens(function(){self.condition.print(output)}),output.space(),self.alternative?(make_then(self,output),output.space(),output.print("else"),output.space(),force_statement(self.alternative,output)):self._do_print_body(output)}),DEFPRINT(AST_Switch,function(self,output){output.print("switch"),output.space(),output.with_parens(function(){self.expression.print(output)}),output.space(),self.body.length>0?output.with_block(function(){self.body.forEach(function(stmt,i){i&&output.newline(),output.indent(!0),stmt.print(output)})}):output.print("{}")}),AST_SwitchBranch.DEFMETHOD("_do_print_body",function(output){this.body.length>0&&(output.newline(),this.body.forEach(function(stmt){output.indent(),stmt.print(output),output.newline()}))}),DEFPRINT(AST_Default,function(self,output){output.print("default:"),self._do_print_body(output)}),DEFPRINT(AST_Case,function(self,output){output.print("case"),output.space(),self.expression.print(output),output.print(":"),self._do_print_body(output)}),DEFPRINT(AST_Try,function(self,output){output.print("try"),output.space(),print_bracketed(self.body,output),self.bcatch&&(output.space(),self.bcatch.print(output)),self.bfinally&&(output.space(),self.bfinally.print(output))}),DEFPRINT(AST_Catch,function(self,output){output.print("catch"),output.space(),output.with_parens(function(){self.argname.print(output)}),output.space(),print_bracketed(self.body,output)}),DEFPRINT(AST_Finally,function(self,output){output.print("finally"),output.space(),print_bracketed(self.body,output)}),AST_Definitions.DEFMETHOD("_do_print",function(output,kind){output.print(kind),output.space(),this.definitions.forEach(function(def,i){i&&output.comma(),def.print(output)});var p=output.parent(),in_for=p instanceof AST_For||p instanceof AST_ForIn,avoid_semicolon=in_for&&p.init===this;avoid_semicolon||output.semicolon()}),DEFPRINT(AST_Var,function(self,output){self._do_print(output,"var")}),DEFPRINT(AST_Const,function(self,output){self._do_print(output,"const")}),DEFPRINT(AST_VarDef,function(self,output){if(self.name.print(output),self.value){output.space(),output.print("="),output.space();var p=output.parent(1),noin=p instanceof AST_For||p instanceof AST_ForIn;parenthesize_for_noin(self.value,output,noin)}}),DEFPRINT(AST_Call,function(self,output){self.expression.print(output),self instanceof AST_New&&no_constructor_parens(self,output)||output.with_parens(function(){self.args.forEach(function(expr,i){i&&output.comma(),expr.print(output)})})}),DEFPRINT(AST_New,function(self,output){output.print("new"),output.space(),AST_Call.prototype._codegen(self,output)}),AST_Seq.DEFMETHOD("_do_print",function(output){this.car.print(output),this.cdr&&(output.comma(),output.should_break()&&(output.newline(),output.indent()),this.cdr.print(output))}),DEFPRINT(AST_Seq,function(self,output){self._do_print(output)}),DEFPRINT(AST_Dot,function(self,output){var expr=self.expression;expr.print(output),expr instanceof AST_Number&&expr.getValue()>=0&&(/[xa-f.]/i.test(output.last())||output.print(".")),output.print("."),output.add_mapping(self.end),output.print_name(self.property)}),DEFPRINT(AST_Sub,function(self,output){self.expression.print(output),output.print("["),self.property.print(output),output.print("]")}),DEFPRINT(AST_UnaryPrefix,function(self,output){var op=self.operator;output.print(op),/^[a-z]/i.test(op)&&output.space(),self.expression.print(output)}),DEFPRINT(AST_UnaryPostfix,function(self,output){self.expression.print(output),output.print(self.operator)}),DEFPRINT(AST_Binary,function(self,output){self.left.print(output),output.space(),output.print(self.operator),output.space(),self.right.print(output)}),DEFPRINT(AST_Conditional,function(self,output){self.condition.print(output),output.space(),output.print("?"),output.space(),self.consequent.print(output),output.space(),output.colon(),self.alternative.print(output)}),DEFPRINT(AST_Array,function(self,output){output.with_square(function(){var a=self.elements,len=a.length;len>0&&output.space(),a.forEach(function(exp,i){i&&output.comma(),exp.print(output),i===len-1&&exp instanceof AST_Hole&&output.comma()}),len>0&&output.space()})}),DEFPRINT(AST_Object,function(self,output){self.properties.length>0?output.with_block(function(){self.properties.forEach(function(prop,i){i&&(output.print(","),output.newline()),output.indent(),prop.print(output)}),output.newline()}):output.print("{}")}),DEFPRINT(AST_ObjectKeyVal,function(self,output){var key=self.key;output.option("quote_keys")?output.print_string(key+""):("number"==typeof key||!output.option("beautify")&&+key+""==key)&&parseFloat(key)>=0?output.print(make_num(key)):(RESERVED_WORDS(key)?output.option("screw_ie8"):is_identifier_string(key))?output.print_name(key):output.print_string(key),output.colon(),self.value.print(output)}),DEFPRINT(AST_ObjectSetter,function(self,output){output.print("set"),self.value._do_print(output,!0)}),DEFPRINT(AST_ObjectGetter,function(self,output){output.print("get"),self.value._do_print(output,!0)}),DEFPRINT(AST_Symbol,function(self,output){var def=self.definition();output.print_name(def?def.mangled_name||def.name:self.name)}),DEFPRINT(AST_Undefined,function(self,output){output.print("void 0")}),DEFPRINT(AST_Hole,noop),DEFPRINT(AST_Infinity,function(self,output){output.print("1/0")}),DEFPRINT(AST_NaN,function(self,output){output.print("0/0")}),DEFPRINT(AST_This,function(self,output){output.print("this")}),DEFPRINT(AST_Constant,function(self,output){output.print(self.getValue())}),DEFPRINT(AST_String,function(self,output){output.print_string(self.getValue())}),DEFPRINT(AST_Number,function(self,output){output.print(make_num(self.getValue()))}),DEFPRINT(AST_RegExp,function(self,output){var str=self.getValue().toString();output.option("ascii_only")&&(str=output.to_ascii(str)),output.print(str);var p=output.parent();p instanceof AST_Binary&&/^in/.test(p.operator)&&p.left===self&&output.print(" ")}),DEFMAP(AST_Node,noop),DEFMAP(AST_Directive,basic_sourcemap_gen),DEFMAP(AST_Debugger,basic_sourcemap_gen),DEFMAP(AST_Symbol,basic_sourcemap_gen),DEFMAP(AST_Jump,basic_sourcemap_gen),DEFMAP(AST_StatementWithBody,basic_sourcemap_gen),DEFMAP(AST_LabeledStatement,noop),DEFMAP(AST_Lambda,basic_sourcemap_gen),DEFMAP(AST_Switch,basic_sourcemap_gen),DEFMAP(AST_SwitchBranch,basic_sourcemap_gen),DEFMAP(AST_BlockStatement,basic_sourcemap_gen),DEFMAP(AST_Toplevel,noop),DEFMAP(AST_New,basic_sourcemap_gen),DEFMAP(AST_Try,basic_sourcemap_gen),DEFMAP(AST_Catch,basic_sourcemap_gen),DEFMAP(AST_Finally,basic_sourcemap_gen),DEFMAP(AST_Definitions,basic_sourcemap_gen),DEFMAP(AST_Constant,basic_sourcemap_gen),DEFMAP(AST_ObjectProperty,function(self,output){output.add_mapping(self.start,self.key)})}(),Compressor.prototype=new TreeTransformer,merge(Compressor.prototype,{option:function(key){return this.options[key]},warn:function(){this.options.warnings&&AST_Node.warn.apply(AST_Node,arguments)},before:function(node,descend){if(node._squeezed)return node;if(node instanceof AST_Scope&&(node.drop_unused(this),node=node.hoist_declarations(this)),descend(node,this),node=node.optimize(this),node instanceof AST_Scope){var save_warnings=this.options.warnings;this.options.warnings=!1,node.drop_unused(this),this.options.warnings=save_warnings}return node._squeezed=!0,node}}),function(){function OPT(node,optimizer){node.DEFMETHOD("optimize",function(compressor){var self=this;if(self._optimized)return self;var opt=optimizer(self,compressor);return opt._optimized=!0,opt===self?opt:opt.transform(compressor)})}function make_node(ctor,orig,props){return props||(props={}),orig&&(props.start||(props.start=orig.start),props.end||(props.end=orig.end)),new ctor(props)}function make_node_from_constant(compressor,val,orig){if(val instanceof AST_Node)return val.transform(compressor);switch(typeof val){case"string":return make_node(AST_String,orig,{value:val}).optimize(compressor);case"number":return make_node(isNaN(val)?AST_NaN:AST_Number,orig,{value:val}).optimize(compressor);case"boolean":return make_node(val?AST_True:AST_False,orig).optimize(compressor);case"undefined":return make_node(AST_Undefined,orig).optimize(compressor);default:if(null===val)return make_node(AST_Null,orig).optimize(compressor);if(val instanceof RegExp)return make_node(AST_RegExp,orig).optimize(compressor);throw new Error(string_template("Can't handle constant of type: {type}",{type:typeof val}))}}function as_statement_array(thing){if(null===thing)return[];if(thing instanceof AST_BlockStatement)return thing.body;if(thing instanceof AST_EmptyStatement)return[];if(thing instanceof AST_Statement)return[thing];throw new Error("Can't convert thing to statement array")}function is_empty(thing){return null===thing?!0:thing instanceof AST_EmptyStatement?!0:thing instanceof AST_BlockStatement?0==thing.body.length:!1}function loop_body(x){return x instanceof AST_Switch?x:x instanceof AST_For||x instanceof AST_ForIn||x instanceof AST_DWLoop?x.body instanceof AST_BlockStatement?x.body:x:x}function tighten_body(statements,compressor){function eliminate_spurious_blocks(statements){var seen_dirs=[];return statements.reduce(function(a,stat){return stat instanceof AST_BlockStatement?(CHANGED=!0,a.push.apply(a,eliminate_spurious_blocks(stat.body))):stat instanceof AST_EmptyStatement?CHANGED=!0:stat instanceof AST_Directive?seen_dirs.indexOf(stat.value)<0?(a.push(stat),seen_dirs.push(stat.value)):CHANGED=!0:a.push(stat),a},[])}function handle_if_return(statements,compressor){var self=compressor.self(),in_lambda=self instanceof AST_Lambda,ret=[];loop:for(var i=statements.length;--i>=0;){var stat=statements[i];switch(!0){case in_lambda&&stat instanceof AST_Return&&!stat.value&&0==ret.length:CHANGED=!0;continue loop;case stat instanceof AST_If:if(stat.body instanceof AST_Return){if((in_lambda&&0==ret.length||ret[0]instanceof AST_Return&&!ret[0].value)&&!stat.body.value&&!stat.alternative){CHANGED=!0;var cond=make_node(AST_SimpleStatement,stat.condition,{body:stat.condition});ret.unshift(cond);continue loop}if(ret[0]instanceof AST_Return&&stat.body.value&&ret[0].value&&!stat.alternative){CHANGED=!0,stat=stat.clone(),stat.alternative=ret[0],ret[0]=stat.transform(compressor);continue loop}if((0==ret.length||ret[0]instanceof AST_Return)&&stat.body.value&&!stat.alternative&&in_lambda){CHANGED=!0,stat=stat.clone(),stat.alternative=ret[0]||make_node(AST_Return,stat,{value:make_node(AST_Undefined,stat)}),ret[0]=stat.transform(compressor);continue loop}if(!stat.body.value&&in_lambda){CHANGED=!0,stat=stat.clone(),stat.condition=stat.condition.negate(compressor),stat.body=make_node(AST_BlockStatement,stat,{body:as_statement_array(stat.alternative).concat(ret)}),stat.alternative=null,ret=[stat.transform(compressor)];continue loop}if(1==ret.length&&in_lambda&&ret[0]instanceof AST_SimpleStatement&&(!stat.alternative||stat.alternative instanceof AST_SimpleStatement)){CHANGED=!0,ret.push(make_node(AST_Return,ret[0],{value:make_node(AST_Undefined,ret[0])}).transform(compressor)),ret=as_statement_array(stat.alternative).concat(ret),ret.unshift(stat);continue loop}}var ab=aborts(stat.body),lct=ab instanceof AST_LoopControl?compressor.loopcontrol_target(ab.label):null;if(ab&&(ab instanceof AST_Return&&!ab.value&&in_lambda||ab instanceof AST_Continue&&self===loop_body(lct)||ab instanceof AST_Break&&lct instanceof AST_BlockStatement&&self===lct)){ab.label&&remove(ab.label.thedef.references,ab.label),CHANGED=!0;var body=as_statement_array(stat.body).slice(0,-1);stat=stat.clone(),stat.condition=stat.condition.negate(compressor),stat.body=make_node(AST_BlockStatement,stat,{body:ret}),stat.alternative=make_node(AST_BlockStatement,stat,{body:body}),ret=[stat.transform(compressor)];continue loop}var ab=aborts(stat.alternative),lct=ab instanceof AST_LoopControl?compressor.loopcontrol_target(ab.label):null;if(ab&&(ab instanceof AST_Return&&!ab.value&&in_lambda||ab instanceof AST_Continue&&self===loop_body(lct)||ab instanceof AST_Break&&lct instanceof AST_BlockStatement&&self===lct)){ab.label&&remove(ab.label.thedef.references,ab.label),CHANGED=!0,stat=stat.clone(),stat.body=make_node(AST_BlockStatement,stat.body,{body:as_statement_array(stat.body).concat(ret)}),stat.alternative=make_node(AST_BlockStatement,stat.alternative,{body:as_statement_array(stat.alternative).slice(0,-1)}),ret=[stat.transform(compressor)];
continue loop}ret.unshift(stat);break;default:ret.unshift(stat)}}return ret}function eliminate_dead_code(statements,compressor){var has_quit=!1,orig=statements.length,self=compressor.self();return statements=statements.reduce(function(a,stat){if(has_quit)extract_declarations_from_unreachable_code(compressor,stat,a);else{if(stat instanceof AST_LoopControl){var lct=compressor.loopcontrol_target(stat.label);stat instanceof AST_Break&&lct instanceof AST_BlockStatement&&loop_body(lct)===self||stat instanceof AST_Continue&&loop_body(lct)===self?stat.label&&remove(stat.label.thedef.references,stat.label):a.push(stat)}else a.push(stat);aborts(stat)&&(has_quit=!0)}return a},[]),CHANGED=statements.length!=orig,statements}function sequencesize(statements,compressor){function push_seq(){seq=AST_Seq.from_array(seq),seq&&ret.push(make_node(AST_SimpleStatement,seq,{body:seq})),seq=[]}if(statements.length<2)return statements;var seq=[],ret=[];return statements.forEach(function(stat){stat instanceof AST_SimpleStatement?seq.push(stat.body):(push_seq(),ret.push(stat))}),push_seq(),ret=sequencesize_2(ret,compressor),CHANGED=ret.length!=statements.length,ret}function sequencesize_2(statements,compressor){function cons_seq(right){ret.pop();var left=prev.body;return left instanceof AST_Seq?left.add(right):left=AST_Seq.cons(left,right),left.transform(compressor)}var ret=[],prev=null;return statements.forEach(function(stat){if(prev)if(stat instanceof AST_For){var opera={};try{prev.body.walk(new TreeWalker(function(node){if(node instanceof AST_Binary&&"in"==node.operator)throw opera})),!stat.init||stat.init instanceof AST_Definitions?stat.init||(stat.init=prev.body,ret.pop()):stat.init=cons_seq(stat.init)}catch(ex){if(ex!==opera)throw ex}}else stat instanceof AST_If?stat.condition=cons_seq(stat.condition):stat instanceof AST_With?stat.expression=cons_seq(stat.expression):stat instanceof AST_Exit&&stat.value?stat.value=cons_seq(stat.value):stat instanceof AST_Exit?stat.value=cons_seq(make_node(AST_Undefined,stat)):stat instanceof AST_Switch&&(stat.expression=cons_seq(stat.expression));ret.push(stat),prev=stat instanceof AST_SimpleStatement?stat:null}),ret}function join_consecutive_vars(statements){var prev=null;return statements.reduce(function(a,stat){return stat instanceof AST_Definitions&&prev&&prev.TYPE==stat.TYPE?(prev.definitions=prev.definitions.concat(stat.definitions),CHANGED=!0):stat instanceof AST_For&&prev instanceof AST_Definitions&&(!stat.init||stat.init.TYPE==prev.TYPE)?(CHANGED=!0,a.pop(),stat.init?stat.init.definitions=prev.definitions.concat(stat.init.definitions):stat.init=prev,a.push(stat),prev=stat):(prev=stat,a.push(stat)),a},[])}function negate_iifes(statements){statements.forEach(function(stat){stat instanceof AST_SimpleStatement&&(stat.body=function transform(thing){return thing.transform(new TreeTransformer(function(node){if(node instanceof AST_Call&&node.expression instanceof AST_Function)return make_node(AST_UnaryPrefix,node,{operator:"!",expression:node});if(node instanceof AST_Call)node.expression=transform(node.expression);else if(node instanceof AST_Seq)node.car=transform(node.car);else if(node instanceof AST_Conditional){var expr=transform(node.condition);if(expr!==node.condition){node.condition=expr;var tmp=node.consequent;node.consequent=node.alternative,node.alternative=tmp}}return node}))}(stat.body))})}var CHANGED;do CHANGED=!1,statements=eliminate_spurious_blocks(statements),compressor.option("dead_code")&&(statements=eliminate_dead_code(statements,compressor)),compressor.option("if_return")&&(statements=handle_if_return(statements,compressor)),compressor.option("sequences")&&(statements=sequencesize(statements,compressor)),compressor.option("join_vars")&&(statements=join_consecutive_vars(statements,compressor));while(CHANGED);return compressor.option("negate_iife")&&negate_iifes(statements,compressor),statements}function extract_declarations_from_unreachable_code(compressor,stat,target){compressor.warn("Dropping unreachable code [{file}:{line},{col}]",stat.start),stat.walk(new TreeWalker(function(node){return node instanceof AST_Definitions?(compressor.warn("Declarations in unreachable code! [{file}:{line},{col}]",node.start),node.remove_initializers(),target.push(node),!0):node instanceof AST_Defun?(target.push(node),!0):node instanceof AST_Scope?!0:void 0}))}function best_of(ast1,ast2){return ast1.print_to_string().length>ast2.print_to_string().length?ast2:ast1}function aborts(thing){return thing&&thing.aborts()}function if_break_in_loop(self,compressor){function drop_it(rest){rest=as_statement_array(rest),self.body instanceof AST_BlockStatement?(self.body=self.body.clone(),self.body.body=rest.concat(self.body.body.slice(1)),self.body=self.body.transform(compressor)):self.body=make_node(AST_BlockStatement,self.body,{body:rest}).transform(compressor),if_break_in_loop(self,compressor)}var first=self.body instanceof AST_BlockStatement?self.body.body[0]:self.body;first instanceof AST_If&&(first.body instanceof AST_Break&&compressor.loopcontrol_target(first.body.label)===self?(self.condition=self.condition?make_node(AST_Binary,self.condition,{left:self.condition,operator:"&&",right:first.condition.negate(compressor)}):first.condition.negate(compressor),drop_it(first.alternative)):first.alternative instanceof AST_Break&&compressor.loopcontrol_target(first.alternative.label)===self&&(self.condition=self.condition?make_node(AST_Binary,self.condition,{left:self.condition,operator:"&&",right:first.condition}):first.condition,drop_it(first.body)))}function literals_in_boolean_context(self,compressor){return compressor.option("booleans")&&compressor.in_boolean_context()?make_node(AST_True,self):self}OPT(AST_Node,function(self){return self}),AST_Node.DEFMETHOD("equivalent_to",function(node){return this.print_to_string()==node.print_to_string()}),function(def){var unary_bool=["!","delete"],binary_bool=["in","instanceof","==","!=","===","!==","<","<=",">=",">"];def(AST_Node,function(){return!1}),def(AST_UnaryPrefix,function(){return member(this.operator,unary_bool)}),def(AST_Binary,function(){return member(this.operator,binary_bool)||("&&"==this.operator||"||"==this.operator)&&this.left.is_boolean()&&this.right.is_boolean()}),def(AST_Conditional,function(){return this.consequent.is_boolean()&&this.alternative.is_boolean()}),def(AST_Assign,function(){return"="==this.operator&&this.right.is_boolean()}),def(AST_Seq,function(){return this.cdr.is_boolean()}),def(AST_True,function(){return!0}),def(AST_False,function(){return!0})}(function(node,func){node.DEFMETHOD("is_boolean",func)}),function(def){def(AST_Node,function(){return!1}),def(AST_String,function(){return!0}),def(AST_UnaryPrefix,function(){return"typeof"==this.operator}),def(AST_Binary,function(compressor){return"+"==this.operator&&(this.left.is_string(compressor)||this.right.is_string(compressor))}),def(AST_Assign,function(compressor){return("="==this.operator||"+="==this.operator)&&this.right.is_string(compressor)}),def(AST_Seq,function(compressor){return this.cdr.is_string(compressor)}),def(AST_Conditional,function(compressor){return this.consequent.is_string(compressor)&&this.alternative.is_string(compressor)}),def(AST_Call,function(compressor){return compressor.option("unsafe")&&this.expression instanceof AST_SymbolRef&&"String"==this.expression.name&&this.expression.undeclared()})}(function(node,func){node.DEFMETHOD("is_string",func)}),function(def){function ev(node){return node._eval()}AST_Node.DEFMETHOD("evaluate",function(compressor){if(!compressor.option("evaluate"))return[this];try{var val=this._eval(),ast=make_node_from_constant(compressor,val,this);return[best_of(ast,this),val]}catch(ex){if(ex!==def)throw ex;return[this]}}),def(AST_Statement,function(){throw new Error(string_template("Cannot evaluate a statement [{file}:{line},{col}]",this.start))}),def(AST_Function,function(){throw def}),def(AST_Node,function(){throw def}),def(AST_Constant,function(){return this.getValue()}),def(AST_UnaryPrefix,function(){var e=this.expression;switch(this.operator){case"!":return!ev(e);case"typeof":if(e instanceof AST_Function)return"function";if(e=ev(e),e instanceof RegExp)throw def;return typeof e;case"void":return void ev(e);case"~":return~ev(e);case"-":if(e=ev(e),0===e)throw def;return-e;case"+":return+ev(e)}throw def}),def(AST_Binary,function(){var left=this.left,right=this.right;switch(this.operator){case"&&":return ev(left)&&ev(right);case"||":return ev(left)||ev(right);case"|":return ev(left)|ev(right);case"&":return ev(left)&ev(right);case"^":return ev(left)^ev(right);case"+":return ev(left)+ev(right);case"*":return ev(left)*ev(right);case"/":return ev(left)/ev(right);case"%":return ev(left)%ev(right);case"-":return ev(left)-ev(right);case"<<":return ev(left)<<ev(right);case">>":return ev(left)>>ev(right);case">>>":return ev(left)>>>ev(right);case"==":return ev(left)==ev(right);case"===":return ev(left)===ev(right);case"!=":return ev(left)!=ev(right);case"!==":return ev(left)!==ev(right);case"<":return ev(left)<ev(right);case"<=":return ev(left)<=ev(right);case">":return ev(left)>ev(right);case">=":return ev(left)>=ev(right);case"in":return ev(left)in ev(right);case"instanceof":return ev(left)instanceof ev(right)}throw def}),def(AST_Conditional,function(){return ev(this.condition)?ev(this.consequent):ev(this.alternative)}),def(AST_SymbolRef,function(){var d=this.definition();if(d&&d.constant&&d.init)return ev(d.init);throw def})}(function(node,func){node.DEFMETHOD("_eval",func)}),function(def){function basic_negation(exp){return make_node(AST_UnaryPrefix,exp,{operator:"!",expression:exp})}def(AST_Node,function(){return basic_negation(this)}),def(AST_Statement,function(){throw new Error("Cannot negate a statement")}),def(AST_Function,function(){return basic_negation(this)}),def(AST_UnaryPrefix,function(){return"!"==this.operator?this.expression:basic_negation(this)}),def(AST_Seq,function(compressor){var self=this.clone();return self.cdr=self.cdr.negate(compressor),self}),def(AST_Conditional,function(compressor){var self=this.clone();return self.consequent=self.consequent.negate(compressor),self.alternative=self.alternative.negate(compressor),best_of(basic_negation(this),self)}),def(AST_Binary,function(compressor){var self=this.clone(),op=this.operator;if(compressor.option("unsafe_comps"))switch(op){case"<=":return self.operator=">",self;case"<":return self.operator=">=",self;case">=":return self.operator="<",self;case">":return self.operator="<=",self}switch(op){case"==":return self.operator="!=",self;case"!=":return self.operator="==",self;case"===":return self.operator="!==",self;case"!==":return self.operator="===",self;case"&&":return self.operator="||",self.left=self.left.negate(compressor),self.right=self.right.negate(compressor),best_of(basic_negation(this),self);case"||":return self.operator="&&",self.left=self.left.negate(compressor),self.right=self.right.negate(compressor),best_of(basic_negation(this),self)}return basic_negation(this)})}(function(node,func){node.DEFMETHOD("negate",function(compressor){return func.call(this,compressor)})}),function(def){def(AST_Node,function(){return!0}),def(AST_EmptyStatement,function(){return!1}),def(AST_Constant,function(){return!1}),def(AST_This,function(){return!1}),def(AST_Block,function(){for(var i=this.body.length;--i>=0;)if(this.body[i].has_side_effects())return!0;return!1}),def(AST_SimpleStatement,function(){return this.body.has_side_effects()}),def(AST_Defun,function(){return!0}),def(AST_Function,function(){return!1}),def(AST_Binary,function(){return this.left.has_side_effects()||this.right.has_side_effects()}),def(AST_Assign,function(){return!0}),def(AST_Conditional,function(){return this.condition.has_side_effects()||this.consequent.has_side_effects()||this.alternative.has_side_effects()}),def(AST_Unary,function(){return"delete"==this.operator||"++"==this.operator||"--"==this.operator||this.expression.has_side_effects()}),def(AST_SymbolRef,function(){return!1}),def(AST_Object,function(){for(var i=this.properties.length;--i>=0;)if(this.properties[i].has_side_effects())return!0;return!1}),def(AST_ObjectProperty,function(){return this.value.has_side_effects()}),def(AST_Array,function(){for(var i=this.elements.length;--i>=0;)if(this.elements[i].has_side_effects())return!0;return!1}),def(AST_PropAccess,function(){return!0}),def(AST_Seq,function(){return this.car.has_side_effects()||this.cdr.has_side_effects()})}(function(node,func){node.DEFMETHOD("has_side_effects",func)}),function(def){function block_aborts(){var n=this.body.length;return n>0&&aborts(this.body[n-1])}def(AST_Statement,function(){return null}),def(AST_Jump,function(){return this}),def(AST_BlockStatement,block_aborts),def(AST_SwitchBranch,block_aborts),def(AST_If,function(){return this.alternative&&aborts(this.body)&&aborts(this.alternative)})}(function(node,func){node.DEFMETHOD("aborts",func)}),OPT(AST_Directive,function(self){return self.scope.has_directive(self.value)!==self.scope?make_node(AST_EmptyStatement,self):self}),OPT(AST_Debugger,function(self,compressor){return compressor.option("drop_debugger")?make_node(AST_EmptyStatement,self):self}),OPT(AST_LabeledStatement,function(self,compressor){return self.body instanceof AST_Break&&compressor.loopcontrol_target(self.body.label)===self.body?make_node(AST_EmptyStatement,self):0==self.label.references.length?self.body:self}),OPT(AST_Block,function(self,compressor){return self.body=tighten_body(self.body,compressor),self}),OPT(AST_BlockStatement,function(self,compressor){switch(self.body=tighten_body(self.body,compressor),self.body.length){case 1:return self.body[0];case 0:return make_node(AST_EmptyStatement,self)}return self}),AST_Scope.DEFMETHOD("drop_unused",function(compressor){var self=this;if(compressor.option("unused")&&!(self instanceof AST_Toplevel)&&!self.uses_eval){var in_use=[],initializations=new Dictionary,scope=this,tw=new TreeWalker(function(node,descend){if(node!==self){if(node instanceof AST_Defun)return initializations.add(node.name.name,node),!0;if(node instanceof AST_Definitions&&scope===self)return node.definitions.forEach(function(def){def.value&&(initializations.add(def.name.name,def.value),def.value.has_side_effects()&&def.value.walk(tw))}),!0;if(node instanceof AST_SymbolRef)return push_uniq(in_use,node.definition()),!0;if(node instanceof AST_Scope){var save_scope=scope;return scope=node,descend(),scope=save_scope,!0}}});self.walk(tw);for(var i=0;i<in_use.length;++i)in_use[i].orig.forEach(function(decl){var init=initializations.get(decl.name);init&&init.forEach(function(init){var tw=new TreeWalker(function(node){node instanceof AST_SymbolRef&&push_uniq(in_use,node.definition())});init.walk(tw)})});var tt=new TreeTransformer(function(node,descend,in_list){if(node instanceof AST_Lambda&&!(node instanceof AST_Accessor))for(var a=node.argnames,i=a.length;--i>=0;){var sym=a[i];if(!sym.unreferenced())break;a.pop(),compressor.warn("Dropping unused function argument {name} [{file}:{line},{col}]",{name:sym.name,file:sym.start.file,line:sym.start.line,col:sym.start.col})}if(node instanceof AST_Defun&&node!==self)return member(node.name.definition(),in_use)?node:(compressor.warn("Dropping unused function {name} [{file}:{line},{col}]",{name:node.name.name,file:node.name.start.file,line:node.name.start.line,col:node.name.start.col}),make_node(AST_EmptyStatement,node));if(node instanceof AST_Definitions&&!(tt.parent()instanceof AST_ForIn)){var def=node.definitions.filter(function(def){if(member(def.name.definition(),in_use))return!0;var w={name:def.name.name,file:def.name.start.file,line:def.name.start.line,col:def.name.start.col};return def.value&&def.value.has_side_effects()?(def._unused_side_effects=!0,compressor.warn("Side effects in initialization of unused variable {name} [{file}:{line},{col}]",w),!0):(compressor.warn("Dropping unused variable {name} [{file}:{line},{col}]",w),!1)});def=mergeSort(def,function(a,b){return!a.value&&b.value?-1:!b.value&&a.value?1:0});for(var side_effects=[],i=0;i<def.length;){var x=def[i];x._unused_side_effects?(side_effects.push(x.value),def.splice(i,1)):(side_effects.length>0&&(side_effects.push(x.value),x.value=AST_Seq.from_array(side_effects),side_effects=[]),++i)}return side_effects=side_effects.length>0?make_node(AST_BlockStatement,node,{body:[make_node(AST_SimpleStatement,node,{body:AST_Seq.from_array(side_effects)})]}):null,0!=def.length||side_effects?0==def.length?side_effects:(node.definitions=def,side_effects&&(side_effects.body.unshift(node),node=side_effects),node):make_node(AST_EmptyStatement,node)}if(node instanceof AST_For&&node.init instanceof AST_BlockStatement){descend(node,this);var body=node.init.body.slice(0,-1);return node.init=node.init.body.slice(-1)[0].body,body.push(node),in_list?MAP.splice(body):make_node(AST_BlockStatement,node,{body:body})}return node instanceof AST_Scope&&node!==self?node:void 0});self.transform(tt)}}),AST_Scope.DEFMETHOD("hoist_declarations",function(compressor){var hoist_funs=compressor.option("hoist_funs"),hoist_vars=compressor.option("hoist_vars"),self=this;if(hoist_funs||hoist_vars){var dirs=[],hoisted=[],vars=new Dictionary,vars_found=0,var_decl=0;self.walk(new TreeWalker(function(node){return node instanceof AST_Scope&&node!==self?!0:node instanceof AST_Var?(++var_decl,!0):void 0})),hoist_vars=hoist_vars&&var_decl>1;var tt=new TreeTransformer(function(node){if(node!==self){if(node instanceof AST_Directive)return dirs.push(node),make_node(AST_EmptyStatement,node);if(node instanceof AST_Defun&&hoist_funs)return hoisted.push(node),make_node(AST_EmptyStatement,node);if(node instanceof AST_Var&&hoist_vars){node.definitions.forEach(function(def){vars.set(def.name.name,def),++vars_found});var seq=node.to_assignments(),p=tt.parent();return p instanceof AST_ForIn&&p.init===node?null==seq?node.definitions[0].name:seq:p instanceof AST_For&&p.init===node?seq:seq?make_node(AST_SimpleStatement,node,{body:seq}):make_node(AST_EmptyStatement,node)}if(node instanceof AST_Scope)return node}});if(self=self.transform(tt),vars_found>0){var defs=[];if(vars.each(function(def,name){self instanceof AST_Lambda&&find_if(function(x){return x.name==def.name.name},self.argnames)?vars.del(name):(def=def.clone(),def.value=null,defs.push(def),vars.set(name,def))}),defs.length>0){for(var i=0;i<self.body.length;){if(self.body[i]instanceof AST_SimpleStatement){var sym,assign,expr=self.body[i].body;if(expr instanceof AST_Assign&&"="==expr.operator&&(sym=expr.left)instanceof AST_Symbol&&vars.has(sym.name)){var def=vars.get(sym.name);if(def.value)break;def.value=expr.right,remove(defs,def),defs.push(def),self.body.splice(i,1);continue}if(expr instanceof AST_Seq&&(assign=expr.car)instanceof AST_Assign&&"="==assign.operator&&(sym=assign.left)instanceof AST_Symbol&&vars.has(sym.name)){var def=vars.get(sym.name);if(def.value)break;def.value=assign.right,remove(defs,def),defs.push(def),self.body[i].body=expr.cdr;continue}}if(self.body[i]instanceof AST_EmptyStatement)self.body.splice(i,1);else{if(!(self.body[i]instanceof AST_BlockStatement))break;var tmp=[i,1].concat(self.body[i].body);self.body.splice.apply(self.body,tmp)}}defs=make_node(AST_Var,self,{definitions:defs}),hoisted.push(defs)}}self.body=dirs.concat(hoisted,self.body)}return self}),OPT(AST_SimpleStatement,function(self,compressor){return compressor.option("side_effects")&&!self.body.has_side_effects()?(compressor.warn("Dropping side-effect-free statement [{file}:{line},{col}]",self.start),make_node(AST_EmptyStatement,self)):self}),OPT(AST_DWLoop,function(self,compressor){var cond=self.condition.evaluate(compressor);if(self.condition=cond[0],!compressor.option("loops"))return self;if(cond.length>1){if(cond[1])return make_node(AST_For,self,{body:self.body});if(self instanceof AST_While&&compressor.option("dead_code")){var a=[];return extract_declarations_from_unreachable_code(compressor,self.body,a),make_node(AST_BlockStatement,self,{body:a})}}return self}),OPT(AST_While,function(self,compressor){return compressor.option("loops")?(self=AST_DWLoop.prototype.optimize.call(self,compressor),self instanceof AST_While&&(if_break_in_loop(self,compressor),self=make_node(AST_For,self,self).transform(compressor)),self):self}),OPT(AST_For,function(self,compressor){var cond=self.condition;if(cond&&(cond=cond.evaluate(compressor),self.condition=cond[0]),!compressor.option("loops"))return self;if(cond&&cond.length>1&&!cond[1]&&compressor.option("dead_code")){var a=[];return self.init instanceof AST_Statement?a.push(self.init):self.init&&a.push(make_node(AST_SimpleStatement,self.init,{body:self.init})),extract_declarations_from_unreachable_code(compressor,self.body,a),make_node(AST_BlockStatement,self,{body:a})}return if_break_in_loop(self,compressor),self}),OPT(AST_If,function(self,compressor){if(!compressor.option("conditionals"))return self;var cond=self.condition.evaluate(compressor);if(self.condition=cond[0],cond.length>1)if(cond[1]){if(compressor.warn("Condition always true [{file}:{line},{col}]",self.condition.start),compressor.option("dead_code")){var a=[];return self.alternative&&extract_declarations_from_unreachable_code(compressor,self.alternative,a),a.push(self.body),make_node(AST_BlockStatement,self,{body:a}).transform(compressor)}}else if(compressor.warn("Condition always false [{file}:{line},{col}]",self.condition.start),compressor.option("dead_code")){var a=[];return extract_declarations_from_unreachable_code(compressor,self.body,a),self.alternative&&a.push(self.alternative),make_node(AST_BlockStatement,self,{body:a}).transform(compressor)}is_empty(self.alternative)&&(self.alternative=null);var negated=self.condition.negate(compressor),negated_is_best=best_of(self.condition,negated)===negated;if(self.alternative&&negated_is_best){negated_is_best=!1,self.condition=negated;var tmp=self.body;self.body=self.alternative||make_node(AST_EmptyStatement),self.alternative=tmp}if(is_empty(self.body)&&is_empty(self.alternative))return make_node(AST_SimpleStatement,self.condition,{body:self.condition}).transform(compressor);if(self.body instanceof AST_SimpleStatement&&self.alternative instanceof AST_SimpleStatement)return make_node(AST_SimpleStatement,self,{body:make_node(AST_Conditional,self,{condition:self.condition,consequent:self.body.body,alternative:self.alternative.body})}).transform(compressor);if(is_empty(self.alternative)&&self.body instanceof AST_SimpleStatement)return negated_is_best?make_node(AST_SimpleStatement,self,{body:make_node(AST_Binary,self,{operator:"||",left:negated,right:self.body.body})}).transform(compressor):make_node(AST_SimpleStatement,self,{body:make_node(AST_Binary,self,{operator:"&&",left:self.condition,right:self.body.body})}).transform(compressor);if(self.body instanceof AST_EmptyStatement&&self.alternative&&self.alternative instanceof AST_SimpleStatement)return make_node(AST_SimpleStatement,self,{body:make_node(AST_Binary,self,{operator:"||",left:self.condition,right:self.alternative.body})}).transform(compressor);if(self.body instanceof AST_Exit&&self.alternative instanceof AST_Exit&&self.body.TYPE==self.alternative.TYPE)return make_node(self.body.CTOR,self,{value:make_node(AST_Conditional,self,{condition:self.condition,consequent:self.body.value||make_node(AST_Undefined,self.body).optimize(compressor),alternative:self.alternative.value||make_node(AST_Undefined,self.alternative).optimize(compressor)})}).transform(compressor);if(self.body instanceof AST_If&&!self.body.alternative&&!self.alternative&&(self.condition=make_node(AST_Binary,self.condition,{operator:"&&",left:self.condition,right:self.body.condition}).transform(compressor),self.body=self.body.body),aborts(self.body)&&self.alternative){var alt=self.alternative;return self.alternative=null,make_node(AST_BlockStatement,self,{body:[self,alt]}).transform(compressor)}if(aborts(self.alternative)){var body=self.body;return self.body=self.alternative,self.condition=negated_is_best?negated:self.condition.negate(compressor),self.alternative=null,make_node(AST_BlockStatement,self,{body:[self,body]}).transform(compressor)}return self}),OPT(AST_Switch,function(self,compressor){if(0==self.body.length&&compressor.option("conditionals"))return make_node(AST_SimpleStatement,self,{body:self.expression}).transform(compressor);for(;;){var last_branch=self.body[self.body.length-1];if(last_branch){var stat=last_branch.body[last_branch.body.length-1];if(stat instanceof AST_Break&&loop_body(compressor.loopcontrol_target(stat.label))===self&&last_branch.body.pop(),last_branch instanceof AST_Default&&0==last_branch.body.length){self.body.pop();continue}}break}var exp=self.expression.evaluate(compressor);out:if(2==exp.length)try{if(self.expression=exp[0],!compressor.option("dead_code"))break out;var value=exp[1],in_if=!1,in_block=!1,started=!1,stopped=!1,ruined=!1,tt=new TreeTransformer(function(node,descend,in_list){if(node instanceof AST_Lambda||node instanceof AST_SimpleStatement)return node;if(node instanceof AST_Switch&&node===self)return node=node.clone(),descend(node,this),ruined?node:make_node(AST_BlockStatement,node,{body:node.body.reduce(function(a,branch){return a.concat(branch.body)},[])}).transform(compressor);if(node instanceof AST_If||node instanceof AST_Try){var save=in_if;return in_if=!in_block,descend(node,this),in_if=save,node}if(node instanceof AST_StatementWithBody||node instanceof AST_Switch){var save=in_block;return in_block=!0,descend(node,this),in_block=save,node}if(node instanceof AST_Break&&this.loopcontrol_target(node.label)===self)return in_if?(ruined=!0,node):in_block?node:(stopped=!0,in_list?MAP.skip:make_node(AST_EmptyStatement,node));if(node instanceof AST_SwitchBranch&&this.parent()===self){if(stopped)return MAP.skip;if(node instanceof AST_Case){var exp=node.expression.evaluate(compressor);if(exp.length<2)throw self;return exp[1]===value||started?(started=!0,aborts(node)&&(stopped=!0),descend(node,this),node):MAP.skip}return descend(node,this),node}});tt.stack=compressor.stack.slice(),self=self.transform(tt)}catch(ex){if(ex!==self)throw ex}return self}),OPT(AST_Case,function(self,compressor){return self.body=tighten_body(self.body,compressor),self}),OPT(AST_Try,function(self,compressor){return self.body=tighten_body(self.body,compressor),self}),AST_Definitions.DEFMETHOD("remove_initializers",function(){this.definitions.forEach(function(def){def.value=null})}),AST_Definitions.DEFMETHOD("to_assignments",function(){var assignments=this.definitions.reduce(function(a,def){if(def.value){var name=make_node(AST_SymbolRef,def.name,def.name);a.push(make_node(AST_Assign,def,{operator:"=",left:name,right:def.value}))}return a},[]);return 0==assignments.length?null:AST_Seq.from_array(assignments)}),OPT(AST_Definitions,function(self){return 0==self.definitions.length?make_node(AST_EmptyStatement,self):self}),OPT(AST_Function,function(self,compressor){return self=AST_Lambda.prototype.optimize.call(self,compressor),compressor.option("unused")&&self.name&&self.name.unreferenced()&&(self.name=null),self}),OPT(AST_Call,function(self,compressor){if(compressor.option("unsafe")){var exp=self.expression;if(exp instanceof AST_SymbolRef&&exp.undeclared())switch(exp.name){case"Array":if(1!=self.args.length)return make_node(AST_Array,self,{elements:self.args});break;case"Object":if(0==self.args.length)return make_node(AST_Object,self,{properties:[]});break;case"String":return 0==self.args.length?make_node(AST_String,self,{value:""}):make_node(AST_Binary,self,{left:self.args[0],operator:"+",right:make_node(AST_String,self,{value:""})});case"Function":if(all(self.args,function(x){return x instanceof AST_String}))try{var code="(function("+self.args.slice(0,-1).map(function(arg){return arg.value}).join(",")+"){"+self.args[self.args.length-1].value+"})()",ast=parse(code);ast.figure_out_scope();var comp=new Compressor(compressor.options);ast=ast.transform(comp),ast.figure_out_scope(),ast.mangle_names();var fun=ast.body[0].body.expression,args=fun.argnames.map(function(arg,i){return make_node(AST_String,self.args[i],{value:arg.print_to_string()})}),code=OutputStream();return AST_BlockStatement.prototype._codegen.call(fun,fun,code),code=code.toString().replace(/^\{|\}$/g,""),args.push(make_node(AST_String,self.args[self.args.length-1],{value:code})),self.args=args,self}catch(ex){ex instanceof JS_Parse_Error?(compressor.warn("Error parsing code passed to new Function [{file}:{line},{col}]",self.args[self.args.length-1].start),compressor.warn(ex.toString())):console.log(ex)}}else if(exp instanceof AST_Dot&&"toString"==exp.property&&0==self.args.length)return make_node(AST_Binary,self,{left:make_node(AST_String,self,{value:""}),operator:"+",right:exp.expression}).transform(compressor)}return compressor.option("side_effects")&&self.expression instanceof AST_Function&&0==self.args.length&&!AST_Block.prototype.has_side_effects.call(self.expression)?make_node(AST_Undefined,self).transform(compressor):self}),OPT(AST_New,function(self,compressor){if(compressor.option("unsafe")){var exp=self.expression;if(exp instanceof AST_SymbolRef&&exp.undeclared())switch(exp.name){case"Object":case"RegExp":case"Function":case"Error":case"Array":return make_node(AST_Call,self,self).transform(compressor)}}return self}),OPT(AST_Seq,function(self,compressor){if(!compressor.option("side_effects"))return self;if(!self.car.has_side_effects()){var p;if(!(self.cdr instanceof AST_SymbolRef&&"eval"==self.cdr.name&&self.cdr.undeclared()&&(p=compressor.parent())instanceof AST_Call&&p.expression===self))return self.cdr}if(compressor.option("cascade")){if(self.car instanceof AST_Assign&&!self.car.left.has_side_effects()&&self.car.left.equivalent_to(self.cdr))return self.car;if(!self.car.has_side_effects()&&!self.cdr.has_side_effects()&&self.car.equivalent_to(self.cdr))return self.car}return self}),AST_Unary.DEFMETHOD("lift_sequences",function(compressor){if(compressor.option("sequences")&&this.expression instanceof AST_Seq){var seq=this.expression,x=seq.to_array();return this.expression=x.pop(),x.push(this),seq=AST_Seq.from_array(x).transform(compressor)}return this}),OPT(AST_UnaryPostfix,function(self,compressor){return self.lift_sequences(compressor)}),OPT(AST_UnaryPrefix,function(self,compressor){self=self.lift_sequences(compressor);var e=self.expression;if(compressor.option("booleans")&&compressor.in_boolean_context()){switch(self.operator){case"!":if(e instanceof AST_UnaryPrefix&&"!"==e.operator)return e.expression;break;case"typeof":return compressor.warn("Boolean expression always true [{file}:{line},{col}]",self.start),make_node(AST_True,self)}e instanceof AST_Binary&&"!"==self.operator&&(self=best_of(self,e.negate(compressor)))}return self.evaluate(compressor)[0]}),AST_Binary.DEFMETHOD("lift_sequences",function(compressor){if(compressor.option("sequences")){if(this.left instanceof AST_Seq){var seq=this.left,x=seq.to_array();return this.left=x.pop(),x.push(this),seq=AST_Seq.from_array(x).transform(compressor)}if(this.right instanceof AST_Seq&&"||"!=this.operator&&"&&"!=this.operator&&!this.left.has_side_effects()){var seq=this.right,x=seq.to_array();return this.right=x.pop(),x.push(this),seq=AST_Seq.from_array(x).transform(compressor)}}return this});var commutativeOperators=makePredicate("== === != !== * & | ^");OPT(AST_Binary,function(self,compressor){var reverse=compressor.has_directive("use asm")?noop:function(op,force){if(force||!self.left.has_side_effects()&&!self.right.has_side_effects()){op&&(self.operator=op);var tmp=self.left;self.left=self.right,self.right=tmp}};if(commutativeOperators(self.operator)&&self.right instanceof AST_Constant&&!(self.left instanceof AST_Constant)&&reverse(null,!0),self=self.lift_sequences(compressor),compressor.option("comparisons"))switch(self.operator){case"===":case"!==":(self.left.is_string(compressor)&&self.right.is_string(compressor)||self.left.is_boolean()&&self.right.is_boolean())&&(self.operator=self.operator.substr(0,2));case"==":case"!=":self.left instanceof AST_String&&"undefined"==self.left.value&&self.right instanceof AST_UnaryPrefix&&"typeof"==self.right.operator&&compressor.option("unsafe")&&(self.right.expression instanceof AST_SymbolRef&&self.right.expression.undeclared()||(self.right=self.right.expression,self.left=make_node(AST_Undefined,self.left).optimize(compressor),2==self.operator.length&&(self.operator+="=")))
}if(compressor.option("booleans")&&compressor.in_boolean_context())switch(self.operator){case"&&":var ll=self.left.evaluate(compressor),rr=self.right.evaluate(compressor);if(ll.length>1&&!ll[1]||rr.length>1&&!rr[1])return compressor.warn("Boolean && always false [{file}:{line},{col}]",self.start),make_node(AST_False,self);if(ll.length>1&&ll[1])return rr[0];if(rr.length>1&&rr[1])return ll[0];break;case"||":var ll=self.left.evaluate(compressor),rr=self.right.evaluate(compressor);if(ll.length>1&&ll[1]||rr.length>1&&rr[1])return compressor.warn("Boolean || always true [{file}:{line},{col}]",self.start),make_node(AST_True,self);if(ll.length>1&&!ll[1])return rr[0];if(rr.length>1&&!rr[1])return ll[0];break;case"+":var ll=self.left.evaluate(compressor),rr=self.right.evaluate(compressor);if(ll.length>1&&ll[0]instanceof AST_String&&ll[1]||rr.length>1&&rr[0]instanceof AST_String&&rr[1])return compressor.warn("+ in boolean context always true [{file}:{line},{col}]",self.start),make_node(AST_True,self)}var exp=self.evaluate(compressor);if(exp.length>1&&best_of(exp[0],self)!==self)return exp[0];if(compressor.option("comparisons")){if(!(compressor.parent()instanceof AST_Binary)||compressor.parent()instanceof AST_Assign){var negated=make_node(AST_UnaryPrefix,self,{operator:"!",expression:self.negate(compressor)});self=best_of(self,negated)}switch(self.operator){case"<":reverse(">");break;case"<=":reverse(">=")}}return"+"==self.operator&&self.right instanceof AST_String&&""===self.right.getValue()&&self.left instanceof AST_Binary&&"+"==self.left.operator&&self.left.is_string(compressor)?self.left:self}),OPT(AST_SymbolRef,function(self,compressor){if(self.undeclared()){var defines=compressor.option("global_defs");if(defines&&defines.hasOwnProperty(self.name))return make_node_from_constant(compressor,defines[self.name],self);switch(self.name){case"undefined":return make_node(AST_Undefined,self);case"NaN":return make_node(AST_NaN,self);case"Infinity":return make_node(AST_Infinity,self)}}return self}),OPT(AST_Undefined,function(self,compressor){if(compressor.option("unsafe")){var scope=compressor.find_parent(AST_Scope),undef=scope.find_variable("undefined");if(undef){var ref=make_node(AST_SymbolRef,self,{name:"undefined",scope:scope,thedef:undef});return ref.reference(),ref}}return self});var ASSIGN_OPS=["+","-","/","*","%",">>","<<",">>>","|","^","&"];OPT(AST_Assign,function(self,compressor){return self=self.lift_sequences(compressor),"="==self.operator&&self.left instanceof AST_SymbolRef&&self.right instanceof AST_Binary&&self.right.left instanceof AST_SymbolRef&&self.right.left.name==self.left.name&&member(self.right.operator,ASSIGN_OPS)&&(self.operator=self.right.operator+"=",self.right=self.right.right),self}),OPT(AST_Conditional,function(self,compressor){if(!compressor.option("conditionals"))return self;if(self.condition instanceof AST_Seq){var car=self.condition.car;return self.condition=self.condition.cdr,AST_Seq.cons(car,self)}var cond=self.condition.evaluate(compressor);if(cond.length>1)return cond[1]?(compressor.warn("Condition always true [{file}:{line},{col}]",self.start),self.consequent):(compressor.warn("Condition always false [{file}:{line},{col}]",self.start),self.alternative);var negated=cond[0].negate(compressor);best_of(cond[0],negated)===negated&&(self=make_node(AST_Conditional,self,{condition:negated,consequent:self.alternative,alternative:self.consequent}));var consequent=self.consequent,alternative=self.alternative;return consequent instanceof AST_Assign&&alternative instanceof AST_Assign&&consequent.operator==alternative.operator&&consequent.left.equivalent_to(alternative.left)&&(self=make_node(AST_Assign,self,{operator:consequent.operator,left:consequent.left,right:make_node(AST_Conditional,self,{condition:self.condition,consequent:consequent.right,alternative:alternative.right})})),self}),OPT(AST_Boolean,function(self,compressor){if(compressor.option("booleans")){var p=compressor.parent();return p instanceof AST_Binary&&("=="==p.operator||"!="==p.operator)?(compressor.warn("Non-strict equality against boolean: {operator} {value} [{file}:{line},{col}]",{operator:p.operator,value:self.value,file:p.start.file,line:p.start.line,col:p.start.col}),make_node(AST_Number,self,{value:+self.value})):make_node(AST_UnaryPrefix,self,{operator:"!",expression:make_node(AST_Number,self,{value:1-self.value})})}return self}),OPT(AST_Sub,function(self,compressor){var prop=self.property;return prop instanceof AST_String&&compressor.option("properties")&&(prop=prop.getValue(),RESERVED_WORDS(prop)?compressor.option("screw_ie8"):is_identifier_string(prop))?make_node(AST_Dot,self,{expression:self.expression,property:prop}):self}),OPT(AST_Array,literals_in_boolean_context),OPT(AST_Object,literals_in_boolean_context),OPT(AST_RegExp,literals_in_boolean_context)}(),function(){function From_Moz_Unary(M){var prefix="prefix"in M?M.prefix:"UnaryExpression"==M.type?!0:!1;return new(prefix?AST_UnaryPrefix:AST_UnaryPostfix)({start:my_start_token(M),end:my_end_token(M),operator:M.operator,expression:from_moz(M.argument)})}function my_start_token(moznode){return new AST_Token({file:moznode.loc&&moznode.loc.source,line:moznode.loc&&moznode.loc.start.line,col:moznode.loc&&moznode.loc.start.column,pos:moznode.start,endpos:moznode.start})}function my_end_token(moznode){return new AST_Token({file:moznode.loc&&moznode.loc.source,line:moznode.loc&&moznode.loc.end.line,col:moznode.loc&&moznode.loc.end.column,pos:moznode.end,endpos:moznode.end})}function map(moztype,mytype,propmap){var moz_to_me="function From_Moz_"+moztype+"(M){\n";return moz_to_me+="return new mytype({\nstart: my_start_token(M),\nend: my_end_token(M)",propmap&&propmap.split(/\s*,\s*/).forEach(function(prop){var m=/([a-z0-9$_]+)(=|@|>|%)([a-z0-9$_]+)/i.exec(prop);if(!m)throw new Error("Can't understand property map: "+prop);var moz="M."+m[1],how=m[2],my=m[3];if(moz_to_me+=",\n"+my+": ","@"==how)moz_to_me+=moz+".map(from_moz)";else if(">"==how)moz_to_me+="from_moz("+moz+")";else if("="==how)moz_to_me+=moz;else{if("%"!=how)throw new Error("Can't understand operator in propmap: "+prop);moz_to_me+="from_moz("+moz+").body"}}),moz_to_me+="\n})}",moz_to_me=new Function("mytype","my_start_token","my_end_token","from_moz","return("+moz_to_me+")")(mytype,my_start_token,my_end_token,from_moz),MOZ_TO_ME[moztype]=moz_to_me}function from_moz(node){FROM_MOZ_STACK.push(node);var ret=null!=node?MOZ_TO_ME[node.type](node):null;return FROM_MOZ_STACK.pop(),ret}var MOZ_TO_ME={TryStatement:function(M){return new AST_Try({start:my_start_token(M),end:my_end_token(M),body:from_moz(M.block).body,bcatch:from_moz(M.handlers[0]),bfinally:M.finalizer?new AST_Finally(from_moz(M.finalizer)):null})},CatchClause:function(M){return new AST_Catch({start:my_start_token(M),end:my_end_token(M),argname:from_moz(M.param),body:from_moz(M.body).body})},ObjectExpression:function(M){return new AST_Object({start:my_start_token(M),end:my_end_token(M),properties:M.properties.map(function(prop){var key=prop.key,name="Identifier"==key.type?key.name:key.value,args={start:my_start_token(key),end:my_end_token(prop.value),key:name,value:from_moz(prop.value)};switch(prop.kind){case"init":return new AST_ObjectKeyVal(args);case"set":return args.value.name=from_moz(key),new AST_ObjectSetter(args);case"get":return args.value.name=from_moz(key),new AST_ObjectGetter(args)}})})},SequenceExpression:function(M){return AST_Seq.from_array(M.expressions.map(from_moz))},MemberExpression:function(M){return new(M.computed?AST_Sub:AST_Dot)({start:my_start_token(M),end:my_end_token(M),property:M.computed?from_moz(M.property):M.property.name,expression:from_moz(M.object)})},SwitchCase:function(M){return new(M.test?AST_Case:AST_Default)({start:my_start_token(M),end:my_end_token(M),expression:from_moz(M.test),body:M.consequent.map(from_moz)})},Literal:function(M){var val=M.value,args={start:my_start_token(M),end:my_end_token(M)};if(null===val)return new AST_Null(args);switch(typeof val){case"string":return args.value=val,new AST_String(args);case"number":return args.value=val,new AST_Number(args);case"boolean":return new(val?AST_True:AST_False)(args);default:return args.value=val,new AST_RegExp(args)}},UnaryExpression:From_Moz_Unary,UpdateExpression:From_Moz_Unary,Identifier:function(M){var p=FROM_MOZ_STACK[FROM_MOZ_STACK.length-2];return new("this"==M.name?AST_This:"LabeledStatement"==p.type?AST_Label:"VariableDeclarator"==p.type&&p.id===M?"const"==p.kind?AST_SymbolConst:AST_SymbolVar:"FunctionExpression"==p.type?p.id===M?AST_SymbolLambda:AST_SymbolFunarg:"FunctionDeclaration"==p.type?p.id===M?AST_SymbolDefun:AST_SymbolFunarg:"CatchClause"==p.type?AST_SymbolCatch:"BreakStatement"==p.type||"ContinueStatement"==p.type?AST_LabelRef:AST_SymbolRef)({start:my_start_token(M),end:my_end_token(M),name:M.name})}};map("Node",AST_Node),map("Program",AST_Toplevel,"body@body"),map("Function",AST_Function,"id>name, params@argnames, body%body"),map("EmptyStatement",AST_EmptyStatement),map("BlockStatement",AST_BlockStatement,"body@body"),map("ExpressionStatement",AST_SimpleStatement,"expression>body"),map("IfStatement",AST_If,"test>condition, consequent>body, alternate>alternative"),map("LabeledStatement",AST_LabeledStatement,"label>label, body>body"),map("BreakStatement",AST_Break,"label>label"),map("ContinueStatement",AST_Continue,"label>label"),map("WithStatement",AST_With,"object>expression, body>body"),map("SwitchStatement",AST_Switch,"discriminant>expression, cases@body"),map("ReturnStatement",AST_Return,"argument>value"),map("ThrowStatement",AST_Throw,"argument>value"),map("WhileStatement",AST_While,"test>condition, body>body"),map("DoWhileStatement",AST_Do,"test>condition, body>body"),map("ForStatement",AST_For,"init>init, test>condition, update>step, body>body"),map("ForInStatement",AST_ForIn,"left>init, right>object, body>body"),map("DebuggerStatement",AST_Debugger),map("FunctionDeclaration",AST_Defun,"id>name, params@argnames, body%body"),map("VariableDeclaration",AST_Var,"declarations@definitions"),map("VariableDeclarator",AST_VarDef,"id>name, init>value"),map("ThisExpression",AST_This),map("ArrayExpression",AST_Array,"elements@elements"),map("FunctionExpression",AST_Function,"id>name, params@argnames, body%body"),map("BinaryExpression",AST_Binary,"operator=operator, left>left, right>right"),map("AssignmentExpression",AST_Assign,"operator=operator, left>left, right>right"),map("LogicalExpression",AST_Binary,"operator=operator, left>left, right>right"),map("ConditionalExpression",AST_Conditional,"test>condition, consequent>consequent, alternate>alternative"),map("NewExpression",AST_New,"callee>expression, arguments@args"),map("CallExpression",AST_Call,"callee>expression, arguments@args");var FROM_MOZ_STACK=null;AST_Node.from_mozilla_ast=function(node){var save_stack=FROM_MOZ_STACK;FROM_MOZ_STACK=[];var ast=from_moz(node);return FROM_MOZ_STACK=save_stack,ast}}(),exports.array_to_hash=array_to_hash,exports.slice=slice,exports.characters=characters,exports.member=member,exports.find_if=find_if,exports.repeat_string=repeat_string,exports.DefaultsError=DefaultsError,exports.defaults=defaults,exports.merge=merge,exports.noop=noop,exports.MAP=MAP,exports.push_uniq=push_uniq,exports.string_template=string_template,exports.remove=remove,exports.mergeSort=mergeSort,exports.set_difference=set_difference,exports.set_intersection=set_intersection,exports.makePredicate=makePredicate,exports.all=all,exports.Dictionary=Dictionary,exports.DEFNODE=DEFNODE,exports.AST_Token=AST_Token,exports.AST_Node=AST_Node,exports.AST_Statement=AST_Statement,exports.AST_Debugger=AST_Debugger,exports.AST_Directive=AST_Directive,exports.AST_SimpleStatement=AST_SimpleStatement,exports.walk_body=walk_body,exports.AST_Block=AST_Block,exports.AST_BlockStatement=AST_BlockStatement,exports.AST_EmptyStatement=AST_EmptyStatement,exports.AST_StatementWithBody=AST_StatementWithBody,exports.AST_LabeledStatement=AST_LabeledStatement,exports.AST_DWLoop=AST_DWLoop,exports.AST_Do=AST_Do,exports.AST_While=AST_While,exports.AST_For=AST_For,exports.AST_ForIn=AST_ForIn,exports.AST_With=AST_With,exports.AST_Scope=AST_Scope,exports.AST_Toplevel=AST_Toplevel,exports.AST_Lambda=AST_Lambda,exports.AST_Accessor=AST_Accessor,exports.AST_Function=AST_Function,exports.AST_Defun=AST_Defun,exports.AST_Jump=AST_Jump,exports.AST_Exit=AST_Exit,exports.AST_Return=AST_Return,exports.AST_Throw=AST_Throw,exports.AST_LoopControl=AST_LoopControl,exports.AST_Break=AST_Break,exports.AST_Continue=AST_Continue,exports.AST_If=AST_If,exports.AST_Switch=AST_Switch,exports.AST_SwitchBranch=AST_SwitchBranch,exports.AST_Default=AST_Default,exports.AST_Case=AST_Case,exports.AST_Try=AST_Try,exports.AST_Catch=AST_Catch,exports.AST_Finally=AST_Finally,exports.AST_Definitions=AST_Definitions,exports.AST_Var=AST_Var,exports.AST_Const=AST_Const,exports.AST_VarDef=AST_VarDef,exports.AST_Call=AST_Call,exports.AST_New=AST_New,exports.AST_Seq=AST_Seq,exports.AST_PropAccess=AST_PropAccess,exports.AST_Dot=AST_Dot,exports.AST_Sub=AST_Sub,exports.AST_Unary=AST_Unary,exports.AST_UnaryPrefix=AST_UnaryPrefix,exports.AST_UnaryPostfix=AST_UnaryPostfix,exports.AST_Binary=AST_Binary,exports.AST_Conditional=AST_Conditional,exports.AST_Assign=AST_Assign,exports.AST_Array=AST_Array,exports.AST_Object=AST_Object,exports.AST_ObjectProperty=AST_ObjectProperty,exports.AST_ObjectKeyVal=AST_ObjectKeyVal,exports.AST_ObjectSetter=AST_ObjectSetter,exports.AST_ObjectGetter=AST_ObjectGetter,exports.AST_Symbol=AST_Symbol,exports.AST_SymbolAccessor=AST_SymbolAccessor,exports.AST_SymbolDeclaration=AST_SymbolDeclaration,exports.AST_SymbolVar=AST_SymbolVar,exports.AST_SymbolConst=AST_SymbolConst,exports.AST_SymbolFunarg=AST_SymbolFunarg,exports.AST_SymbolDefun=AST_SymbolDefun,exports.AST_SymbolLambda=AST_SymbolLambda,exports.AST_SymbolCatch=AST_SymbolCatch,exports.AST_Label=AST_Label,exports.AST_SymbolRef=AST_SymbolRef,exports.AST_LabelRef=AST_LabelRef,exports.AST_This=AST_This,exports.AST_Constant=AST_Constant,exports.AST_String=AST_String,exports.AST_Number=AST_Number,exports.AST_RegExp=AST_RegExp,exports.AST_Atom=AST_Atom,exports.AST_Null=AST_Null,exports.AST_NaN=AST_NaN,exports.AST_Undefined=AST_Undefined,exports.AST_Hole=AST_Hole,exports.AST_Infinity=AST_Infinity,exports.AST_Boolean=AST_Boolean,exports.AST_False=AST_False,exports.AST_True=AST_True,exports.TreeWalker=TreeWalker,exports.KEYWORDS=KEYWORDS,exports.KEYWORDS_ATOM=KEYWORDS_ATOM,exports.RESERVED_WORDS=RESERVED_WORDS,exports.KEYWORDS_BEFORE_EXPRESSION=KEYWORDS_BEFORE_EXPRESSION,exports.OPERATOR_CHARS=OPERATOR_CHARS,exports.RE_HEX_NUMBER=RE_HEX_NUMBER,exports.RE_OCT_NUMBER=RE_OCT_NUMBER,exports.RE_DEC_NUMBER=RE_DEC_NUMBER,exports.OPERATORS=OPERATORS,exports.WHITESPACE_CHARS=WHITESPACE_CHARS,exports.PUNC_BEFORE_EXPRESSION=PUNC_BEFORE_EXPRESSION,exports.PUNC_CHARS=PUNC_CHARS,exports.REGEXP_MODIFIERS=REGEXP_MODIFIERS,exports.UNICODE=UNICODE,exports.is_letter=is_letter,exports.is_digit=is_digit,exports.is_alphanumeric_char=is_alphanumeric_char,exports.is_unicode_combining_mark=is_unicode_combining_mark,exports.is_unicode_connector_punctuation=is_unicode_connector_punctuation,exports.is_identifier=is_identifier,exports.is_identifier_start=is_identifier_start,exports.is_identifier_char=is_identifier_char,exports.is_identifier_string=is_identifier_string,exports.parse_js_number=parse_js_number,exports.JS_Parse_Error=JS_Parse_Error,exports.js_error=js_error,exports.is_token=is_token,exports.EX_EOF=EX_EOF,exports.tokenizer=tokenizer,exports.UNARY_PREFIX=UNARY_PREFIX,exports.UNARY_POSTFIX=UNARY_POSTFIX,exports.ASSIGNMENT=ASSIGNMENT,exports.PRECEDENCE=PRECEDENCE,exports.STATEMENTS_WITH_LABELS=STATEMENTS_WITH_LABELS,exports.ATOMIC_START_TOKEN=ATOMIC_START_TOKEN,exports.parse=parse,exports.TreeTransformer=TreeTransformer,exports.SymbolDef=SymbolDef,exports.base54=base54,exports.OutputStream=OutputStream,exports.Compressor=Compressor,exports.SourceMap=SourceMap}({},function(){return exports}());var UglifyJS=exports.UglifyJS;UglifyJS.AST_Node.warn_function=function(txt){logger.error("uglifyjs2 WARN: "+txt)},exports.minify=function(files,options,name){options=UglifyJS.defaults(options,{outSourceMap:null,sourceRoot:null,inSourceMap:null,fromString:!1,warnings:!1,mangle:{},output:null,compress:{}}),"string"==typeof files&&(files=[files]),UglifyJS.base54.reset();var toplevel=null;if(files.forEach(function(file){var code=options.fromString?file:rjsFile.readFile(file,"utf8");toplevel=UglifyJS.parse(code,{filename:options.fromString?name:file,toplevel:toplevel})}),options.compress){var compress={warnings:options.warnings};UglifyJS.merge(compress,options.compress),toplevel.figure_out_scope();var sq=UglifyJS.Compressor(compress);toplevel=toplevel.transform(sq)}options.mangle&&(toplevel.figure_out_scope(),toplevel.compute_char_frequency(),toplevel.mangle_names(options.mangle));var inMap=options.inSourceMap,output={};"string"==typeof options.inSourceMap&&(inMap=rjsFile.readFile(options.inSourceMap,"utf8")),options.outSourceMap&&(output.source_map=UglifyJS.SourceMap({file:options.outSourceMap,orig:inMap,root:options.sourceRoot})),options.output&&UglifyJS.merge(output,options.output);var stream=UglifyJS.OutputStream(output);return toplevel.print(stream),{code:stream+"",map:output.source_map+""}},exports.describe_ast=function(){function doitem(ctor){out.print("AST_"+ctor.TYPE);var props=ctor.SELF_PROPS.filter(function(prop){return!/^\$/.test(prop)});props.length>0&&(out.space(),out.with_parens(function(){props.forEach(function(prop,i){i&&out.space(),out.print(prop)})})),ctor.documentation&&(out.space(),out.print_string(ctor.documentation)),ctor.SUBCLASSES.length>0&&(out.space(),out.with_block(function(){ctor.SUBCLASSES.forEach(function(ctor){out.indent(),doitem(ctor),out.newline()})}))}var out=UglifyJS.OutputStream({beautify:!0});return doitem(UglifyJS.AST_Node),out+""}}),define("parse",["./esprimaAdapter","lang"],function(esprima,lang){"use strict";function arrayToString(ary){var output="[";return ary&&ary.forEach(function(item,i){output+=(i>0?",":"")+'"'+lang.jsEscape(item)+'"'}),output+="]"}function traverse(object,visitor){var key,child;if(object){if(visitor.call(null,object)===!1)return!1;for(key in object)if(object.hasOwnProperty(key)&&(child=object[key],"object"==typeof child&&null!==child&&traverse(child,visitor)===!1))return!1}}function traverseBroad(object,visitor){var key,child;if(object){if(visitor.call(null,object)===!1)return!1;for(key in object)object.hasOwnProperty(key)&&(child=object[key],"object"==typeof child&&null!==child&&traverse(child,visitor))}}function getValidDeps(node){if(node&&"ArrayExpression"===node.type&&node.elements){var deps=[];return node.elements.some(function(elem){"Literal"===elem.type&&deps.push(elem.value)}),deps.length?deps:void 0}}function parse(moduleName,fileName,fileContents,options){options=options||{};var i,moduleCall,depString,moduleDeps=[],result="",moduleList=[],needsDefine=!0,astRoot=esprima.parse(fileContents);if(parse.recurse(astRoot,function(callName,config,name,deps){return deps||(deps=[]),"define"!==callName||name&&name!==moduleName||(needsDefine=!1),name?moduleList.push({name:name,deps:deps}):moduleDeps=moduleDeps.concat(deps),!!options.findNestedDependencies},options),options.insertNeedsDefine&&needsDefine&&(result+='require.needsDefine("'+moduleName+'");'),moduleDeps.length||moduleList.length){for(i=0;i<moduleList.length;i++)moduleCall=moduleList[i],result&&(result+="\n"),moduleCall.name===moduleName&&(moduleCall.deps=moduleCall.deps.concat(moduleDeps),moduleDeps=[]),depString=arrayToString(moduleCall.deps),result+='define("'+moduleCall.name+'",'+depString+");";moduleDeps.length&&(result&&(result+="\n"),depString=arrayToString(moduleDeps),result+='define("'+moduleName+'",'+depString+");")}return result||null}var argPropName="arguments";return parse.traverse=traverse,parse.traverseBroad=traverseBroad,parse.recurse=function(object,onMatch,options){var key,child,hasHas=options&&options.has;if(object)if(hasHas&&"IfStatement"===object.type&&object.test.type&&"Literal"===object.test.type)object.test.value?this.recurse(object.consequent,onMatch,options):this.recurse(object.alternate,onMatch,options);else{if(this.parseNode(object,onMatch)===!1)return;for(key in object)object.hasOwnProperty(key)&&(child=object[key],"object"==typeof child&&null!==child&&this.recurse(child,onMatch,options))}},parse.definesRequire=function(fileName,fileContents){var found=!1;return traverse(esprima.parse(fileContents),function(node){return parse.hasDefineAmd(node)?(found=!0,!1):void 0}),found},parse.getAnonDeps=function(fileName,fileContents){var astRoot="string"==typeof fileContents?esprima.parse(fileContents):fileContents,defFunc=this.findAnonDefineFactory(astRoot);return parse.getAnonDepsFromNode(defFunc)},parse.getAnonDepsFromNode=function(node){var funcArgLength,deps=[];return node&&(this.findRequireDepNames(node,deps),funcArgLength=node.params&&node.params.length,funcArgLength&&(deps=(funcArgLength>1?["require","exports","module"]:["require"]).concat(deps))),deps},parse.isDefineNodeWithArgs=function(node){return node&&"CallExpression"===node.type&&node.callee&&"Identifier"===node.callee.type&&"define"===node.callee.name&&node[argPropName]},parse.findAnonDefineFactory=function(node){var match;return traverse(node,function(node){var arg0,arg1;if(parse.isDefineNodeWithArgs(node)){if(arg0=node[argPropName][0],arg0&&"FunctionExpression"===arg0.type)return match=arg0,!1;if(arg1=node[argPropName][1],"Literal"===arg0.type&&arg1&&"FunctionExpression"===arg1.type)return match=arg1,!1}}),match},parse.findConfig=function(fileContents){var jsConfig,foundConfig,stringData,foundRange,quote,quoteMatch,quoteRegExp=/(:\s|\[\s*)(['"])/,astRoot=esprima.parse(fileContents,{loc:!0});return traverse(astRoot,function(node){var arg,requireType=parse.hasRequire(node);if(!requireType||"require"!==requireType&&"requirejs"!==requireType&&"requireConfig"!==requireType&&"requirejsConfig"!==requireType){if(arg=parse.getRequireObjectLiteral(node))return stringData=parse.nodeToString(fileContents,arg),jsConfig=stringData.value,foundRange=stringData.range,!1}else if(arg=node[argPropName]&&node[argPropName][0],arg&&"ObjectExpression"===arg.type)return stringData=parse.nodeToString(fileContents,arg),jsConfig=stringData.value,foundRange=stringData.range,!1}),jsConfig&&(quoteMatch=quoteRegExp.exec(jsConfig),quote=quoteMatch&&quoteMatch[2]||'"',foundConfig=eval("("+jsConfig+")")),{config:foundConfig,range:foundRange,quote:quote}},parse.getRequireObjectLiteral=function(node){return node.id&&"Identifier"===node.id.type&&("require"===node.id.name||"requirejs"===node.id.name)&&node.init&&"ObjectExpression"===node.init.type?node.init:void 0},parse.renameNamespace=function(fileContents,ns){var lines,locs=[],astRoot=esprima.parse(fileContents,{loc:!0});return parse.recurse(astRoot,function(callName,config,name,deps,node){return locs.push(node.loc),"define"!==callName},{}),locs.length&&(lines=fileContents.split("\n"),locs.reverse(),locs.forEach(function(loc){var startIndex=loc.start.column,lineIndex=loc.start.line-1,line=lines[lineIndex];lines[lineIndex]=line.substring(0,startIndex)+ns+"."+line.substring(startIndex,line.length)}),fileContents=lines.join("\n")),fileContents},parse.findDependencies=function(fileName,fileContents,options){var dependencies=[],astRoot=esprima.parse(fileContents);return parse.recurse(astRoot,function(callName,config,name,deps){deps&&(dependencies=dependencies.concat(deps))},options),dependencies},parse.findCjsDependencies=function(fileName,fileContents){var dependencies=[];return traverse(esprima.parse(fileContents),function(node){var arg;node&&"CallExpression"===node.type&&node.callee&&"Identifier"===node.callee.type&&"require"===node.callee.name&&node[argPropName]&&1===node[argPropName].length&&(arg=node[argPropName][0],"Literal"===arg.type&&dependencies.push(arg.value))}),dependencies},parse.hasDefDefine=function(node){return"FunctionDeclaration"===node.type&&node.id&&"Identifier"===node.id.type&&"define"===node.id.name},parse.hasDefineAmd=function(node){return node&&"AssignmentExpression"===node.type&&node.left&&"MemberExpression"===node.left.type&&node.left.object&&"define"===node.left.object.name&&node.left.property&&"amd"===node.left.property.name},parse.refsDefineAmd=function(node){return node&&"MemberExpression"===node.type&&node.object&&"define"===node.object.name&&"Identifier"===node.object.type&&node.property&&"amd"===node.property.name&&"Identifier"===node.property.type},parse.hasRequire=function(node){var callName,c=node&&node.callee;return node&&"CallExpression"===node.type&&c&&("Identifier"!==c.type||"require"!==c.name&&"requirejs"!==c.name?"MemberExpression"===c.type&&c.object&&"Identifier"===c.object.type&&("require"===c.object.name||"requirejs"===c.object.name)&&c.property&&"config"===c.property.name&&(callName=c.object.name+"Config"):callName=c.name),callName},parse.hasDefine=function(node){return node&&"CallExpression"===node.type&&node.callee&&"Identifier"===node.callee.type&&"define"===node.callee.name},parse.getNamedDefine=function(fileContents){var name;return traverse(esprima.parse(fileContents),function(node){return node&&"CallExpression"===node.type&&node.callee&&"Identifier"===node.callee.type&&"define"===node.callee.name&&node[argPropName]&&node[argPropName][0]&&"Literal"===node[argPropName][0].type?(name=node[argPropName][0].value,!1):void 0}),name},parse.usesAmdOrRequireJs=function(fileName,fileContents){var uses;return traverse(esprima.parse(fileContents),function(node){var type,callName,arg;parse.hasDefDefine(node)?type="declaresDefine":parse.hasDefineAmd(node)?type="defineAmd":(callName=parse.hasRequire(node),callName?(arg=node[argPropName]&&node[argPropName][0],!arg||"ObjectExpression"!==arg.type&&"ArrayExpression"!==arg.type||(type=callName)):parse.hasDefine(node)&&(type="define")),type&&(uses||(uses={}),uses[type]=!0)}),uses},parse.usesCommonJs=function(fileName,fileContents){var uses=null,assignsExports=!1;return traverse(esprima.parse(fileContents),function(node){var type,exp=node.expression||node.init;"Identifier"!==node.type||"__dirname"!==node.name&&"__filename"!==node.name?"VariableDeclarator"===node.type&&node.id&&"Identifier"===node.id.type&&"exports"===node.id.name?type="varExports":exp&&"AssignmentExpression"===exp.type&&exp.left&&"MemberExpression"===exp.left.type&&exp.left.object?"module"===exp.left.object.name&&exp.left.property&&"exports"===exp.left.property.name?type="moduleExports":"exports"===exp.left.object.name&&exp.left.property&&(type="exports"):node&&"CallExpression"===node.type&&node.callee&&"Identifier"===node.callee.type&&"require"===node.callee.name&&node[argPropName]&&1===node[argPropName].length&&"Literal"===node[argPropName][0].type&&(type="require"):type=node.name.substring(2),type&&("varExports"===type?assignsExports=!0:"exports"===type&&assignsExports||(uses||(uses={}),uses[type]=!0))}),uses},parse.findRequireDepNames=function(node,deps){traverse(node,function(node){var arg;node&&"CallExpression"===node.type&&node.callee&&"Identifier"===node.callee.type&&"require"===node.callee.name&&node[argPropName]&&1===node[argPropName].length&&(arg=node[argPropName][0],"Literal"===arg.type&&deps.push(arg.value))})},parse.parseNode=function(node,onMatch){var name,deps,cjsDeps,arg,factory,exp,refsDefine,bodyNode,args=node&&node[argPropName],callName=parse.hasRequire(node);if("require"===callName||"requirejs"===callName){if(arg=node[argPropName]&&node[argPropName][0],"ArrayExpression"!==arg.type&&"ObjectExpression"===arg.type&&(arg=node[argPropName][1]),deps=getValidDeps(arg),!deps)return;return onMatch("require",null,null,deps,node)}if(parse.hasDefine(node)&&args&&args.length){if(name=args[0],deps=args[1],factory=args[2],"ArrayExpression"===name.type?(factory=deps,deps=name,name=null):"FunctionExpression"===name.type?(factory=name,name=deps=null):"Literal"!==name.type&&(name=deps=factory=null),name&&"Literal"===name.type&&deps&&("FunctionExpression"===deps.type?(factory=deps,deps=null):"ObjectExpression"===deps.type?deps=factory=null:"Identifier"===deps.type&&2===args.length&&(deps=factory=null)),deps&&"ArrayExpression"===deps.type)deps=getValidDeps(deps);else if(factory&&"FunctionExpression"===factory.type)cjsDeps=parse.getAnonDepsFromNode(factory),cjsDeps.length&&(deps=cjsDeps);else if(deps||factory)return;return name&&"Literal"===name.type&&(name=name.value),onMatch("define",null,name,deps,node)}return"CallExpression"===node.type&&node.callee&&"FunctionExpression"===node.callee.type&&node.callee.body&&node.callee.body.body&&1===node.callee.body.body.length&&"IfStatement"===node.callee.body.body[0].type&&(bodyNode=node.callee.body.body[0],bodyNode.consequent&&bodyNode.consequent.body&&(exp=bodyNode.consequent.body[0],"ExpressionStatement"===exp.type&&exp.expression&&parse.hasDefine(exp.expression)&&exp.expression.arguments&&1===exp.expression.arguments.length&&"Identifier"===exp.expression.arguments[0].type&&(traverse(bodyNode.test,function(node){return parse.refsDefineAmd(node)?(refsDefine=!0,!1):void 0}),refsDefine)))?onMatch("define",null,null,null,exp.expression):void 0},parse.nodeToString=function(contents,node){var extracted,loc=node.loc,lines=contents.split("\n"),firstLine=loc.start.line>1?lines.slice(0,loc.start.line-1).join("\n")+"\n":"",preamble=firstLine+lines[loc.start.line-1].substring(0,loc.start.column);return extracted=loc.start.line===loc.end.line?lines[loc.start.line-1].substring(loc.start.column,loc.end.column):lines[loc.start.line-1].substring(loc.start.column)+"\n"+lines.slice(loc.start.line,loc.end.line-1).join("\n")+"\n"+lines[loc.end.line-1].substring(0,loc.end.column),{value:extracted,range:[preamble.length,preamble.length+extracted.length]}},parse.getLicenseComments=function(fileName,contents){var commentNode,refNode,subNode,value,i,j,ast=esprima.parse(contents,{comment:!0,range:!0}),result="",existsMap={},lineEnd=-1===contents.indexOf("\r")?"\n":"\r\n";if(ast.comments)for(i=0;i<ast.comments.length;i++){if(commentNode=ast.comments[i],"Line"===commentNode.type)if(value="//"+commentNode.value+lineEnd,refNode=commentNode,i+1>=ast.comments.length)value+=lineEnd;else{for(j=i+1;j<ast.comments.length&&(subNode=ast.comments[j],"Line"===subNode.type&&subNode.range[0]===refNode.range[1]+1);j++)value+="//"+subNode.value+lineEnd,refNode=subNode;value+=lineEnd,i=j-1}else value="/*"+commentNode.value+"*/"+lineEnd+lineEnd;existsMap[value]||-1===value.indexOf("license")&&("Block"!==commentNode.type||0!==value.indexOf("/*!"))&&-1===value.indexOf("opyright")&&-1===value.indexOf("(c)")||(result+=value,existsMap[value]=!0)}return result},parse}),define("transform",["./esprimaAdapter","./parse","logger","lang"],function(esprima,parse,logger,lang){"use strict";function applyIndent(str,indent,lineReturn){var regExp=bulkIndentRegExps[lineReturn];return str.replace(regExp,"$&"+indent)}var transform,baseIndentRegExp=/^([ \t]+)/,indentRegExp=/\{[\r\n]+([ \t]+)/,keyRegExp=/^[_A-Za-z]([A-Za-z\d_]*)$/,bulkIndentRegExps={"\n":/\n/g,"\r\n":/\r\n/g};return transform={toTransport:function(namespace,moduleName,path,contents,onFound,options){options=options||{};var astRoot,contentLines,modLine,foundAnon,scanCount=0,scanReset=!1,defineInfos=[];try{astRoot=esprima.parse(contents,{loc:!0})}catch(e){return logger.trace("toTransport skipping "+path+": "+e.toString()),contents}return parse.traverseBroad(astRoot,function(node){var args,firstArg,firstArgLoc,factoryNode,needsId,depAction,foundId,sourceUrlData,range,namespaceExists=!1;if(namespaceExists=namespace&&"CallExpression"===node.type&&node.callee&&node.callee.object&&"Identifier"===node.callee.object.type&&node.callee.object.name===namespace&&"Identifier"===node.callee.property.type&&"define"===node.callee.property.name,namespaceExists||parse.isDefineNodeWithArgs(node)){if(args=node.arguments,!args||!args.length)return;if(firstArg=args[0],firstArgLoc=firstArg.loc,1===args.length)"Identifier"===firstArg.type?(needsId=!0,depAction="empty"):"FunctionExpression"===firstArg.type?(factoryNode=firstArg,needsId=!0,depAction="scan"):"ObjectExpression"===firstArg.type?(needsId=!0,depAction="skip"):"Literal"===firstArg.type&&"number"==typeof firstArg.value?(needsId=!0,depAction="skip"):"UnaryExpression"===firstArg.type&&"-"===firstArg.operator&&firstArg.argument&&"Literal"===firstArg.argument.type&&"number"==typeof firstArg.argument.value?(needsId=!0,depAction="skip"):"MemberExpression"===firstArg.type&&firstArg.object&&firstArg.property&&"Identifier"===firstArg.property.type&&(needsId=!0,depAction="empty");
else if("ArrayExpression"===firstArg.type)needsId=!0,depAction="skip";else{if("Literal"!==firstArg.type||"string"!=typeof firstArg.value)return;needsId=!1,2===args.length&&"FunctionExpression"===args[1].type?(factoryNode=args[1],depAction="scan"):depAction="skip"}if(range={foundId:foundId,needsId:needsId,depAction:depAction,namespaceExists:namespaceExists,node:node,defineLoc:node.loc,firstArgLoc:firstArgLoc,factoryNode:factoryNode,sourceUrlData:sourceUrlData},range.needsId){if(foundAnon)return logger.trace(path+" has more than one anonymous define. May be a built file from another build system like, Ender. Skipping normalization."),defineInfos=[],!1;foundAnon=range,defineInfos.push(range)}else"scan"===depAction&&(scanCount+=1,scanCount>1?scanReset||(defineInfos=foundAnon?[foundAnon]:[],scanReset=!0):defineInfos.push(range))}}),defineInfos.length?(defineInfos.reverse(),contentLines=contents.split("\n"),modLine=function(loc,contentInsertion){var startIndex=loc.start.column,lineIndex=loc.start.line-1,line=contentLines[lineIndex];contentLines[lineIndex]=line.substring(0,startIndex)+contentInsertion+line.substring(startIndex,line.length)},defineInfos.forEach(function(info){var deps,contentInsertion="",depString="";info.needsId&&moduleName&&(contentInsertion+="'"+moduleName+"',"),"scan"===info.depAction&&(deps=parse.getAnonDepsFromNode(info.factoryNode),depString=deps.length?"["+deps.map(function(dep){return"'"+dep+"'"})+"]":"[]",depString+=",",info.factoryNode?modLine(info.factoryNode.loc,depString):contentInsertion+=depString),contentInsertion&&modLine(info.firstArgLoc,contentInsertion),namespace&&!info.namespaceExists&&modLine(info.defineLoc,namespace+"."),onFound&&onFound(info)}),contents=contentLines.join("\n"),options.useSourceUrl&&(contents='eval("'+lang.jsEscape(contents)+"\\n//# sourceURL="+(0===path.indexOf("/")?"":"/")+path+'");\n'),contents):contents},modifyConfig:function(fileContents,onConfig){var details=parse.findConfig(fileContents),config=details.config;return config&&(config=onConfig(config))?transform.serializeConfig(config,fileContents,details.range[0],details.range[1],{quote:details.quote}):fileContents},serializeConfig:function(config,fileContents,start,end,options){var indent,match,configString,outDentRegExp,baseIndent="",startString=fileContents.substring(0,start),existingConfigString=fileContents.substring(start,end),lineReturn=-1===existingConfigString.indexOf("\r")?"\n":"\r\n",lastReturnIndex=startString.lastIndexOf("\n");return-1===lastReturnIndex&&(lastReturnIndex=0),match=baseIndentRegExp.exec(startString.substring(lastReturnIndex+1,start)),match&&match[1]&&(baseIndent=match[1]),match=indentRegExp.exec(existingConfigString),match&&match[1]&&(indent=match[1]),indent=!indent||indent.length<baseIndent?"  ":indent.substring(baseIndent.length),outDentRegExp=new RegExp("("+lineReturn+")"+indent,"g"),configString=transform.objectToString(config,{indent:indent,lineReturn:lineReturn,outDentRegExp:outDentRegExp,quote:options&&options.quote}),configString=applyIndent(configString,baseIndent,lineReturn),startString+configString+fileContents.substring(end)},objectToString:function(obj,options,totalIndent){var startBrace,endBrace,nextIndent,first=!0,value="",lineReturn=options.lineReturn,indent=options.indent,outDentRegExp=options.outDentRegExp,quote=options.quote||'"';return totalIndent=totalIndent||"",nextIndent=totalIndent+indent,null===obj?value="null":void 0===obj?value="undefined":"number"==typeof obj||"boolean"==typeof obj?value=obj:"string"==typeof obj?value=quote+lang.jsEscape(obj)+quote:lang.isArray(obj)?(lang.each(obj,function(item,i){value+=(0!==i?","+lineReturn:"")+nextIndent+transform.objectToString(item,options,nextIndent)}),startBrace="[",endBrace="]"):lang.isFunction(obj)||lang.isRegExp(obj)?value=obj.toString().replace(outDentRegExp,"$1"):(lang.eachProp(obj,function(v,prop){value+=(first?"":","+lineReturn)+nextIndent+(keyRegExp.test(prop)?prop:quote+lang.jsEscape(prop)+quote)+": "+transform.objectToString(v,options,nextIndent),first=!1}),startBrace="{",endBrace="}"),startBrace&&(value=startBrace+lineReturn+value+lineReturn+totalIndent+endBrace),value}}}),define("pragma",["parse","logger"],function(parse,logger){"use strict";function Temp(){}function create(obj,mixin){Temp.prototype=obj;var prop,temp=new Temp;if(Temp.prototype=null,mixin)for(prop in mixin)mixin.hasOwnProperty(prop)&&!temp.hasOwnProperty(prop)&&(temp[prop]=mixin[prop]);return temp}var pragma={conditionalRegExp:/(exclude|include)Start\s*\(\s*["'](\w+)["']\s*,(.*)\)/,useStrictRegExp:/['"]use strict['"];/g,hasRegExp:/has\s*\(\s*['"]([^'"]+)['"]\s*\)/g,configRegExp:/(^|[^\.])(requirejs|require)(\.config)\s*\(/g,nsWrapRegExp:/\/\*requirejs namespace: true \*\//,apiDefRegExp:/var requirejs,\s*require,\s*define;/,defineCheckRegExp:/typeof\s+define\s*===\s*["']function["']\s*&&\s*define\s*\.\s*amd/g,defineStringCheckRegExp:/typeof\s+define\s*===\s*["']function["']\s*&&\s*define\s*\[\s*["']amd["']\s*\]/g,defineTypeFirstCheckRegExp:/\s*["']function["']\s*==(=?)\s*typeof\s+define\s*&&\s*define\s*\.\s*amd/g,defineJQueryRegExp:/typeof\s+define\s*===\s*["']function["']\s*&&\s*define\s*\.\s*amd\s*&&\s*define\s*\.\s*amd\s*\.\s*jQuery/g,defineHasRegExp:/typeof\s+define\s*==(=)?\s*['"]function['"]\s*&&\s*typeof\s+define\.amd\s*==(=)?\s*['"]object['"]\s*&&\s*define\.amd/g,defineTernaryRegExp:/typeof\s+define\s*===\s*['"]function["']\s*&&\s*define\s*\.\s*amd\s*\?\s*define/,amdefineRegExp:/if\s*\(\s*typeof define\s*\!==\s*'function'\s*\)\s*\{\s*[^\{\}]+amdefine[^\{\}]+\}/g,removeStrict:function(contents,config){return config.useStrict?contents:contents.replace(pragma.useStrictRegExp,"")},namespace:function(fileContents,ns){return ns&&(fileContents=fileContents.replace(pragma.configRegExp,"$1"+ns+".$2$3("),fileContents=parse.renameNamespace(fileContents,ns),fileContents=fileContents.replace(pragma.defineTernaryRegExp,"typeof "+ns+".define === 'function' && "+ns+".define.amd ? "+ns+".define"),fileContents=fileContents.replace(pragma.defineJQueryRegExp,"typeof "+ns+".define === 'function' && "+ns+".define.amd && "+ns+".define.amd.jQuery"),fileContents=fileContents.replace(pragma.defineHasRegExp,"typeof "+ns+".define === 'function' && typeof "+ns+".define.amd === 'object' && "+ns+".define.amd"),fileContents=fileContents.replace(pragma.defineCheckRegExp,"typeof "+ns+".define === 'function' && "+ns+".define.amd"),fileContents=fileContents.replace(pragma.defineStringCheckRegExp,"typeof "+ns+".define === 'function' && "+ns+".define['amd']"),fileContents=fileContents.replace(pragma.defineTypeFirstCheckRegExp,"'function' === typeof "+ns+".define && "+ns+".define.amd"),pragma.apiDefRegExp.test(fileContents)&&-1===fileContents.indexOf("if (!"+ns+" || !"+ns+".requirejs)")&&(fileContents="var "+ns+";(function () { if (!"+ns+" || !"+ns+".requirejs) {\nif (!"+ns+") { "+ns+" = {}; } else { require = "+ns+"; }\n"+fileContents+"\n"+ns+".requirejs = requirejs;"+ns+".require = require;"+ns+".define = define;\n}\n}());"),pragma.nsWrapRegExp.test(fileContents)&&(fileContents=fileContents.replace(pragma.nsWrapRegExp,""),fileContents="(function () {\nvar require = "+ns+".require,requirejs = "+ns+".requirejs,define = "+ns+".define;\n"+fileContents+"\n}());")),fileContents},process:function(fileName,fileContents,config,onLifecycleName,pluginCollector){var foundIndex=-1,startIndex=0,lineEndIndex,conditionLine,matches,type,marker,condition,isTrue,endRegExp,endMatches,endMarkerIndex,shouldInclude,startLength,lifecycleHas,deps,i,dep,moduleName,collectorMod,lifecyclePragmas,pragmas=config.pragmas,hasConfig=config.has,kwArgs=pragmas;if(onLifecycleName&&(lifecyclePragmas=config["pragmas"+onLifecycleName],lifecycleHas=config["has"+onLifecycleName],lifecyclePragmas&&(pragmas=create(pragmas||{},lifecyclePragmas)),lifecycleHas&&(hasConfig=create(hasConfig||{},lifecycleHas))),hasConfig&&(fileContents=fileContents.replace(pragma.hasRegExp,function(match,test){return hasConfig.hasOwnProperty(test)?!!hasConfig[test]:match})),!config.skipPragmas)for(;-1!==(foundIndex=fileContents.indexOf("//>>",startIndex));)if(lineEndIndex=fileContents.indexOf("\n",foundIndex),-1===lineEndIndex&&(lineEndIndex=fileContents.length-1),startIndex=lineEndIndex+1,conditionLine=fileContents.substring(foundIndex,lineEndIndex+1),matches=conditionLine.match(pragma.conditionalRegExp)){type=matches[1],marker=matches[2],condition=matches[3],isTrue=!1;try{isTrue=!!eval("("+condition+")")}catch(e){throw"Error in file: "+fileName+". Conditional comment: "+conditionLine+" failed with this error: "+e}if(endRegExp=new RegExp("\\/\\/\\>\\>\\s*"+type+"End\\(\\s*['\"]"+marker+"['\"]\\s*\\)","g"),endMatches=endRegExp.exec(fileContents.substring(startIndex,fileContents.length)),!endMatches)throw"Error in file: "+fileName+". Cannot find end marker for conditional comment: "+conditionLine;endMarkerIndex=startIndex+endRegExp.lastIndex-endMatches[0].length,lineEndIndex=fileContents.indexOf("\n",endMarkerIndex),-1===lineEndIndex&&(lineEndIndex=fileContents.length-1),shouldInclude="exclude"===type&&!isTrue||"include"===type&&isTrue,startLength=startIndex-foundIndex,fileContents=fileContents.substring(0,foundIndex)+(shouldInclude?fileContents.substring(startIndex,endMarkerIndex):"")+fileContents.substring(lineEndIndex+1,fileContents.length),startIndex=foundIndex}if(config.optimizeAllPluginResources&&pluginCollector)try{if(deps=parse.findDependencies(fileName,fileContents),deps.length)for(i=0;i<deps.length;i++)dep=deps[i],-1!==dep.indexOf("!")&&(moduleName=dep.split("!")[0],collectorMod=pluginCollector[moduleName],collectorMod||(collectorMod=pluginCollector[moduleName]=[]),collectorMod.push(dep))}catch(eDep){logger.error("Parse error looking for plugin resources in "+fileName+", skipping.")}return fileContents=fileContents.replace(pragma.amdefineRegExp,""),"OnSave"===onLifecycleName&&config.namespace&&(fileContents=pragma.namespace(fileContents,config.namespace,onLifecycleName)),pragma.removeStrict(fileContents,config)}};return pragma}),"browser"===env&&define("browser/optimize",{}),"node"===env&&define("node/optimize",{}),"rhino"===env&&define("rhino/optimize",["logger","env!env/file"],function(logger,file){function closurefromCode(filename,content){return JSSourceFilefromCode.invoke(null,[filename,content])}function getFileWriter(fileName,encoding){var outWriter,parentDir,outFile=new java.io.File(fileName);if(parentDir=outFile.getAbsoluteFile().getParentFile(),!parentDir.exists()&&!parentDir.mkdirs())throw"Could not create directory: "+parentDir.getAbsolutePath();return outWriter=encoding?new java.io.OutputStreamWriter(new java.io.FileOutputStream(outFile),encoding):new java.io.OutputStreamWriter(new java.io.FileOutputStream(outFile)),new java.io.BufferedWriter(outWriter)}Array.prototype.reduce||(Array.prototype.reduce=function(fn){var accumulator,i=0,length=this.length;if(arguments.length>=2)accumulator=arguments[1];else if(length){for(;!(i in this);)i++;accumulator=this[i++]}for(;length>i;i++)i in this&&(accumulator=fn.call(void 0,accumulator,this[i],i,this));return accumulator});var JSSourceFilefromCode,optimize,mapRegExp=/"file":"[^"]+"/;try{JSSourceFilefromCode=java.lang.Class.forName("com.google.javascript.jscomp.JSSourceFile").getMethod("fromCode",[java.lang.String,java.lang.String])}catch(e){}return optimize={closure:function(fileName,fileContents,outFileName,keepLines,config){config=config||{};var result,mappings,optimized,baseName,writer,outBaseName,outFileNameMap,srcOutFileName,concatNameMap,options,option,FLAG_compilation_level,compiler,jscomp=Packages.com.google.javascript.jscomp,jsSourceFile=(Packages.com.google.common.flags,closurefromCode(String(fileName),String(fileContents))),sourceListArray=new java.util.ArrayList,Compiler=Packages.com.google.javascript.jscomp.Compiler,CommandLineRunner=Packages.com.google.javascript.jscomp.CommandLineRunner;logger.trace("Minifying file: "+fileName),baseName=new java.io.File(fileName).getName(),options=new jscomp.CompilerOptions;for(option in config.CompilerOptions)config.CompilerOptions[option]&&(options[option]=config.CompilerOptions[option]);if(options.prettyPrint=keepLines||options.prettyPrint,FLAG_compilation_level=jscomp.CompilationLevel[config.CompilationLevel||"SIMPLE_OPTIMIZATIONS"],FLAG_compilation_level.setOptionsForCompilationLevel(options),config.generateSourceMaps&&(mappings=new java.util.ArrayList,mappings.add(new com.google.javascript.jscomp.SourceMap.LocationMapping(fileName,baseName+".src.js")),options.setSourceMapLocationMappings(mappings),options.setSourceMapOutputPath(fileName+".map")),Compiler.setLoggingLevel(Packages.java.util.logging.Level[config.loggingLevel||"WARNING"]),compiler=new Compiler,sourceListArray.add(jsSourceFile),result=compiler.compile(CommandLineRunner.getDefaultExterns(),sourceListArray,options),result.success)return optimized=String(compiler.toSource()),config.generateSourceMaps&&result.sourceMap&&outFileName?(outBaseName=new java.io.File(outFileName).getName(),srcOutFileName=outFileName+".src.js",outFileNameMap=outFileName+".map",file.exists(outFileNameMap)?(concatNameMap=outFileNameMap.replace(/\.map$/,".src.js.map"),file.saveFile(concatNameMap,file.readFile(outFileNameMap)),file.saveFile(srcOutFileName,fileContents.replace(/\/\# sourceMappingURL=(.+).map/,"/# sourceMappingURL=$1.src.js.map"))):file.saveUtf8File(srcOutFileName,fileContents),writer=getFileWriter(outFileNameMap,"utf-8"),result.sourceMap.appendTo(writer,outFileName),writer.close(),file.saveFile(outFileNameMap,file.readFile(outFileNameMap).replace(mapRegExp,'"file":"'+baseName+'"')),fileContents=optimized+"\n//# sourceMappingURL="+outBaseName+".map"):fileContents=optimized,fileContents;throw new Error("Cannot closure compile file: "+fileName+". Skipping it.")}}}),"xpconnect"===env&&define("xpconnect/optimize",{}),define("optimize",["lang","logger","env!env/optimize","env!env/file","parse","pragma","uglifyjs/index","uglifyjs2","source-map"],function(lang,logger,envOptimize,file,parse,pragma,uglify,uglify2,sourceMap){"use strict";function cleanCssUrlQuotes(url){return url=url.replace(/\s+$/,""),("'"===url.charAt(0)||'"'===url.charAt(0))&&(url=url.substring(1,url.length-1)),url}function fixCssUrlPaths(fileName,path,contents,cssPrefix){return contents.replace(cssUrlRegExp,function(fullMatch,urlMatch){var colonIndex,parts,i,fixedUrlMatch=cleanCssUrlQuotes(urlMatch);for(fixedUrlMatch=fixedUrlMatch.replace(lang.backSlashRegExp,"/"),colonIndex=fixedUrlMatch.indexOf(":"),"/"!==fixedUrlMatch.charAt(0)&&(-1===colonIndex||colonIndex>fixedUrlMatch.indexOf("/"))?urlMatch=cssPrefix+path+fixedUrlMatch:logger.trace(fileName+"\n  URL not a relative URL, skipping: "+urlMatch),parts=urlMatch.split("/"),i=parts.length-1;i>0;i--)"."===parts[i]?parts.splice(i,1):".."===parts[i]&&0!==i&&".."!==parts[i-1]&&(parts.splice(i-1,2),i-=1);return"url("+parts.join("/")+")"})}function flattenCss(fileName,fileContents,cssImportIgnore,cssPrefix,included,topLevel){fileName=fileName.replace(lang.backSlashRegExp,"/");var endIndex=fileName.lastIndexOf("/"),filePath=-1!==endIndex?fileName.substring(0,endIndex+1):"",importList=[],skippedList=[];return fileContents=fileContents.replace(cssCommentImportRegExp,""),cssImportIgnore&&","!==cssImportIgnore.charAt(cssImportIgnore.length-1)&&(cssImportIgnore+=","),fileContents=fileContents.replace(cssImportRegExp,function(fullMatch,urlStart,importFileName,urlEnd,mediaTypes){if(mediaTypes&&"all"!==mediaTypes.replace(/^\s\s*/,"").replace(/\s\s*$/,""))return skippedList.push(fileName),fullMatch;if(importFileName=cleanCssUrlQuotes(importFileName),cssImportIgnore&&-1!==cssImportIgnore.indexOf(importFileName+","))return fullMatch;importFileName=importFileName.replace(lang.backSlashRegExp,"/");try{var importEndIndex,importPath,flat,fullImportFileName="/"===importFileName.charAt(0)?importFileName:filePath+importFileName,importContents=file.readFile(fullImportFileName);return included[fullImportFileName]?"":(included[fullImportFileName]=!0,flat=flattenCss(fullImportFileName,importContents,cssImportIgnore,cssPrefix,included),importContents=flat.fileContents,flat.importList.length&&importList.push.apply(importList,flat.importList),flat.skippedList.length&&skippedList.push.apply(skippedList,flat.skippedList),importEndIndex=importFileName.lastIndexOf("/"),importPath=-1!==importEndIndex?importFileName.substring(0,importEndIndex+1):"",importPath=importPath.replace(/^\.\//,""),importContents=fixCssUrlPaths(importFileName,importPath,importContents,cssPrefix),importList.push(fullImportFileName),importContents)}catch(e){return logger.warn(fileName+"\n  Cannot inline css import, skipping: "+importFileName),fullMatch}}),cssPrefix&&topLevel&&(fileContents=fixCssUrlPaths(fileName,"",fileContents,cssPrefix)),{importList:importList,skippedList:skippedList,fileContents:fileContents}}var optimize,cssImportRegExp=/\@import\s+(url\()?\s*([^);]+)\s*(\))?([\w, ]*)(;)?/gi,cssCommentImportRegExp=/\/\*[^\*]*@import[^\*]*\*\//g,cssUrlRegExp=/\url\(\s*([^\)]+)\s*\)?/g,SourceMapGenerator=sourceMap.SourceMapGenerator,SourceMapConsumer=sourceMap.SourceMapConsumer;return optimize={jsFile:function(fileName,fileContents,outFileName,config,pluginCollector){fileContents||(fileContents=file.readFile(fileName)),fileContents=optimize.js(fileName,fileContents,outFileName,config,pluginCollector),file.saveUtf8File(outFileName,fileContents)},js:function(fileName,fileContents,outFileName,config,pluginCollector){var optFunc,optConfig,parts=String(config.optimize).split("."),optimizerName=parts[0],keepLines="keepLines"===parts[1],licenseContents="";if(config=config||{},fileContents=pragma.process(fileName,fileContents,config,"OnSave",pluginCollector),optimizerName&&"none"!==optimizerName){if(optFunc=envOptimize[optimizerName]||optimize.optimizers[optimizerName],!optFunc)throw new Error('optimizer with name of "'+optimizerName+'" not found for this environment');optConfig=config[optimizerName]||{},config.generateSourceMaps&&(optConfig.generateSourceMaps=!!config.generateSourceMaps);try{if(config.preserveLicenseComments)try{licenseContents=parse.getLicenseComments(fileName,fileContents)}catch(e){throw new Error("Cannot parse file: "+fileName+" for comments. Skipping it. Error is:\n"+e.toString())}fileContents=licenseContents+optFunc(fileName,fileContents,outFileName,keepLines,optConfig)}catch(e){if(config.throwWhen&&config.throwWhen.optimize)throw e;logger.error(e)}}return fileContents},cssFile:function(fileName,outFileName,config){var startIndex,endIndex,buildText,comment,originalFileContents=file.readFile(fileName),flat=flattenCss(fileName,originalFileContents,config.cssImportIgnore,config.cssPrefix,{},!0),fileContents=flat.skippedList.length?originalFileContents:flat.fileContents;flat.skippedList.length&&logger.warn("Cannot inline @imports for "+fileName+",\nthe following files had media queries in them:\n"+flat.skippedList.join("\n"));try{if(-1===config.optimizeCss.indexOf(".keepComments"))for(startIndex=0;-1!==(startIndex=fileContents.indexOf("/*",startIndex));){if(endIndex=fileContents.indexOf("*/",startIndex+2),-1===endIndex)throw"Improper comment in CSS file: "+fileName;comment=fileContents.substring(startIndex,endIndex),!config.preserveLicenseComments||-1===comment.indexOf("license")&&-1===comment.indexOf("opyright")&&-1===comment.indexOf("(c)")?(fileContents=fileContents.substring(0,startIndex)+fileContents.substring(endIndex+2,fileContents.length),startIndex=0):startIndex=endIndex}-1===config.optimizeCss.indexOf(".keepLines")?(fileContents=fileContents.replace(/[\r\n]/g," "),fileContents=fileContents.replace(/\s+/g," "),fileContents=fileContents.replace(/\{\s/g,"{"),fileContents=fileContents.replace(/\s\}/g,"}")):(fileContents=fileContents.replace(/(\r\n)+/g,"\r\n"),fileContents=fileContents.replace(/(\n)+/g,"\n"))}catch(e){fileContents=originalFileContents,logger.error("Could not optimized CSS file: "+fileName+", error: "+e)}return file.saveUtf8File(outFileName,fileContents),buildText="\n"+outFileName.replace(config.dir,"")+"\n----------------\n",flat.importList.push(fileName),buildText+=flat.importList.map(function(path){return path.replace(config.dir,"")}).join("\n"),{importList:flat.importList,buildText:buildText+"\n"}},css:function(startDir,config){var i,fileName,result,fileList,buildText="",importList=[],shouldRemove=config.dir&&config.removeCombined;if(-1!==config.optimizeCss.indexOf("standard")){if(fileList=file.getFilteredFileList(startDir,/\.css$/,!0))for(i=0;i<fileList.length;i++)fileName=fileList[i],logger.trace("Optimizing ("+config.optimizeCss+") CSS file: "+fileName),result=optimize.cssFile(fileName,fileName,config),buildText+=result.buildText,shouldRemove&&(result.importList.pop(),importList=importList.concat(result.importList));shouldRemove&&importList.forEach(function(path){file.exists(path)&&file.deleteFile(path)})}return buildText},optimizers:{uglify:function(fileName,fileContents,outFileName,keepLines,config){var ast,errMessage,errMatch,parser=uglify.parser,processor=uglify.uglify;config=config||{},logger.trace("Uglifying file: "+fileName);try{ast=parser.parse(fileContents,config.strict_semicolons),config.no_mangle!==!0&&(ast=processor.ast_mangle(ast,config)),ast=processor.ast_squeeze(ast,config),fileContents=processor.gen_code(ast,config),config.max_line_length&&(fileContents=processor.split_lines(fileContents,config.max_line_length)),fileContents+=";"}catch(e){throw errMessage=e.toString(),errMatch=/\nError(\r)?\n/.exec(errMessage),errMatch&&(errMessage=errMessage.substring(0,errMatch.index)),new Error("Cannot uglify file: "+fileName+". Skipping it. Error is:\n"+errMessage)}return fileContents},uglify2:function(fileName,fileContents,outFileName,keepLines,config){var result,existingMap,resultMap,finalMap,uconfig={},existingMapPath=outFileName+".map",baseName=fileName&&fileName.split("/").pop();config=config||{},lang.mixin(uconfig,config,!0),uconfig.fromString=!0,config.generateSourceMaps&&outFileName&&(uconfig.outSourceMap=baseName,file.exists(existingMapPath)&&(uconfig.inSourceMap=existingMapPath,existingMap=JSON.parse(file.readFile(existingMapPath)))),logger.trace("Uglify2 file: "+fileName);try{result=uglify2.minify(fileContents,uconfig,baseName+".src.js"),uconfig.outSourceMap&&result.map?(resultMap=result.map,existingMap?(resultMap=JSON.parse(resultMap),finalMap=SourceMapGenerator.fromSourceMap(new SourceMapConsumer(resultMap)),finalMap.applySourceMap(new SourceMapConsumer(existingMap)),resultMap=finalMap.toString()):file.saveFile(outFileName+".src.js",fileContents),file.saveFile(outFileName+".map",resultMap),fileContents=result.code+"\n//# sourceMappingURL="+baseName+".map"):fileContents=result.code}catch(e){throw new Error("Cannot uglify2 file: "+fileName+". Skipping it. Error is:\n"+e.toString())}return fileContents}}}}),define("requirePatch",["env!env/file","pragma","parse","lang","logger","commonJs","prim"],function(file,pragma,parse,lang,logger,commonJs,prim){var allowRun=!0,hasProp=lang.hasProp,falseProp=lang.falseProp,getOwn=lang.getOwn;return function(){function normalizeUrlWithBase(context,moduleName,url){return require.jsExtRegExp.test(moduleName)&&(url=(context.config.dir||context.config.dirBaseUrl)+url),url}if(allowRun){allowRun=!1;var layer,pluginBuilderRegExp=/(["']?)pluginBuilder(["']?)\s*[=\:]\s*["']([^'"\s]+)["']/,oldNewContext=require.s.newContext,oldDef,exports,module;require._cacheReset=function(){require._cachedRawText={},require._cachedFileContents={},require._cachedDefinesRequireUrls={}},require._cacheReset(),require._isSupportedBuildUrl=function(url){return-1===url.indexOf("://")&&-1===url.indexOf("?")&&0!==url.indexOf("empty:")&&0!==url.indexOf("//")?!0:(layer.ignoredUrls[url]||(-1===url.indexOf("empty:")&&logger.info("Cannot optimize network URL, skipping: "+url),layer.ignoredUrls[url]=!0),!1)},require.s.newContext=function(name){var context=oldNewContext(name),oldEnable=context.enable,moduleProto=context.Module.prototype,oldInit=moduleProto.init,oldCallPlugin=moduleProto.callPlugin;return"_"===name&&(context.nextTick=function(fn){fn()},context.needFullExec={},context.fullExec={},context.plugins={},context.buildShimExports={},context.makeShimExports=function(value){function fn(){return"(function (global) {\n    return function () {\n        var ret, fn;\n"+(value.init?"       fn = "+value.init.toString()+";\n        ret = fn.apply(global, arguments);\n":"")+(value.exports?"        return ret || global."+value.exports+";\n":"        return ret;\n")+"    };\n}(this))"}return fn},context.enable=function(depMap,parent){var id=depMap.id,parentId=parent&&parent.map.id,needFullExec=context.needFullExec,fullExec=context.fullExec,mod=getOwn(context.registry,id);return mod&&!mod.defined?parentId&&getOwn(needFullExec,parentId)&&(needFullExec[id]=!0):(getOwn(needFullExec,id)&&falseProp(fullExec,id)||parentId&&getOwn(needFullExec,parentId)&&falseProp(fullExec,id))&&context.require.undef(id),oldEnable.apply(context,arguments)},context.load=function(moduleName,url){var contents,pluginBuilderMatch,builderName,shim,shimExports;0===url.indexOf("empty:")&&delete context.urlFetched[url],require._isSupportedBuildUrl(url)?(url=normalizeUrlWithBase(context,moduleName,url),layer.buildPathMap[moduleName]=url,layer.buildFileToModule[url]=moduleName,hasProp(context.plugins,moduleName)&&(context.needFullExec[moduleName]=!0),prim().start(function(){return hasProp(require._cachedFileContents,url)&&(falseProp(context.needFullExec,moduleName)||getOwn(context.fullExec,moduleName))?(contents=require._cachedFileContents[url],!layer.existingRequireUrl&&require._cachedDefinesRequireUrls[url]&&(layer.existingRequireUrl=url),void 0):require._cacheReadAsync(url).then(function(text){contents=text,!context.config.cjsTranslate||context.config.shim&&lang.hasProp(context.config.shim,moduleName)||(contents=commonJs.convert(url,contents)),context.config.onBuildRead&&(contents=context.config.onBuildRead(moduleName,url,contents)),contents=pragma.process(url,contents,context.config,"OnExecute");try{!layer.existingRequireUrl&&parse.definesRequire(url,contents)&&(layer.existingRequireUrl=url,require._cachedDefinesRequireUrls[url]=!0)}catch(e1){throw new Error("Parse error using esprima for file: "+url+"\n"+e1)}}).then(function(){return hasProp(context.plugins,moduleName)&&(pluginBuilderMatch=pluginBuilderRegExp.exec(contents))?(builderName=context.makeModuleMap(pluginBuilderMatch[3],context.makeModuleMap(moduleName),null,!0).id,require._cacheReadAsync(context.nameToUrl(builderName))):contents}).then(function(text){contents=text;try{falseProp(context.needFullExec,moduleName)&&(contents=parse(moduleName,url,contents,{insertNeedsDefine:!0,has:context.config.has,findNestedDependencies:context.config.findNestedDependencies}))}catch(e2){throw new Error("Parse error using esprima for file: "+url+"\n"+e2)}require._cachedFileContents[url]=contents})}).then(function(){contents&&eval(contents);try{getOwn(context.needFullExec,moduleName)&&(shim=getOwn(context.config.shim,moduleName),shim&&shim.exports&&(shimExports=eval(shim.exports),"undefined"!=typeof shimExports&&(context.buildShimExports[moduleName]=shimExports))),context.completeLoad(moduleName)}catch(e){throw e.moduleTree||(e.moduleTree=[]),e.moduleTree.push(moduleName),e}}).then(null,function(eOuter){throw eOuter.fileName||(eOuter.fileName=url),eOuter}).end()):context.completeLoad(moduleName)},context.execCb=function(name,cb,args,exports){var buildShimExports=getOwn(layer.context.buildShimExports,name);return buildShimExports?buildShimExports:cb.__requireJsBuild||getOwn(layer.context.needFullExec,name)?cb.apply(exports,args):void 0},moduleProto.init=function(depMaps){return context.needFullExec[this.map.id]&&lang.each(depMaps,lang.bind(this,function(depMap){"string"==typeof depMap&&(depMap=context.makeModuleMap(depMap,this.map.isDefine?this.map:this.map.parentMap)),context.fullExec[depMap.id]||context.require.undef(depMap.id)})),oldInit.apply(this,arguments)},moduleProto.callPlugin=function(){var map=this.map,pluginMap=context.makeModuleMap(map.prefix),pluginId=pluginMap.id,pluginMod=getOwn(context.registry,pluginId);return context.plugins[pluginId]=!0,context.needFullExec[pluginId]=!0,!falseProp(context.fullExec,pluginId)||pluginMod&&!pluginMod.defined||context.require.undef(pluginMap.id),oldCallPlugin.apply(this,arguments)}),context},delete require.s.contexts._,require._buildReset=function(){var oldContext=require.s.contexts._;return delete require.s.contexts._,require({}),layer=require._layer={buildPathMap:{},buildFileToModule:{},buildFilePaths:[],pathAdded:{},modulesWithNames:{},needsDefine:{},existingRequireUrl:"",ignoredUrls:{},context:require.s.contexts._},oldContext},require._buildReset(),oldDef=define,define=function(name){return"string"==typeof name&&falseProp(layer.needsDefine,name)&&(layer.modulesWithNames[name]=!0),oldDef.apply(require,arguments)},define.amd=oldDef.amd,require._readFile=file.readFile,require._fileExists=function(path){return file.exists(path)},require.onResourceLoad=function(context,map){var url,id=map.id;context.needFullExec&&getOwn(context.needFullExec,id)&&(context.fullExec[id]=!0),map.prefix?falseProp(layer.pathAdded,id)&&(layer.buildFilePaths.push(id),layer.buildPathMap[id]=id,layer.buildFileToModule[id]=id,layer.modulesWithNames[id]=!0,layer.pathAdded[id]=!0):map.url&&require._isSupportedBuildUrl(map.url)&&(url=normalizeUrlWithBase(context,id,map.url),!layer.pathAdded[url]&&getOwn(layer.buildPathMap,id)&&(layer.buildFilePaths.push(url),layer.pathAdded[url]=!0))},require.needsDefine=function(moduleName){layer.needsDefine[moduleName]=!0}}}}),define("commonJs",["env!env/file","parse"],function(file,parse){"use strict";var commonJs={useLog:!0,convertDir:function(commonJsPath,savePath){var fileList,i,fileName,convertedFileName,fileContents,jsFileRegExp=/\.js$/;if(fileList=file.getFilteredFileList(commonJsPath,/\w/,!0),commonJsPath=commonJsPath.replace(/\\/g,"/"),savePath=savePath.replace(/\\/g,"/"),"/"===commonJsPath.charAt(commonJsPath.length-1)&&(commonJsPath=commonJsPath.substring(0,commonJsPath.length-1)),"/"===savePath.charAt(savePath.length-1)&&(savePath=savePath.substring(0,savePath.length-1)),fileList&&fileList.length)for(i=0;i<fileList.length;i++)fileName=fileList[i],convertedFileName=fileName.replace(commonJsPath,savePath),jsFileRegExp.test(fileName)?(fileContents=file.readFile(fileName),fileContents=commonJs.convert(fileName,fileContents),file.saveUtf8File(convertedFileName,fileContents)):file.copyFile(fileName,convertedFileName,!0);else commonJs.useLog&&("convert"===commonJsPath?console.log("\n\n"+commonJs.convert(savePath,file.readFile(savePath))):console.log("No files to convert in directory: "+commonJsPath))},convert:function(fileName,fileContents){try{var preamble="",commonJsProps=parse.usesCommonJs(fileName,fileContents);if(parse.usesAmdOrRequireJs(fileName,fileContents)||!commonJsProps)return fileContents;(commonJsProps.dirname||commonJsProps.filename)&&(preamble='var __filename = module.uri || "", __dirname = __filename.substring(0, __filename.lastIndexOf("/") + 1); '),fileContents="define(function (require, exports, module) {"+preamble+fileContents+"\n});\n"}catch(e){return console.log("commonJs.convert: COULD NOT CONVERT: "+fileName+", so skipping it. Error was: "+e),fileContents}return fileContents}};return commonJs}),define("build",function(require){"use strict";function addSemiColon(text,config){return config.skipSemiColonInsertion||endsWithSemiColonRegExp.test(text)?text:text+";"}function endsWithSlash(dirName){return"/"!==dirName.charAt(dirName.length-1)&&(dirName+="/"),dirName}function makeWriteFile(namespace,layer){function writeFile(name,contents){logger.trace("Saving plugin-optimized file: "+name),file.saveUtf8File(name,contents)}return writeFile.asModule=function(moduleName,fileName,contents){writeFile(fileName,build.toTransport(namespace,moduleName,fileName,contents,layer))},writeFile}function stringDotToObj(result,name,value){var parts=name.split(".");parts.forEach(function(prop,i){i===parts.length-1?result[prop]=value:(falseProp(result,prop)&&(result[prop]={}),result=result[prop])
})}function mixConfig(target,source){var prop,value;for(prop in source)hasProp(source,prop)&&(value=source[prop],target[prop]="object"!=typeof value||!value||lang.isArray(value)||lang.isFunction(value)||lang.isRegExp(value)?value:lang.mixin({},target[prop],value,!0));lang.hasProp(target,"logLevel")&&logger.logLevel(target.logLevel)}function flattenWrapFile(wrap,keyName,absFilePath){var keyFileName=keyName+"File";if("string"!=typeof wrap[keyName]&&wrap[keyFileName])wrap[keyName]="","string"==typeof wrap[keyFileName]&&(wrap[keyFileName]=[wrap[keyFileName]]),wrap[keyFileName].forEach(function(fileName){wrap[keyName]+=(wrap[keyName]?"\n":"")+file.readFile(build.makeAbsPath(fileName,absFilePath))});else if(null===wrap[keyName]||void 0===wrap[keyName])wrap[keyName]="";else if("string"!=typeof wrap[keyName])throw new Error("wrap."+keyName+" or wrap."+keyFileName+" malformed")}function normalizeWrapConfig(config,absFilePath){try{config.wrap&&(config.wrap===!0?config.wrap={start:"(function () {",end:"}());"}:(flattenWrapFile(config.wrap,"start",absFilePath),flattenWrapFile(config.wrap,"end",absFilePath)))}catch(wrapError){throw new Error("Malformed wrap config: "+wrapError.toString())}}var build,buildBaseConfig,lang=require("lang"),prim=require("prim"),logger=require("logger"),file=require("env!env/file"),parse=require("parse"),optimize=require("optimize"),pragma=require("pragma"),transform=require("transform"),requirePatch=require("requirePatch"),env=require("env"),commonJs=require("commonJs"),SourceMapGenerator=require("source-map/source-map-generator"),hasProp=lang.hasProp,getOwn=lang.getOwn,falseProp=lang.falseProp,endsWithSemiColonRegExp=/;\s*$/,resourceIsModuleIdRegExp=/^[\w\/\\\.]+$/;return prim.nextTick=function(fn){fn()},require=requirejs,require._cacheReadAsync=function(path,encoding){var d;return lang.hasProp(require._cachedRawText,path)?(d=prim(),d.resolve(require._cachedRawText[path]),d.promise):file.readFileAsync(path,encoding).then(function(text){return require._cachedRawText[path]=text,text})},buildBaseConfig={appDir:"",pragmas:{},paths:{},optimize:"uglify",optimizeCss:"standard.keepLines",inlineText:!0,isBuild:!0,optimizeAllPluginResources:!1,findNestedDependencies:!1,preserveLicenseComments:!0,dirExclusionRegExp:file.dirExclusionRegExp,_buildPathToModuleIndex:{}},build=function(args){var buildFile,cmdConfig,errorMsg,errorStack,stackMatch,errorTree,i,j,errorMod,stackRegExp=/( {4}at[^\n]+)\n/,standardIndent="  ";return prim().start(function(){if(!args||lang.isArray(args)){if(!args||args.length<1)return logger.error("build.js buildProfile.js\nwhere buildProfile.js is the name of the build file (see example.build.js for hints on how to make a build file)."),void 0;-1===args[0].indexOf("=")&&(buildFile=args[0],args.splice(0,1)),cmdConfig=build.convertArrayToObject(args),cmdConfig.buildFile=buildFile}else cmdConfig=args;return build._run(cmdConfig)}).then(null,function(e){var err;if(errorMsg=e.toString(),errorTree=e.moduleTree,stackMatch=stackRegExp.exec(errorMsg),stackMatch&&(errorMsg+=errorMsg.substring(0,stackMatch.index+stackMatch[0].length+1)),errorTree&&errorTree.length>0){for(errorMsg+="\nIn module tree:\n",i=errorTree.length-1;i>-1;i--)if(errorMod=errorTree[i]){for(j=errorTree.length-i;j>-1;j--)errorMsg+=standardIndent;errorMsg+=errorMod+"\n"}logger.error(errorMsg)}throw errorStack=e.stack,"string"==typeof args&&-1!==args.indexOf("stacktrace=true")?errorMsg+="\n"+errorStack:!stackMatch&&errorStack&&(stackMatch=stackRegExp.exec(errorStack),stackMatch&&(errorMsg+="\n"+stackMatch[0]||"")),err=new Error(errorMsg),err.originalError=e,err})},build._run=function(cmdConfig){var buildPaths,fileName,fileNames,paths,i,baseConfig,config,modules,srcPath,buildContext,destPath,moduleMap,parentModuleMap,context,resources,resource,plugin,fileContents,pluginProcessed={},buildFileContents="",pluginCollector={};return prim().start(function(){var prop;if(requirePatch(),config=build.createConfig(cmdConfig),paths=config.paths,config.dir&&!config.keepBuildDir&&file.exists(config.dir)&&file.deleteFile(config.dir),!config.out&&!config.cssIn)if(file.copyDir(config.appDir||config.baseUrl,config.dir,/\w/,!0),buildPaths={},config.appDir)for(prop in paths)hasProp(paths,prop)&&(buildPaths[prop]=paths[prop].replace(config.appDir,config.dir));else for(prop in paths)hasProp(paths,prop)&&(0===paths[prop].indexOf(config.baseUrl)?buildPaths[prop]=paths[prop].replace(config.baseUrl,config.dirBaseUrl):(buildPaths[prop]="empty:"===paths[prop]?"empty:":prop.replace(/\./g,"/"),srcPath=paths[prop],0!==srcPath.indexOf("/")&&-1===srcPath.indexOf(":")&&(srcPath=config.baseUrl+srcPath),destPath=config.dirBaseUrl+buildPaths[prop],"empty:"!==srcPath&&(file.exists(srcPath)&&file.isDirectory(srcPath)?file.copyDir(srcPath,destPath,/\w/,!0):(srcPath+=".js",destPath+=".js",file.copyFile(srcPath,destPath)))));require({baseUrl:config.baseUrl,paths:paths,packagePaths:config.packagePaths,packages:config.packages}),buildContext=require.s.contexts._,modules=config.modules,modules&&modules.forEach(function(module){if(module.name&&(module._sourcePath=buildContext.nameToUrl(module.name),!(file.exists(module._sourcePath)||module.create||-1!==module.name.indexOf("!")||config.rawText&&lang.hasProp(config.rawText,module.name))))throw new Error("ERROR: module path does not exist: "+module._sourcePath+" for module named: "+module.name+". Path is relative to: "+file.absPath("."))}),config.out?(require(config),config.cssIn||(config.modules[0]._buildPath="function"==typeof config.out?"FUNCTION":config.out)):config.cssIn||(baseConfig={baseUrl:config.dirBaseUrl,paths:buildPaths},lang.mixin(baseConfig,config),require(baseConfig),modules&&modules.forEach(function(module){module.name&&(module._buildPath=buildContext.nameToUrl(module.name,null),module.create||file.copyFile(module._sourcePath,module._buildPath))})),config.optimizeCss&&"none"!==config.optimizeCss&&config.dir&&(buildFileContents+=optimize.css(config.dir,config))}).then(function(){baseConfig=lang.deeplikeCopy(require.s.contexts._.config)}).then(function(){var actions=[];return modules?(actions=modules.map(function(module,i){return function(){return config._buildPathToModuleIndex[file.normalize(module._buildPath)]=i,build.traceDependencies(module,config,baseConfig).then(function(layer){module.layer=layer})}}),prim.serial(actions)):void 0}).then(function(){var actions;return modules?(actions=modules.map(function(module){return function(){return module.exclude?(module.excludeLayers=[],prim.serial(module.exclude.map(function(exclude,i){return function(){var found=build.findBuildModule(exclude,modules);return found?(module.excludeLayers[i]=found,void 0):build.traceDependencies({name:exclude},config,baseConfig).then(function(layer){module.excludeLayers[i]={layer:layer}})}}))):void 0}}),prim.serial(actions)):void 0}).then(function(){return modules?prim.serial(modules.map(function(module){return function(){return module.exclude&&module.exclude.forEach(function(excludeModule,i){var excludeLayer=module.excludeLayers[i].layer,map=excludeLayer.buildFileToModule;excludeLayer.buildFilePaths.forEach(function(filePath){build.removeModulePath(map[filePath],filePath,module.layer)})}),module.excludeShallow&&module.excludeShallow.forEach(function(excludeShallowModule){var path=getOwn(module.layer.buildPathMap,excludeShallowModule);path&&build.removeModulePath(excludeShallowModule,path,module.layer)}),build.flattenModule(module,module.layer,config).then(function(builtModule){var finalText,baseName;"FUNCTION"===module._buildPath?(module._buildText=builtModule.text,module._buildSourceMap=builtModule.sourceMap):(finalText=builtModule.text,builtModule.sourceMap&&(baseName=module._buildPath.split("/"),baseName=baseName.pop(),finalText+="\n//# sourceMappingURL="+baseName+".map",file.saveUtf8File(module._buildPath+".map",builtModule.sourceMap)),file.saveUtf8File(module._buildPath+"-temp",finalText)),buildFileContents+=builtModule.buildText})}})):void 0}).then(function(){var moduleName;if(modules&&modules.forEach(function(module){var finalPath=module._buildPath;"FUNCTION"!==finalPath&&(file.exists(finalPath)&&file.deleteFile(finalPath),file.renameFile(finalPath+"-temp",finalPath),config.removeCombined&&!config.out&&module.layer.buildFilePaths.forEach(function(path){var isLayer=modules.some(function(mod){return mod._buildPath===path}),relPath=build.makeRelativeFilePath(config.dir,path);file.exists(path)&&!isLayer&&0!==relPath.indexOf("..")&&file.deleteFile(path)})),config.onModuleBundleComplete&&config.onModuleBundleComplete(module.onCompleteData)}),config.removeCombined&&!config.out&&config.dir&&file.deleteEmptyDirs(config.dir),config.out&&!config.cssIn)fileName=config.modules[0]._buildPath,"FUNCTION"===fileName?config.modules[0]._buildText=optimize.js(fileName,config.modules[0]._buildText,null,config):optimize.jsFile(fileName,null,fileName,config);else if(!config.cssIn){fileNames=file.getFilteredFileList(config.dir,/\.js$/,!0),fileNames.forEach(function(fileName){var cfg,override,moduleIndex;moduleName=fileName.replace(config.dir,""),moduleName=moduleName.substring(0,moduleName.length-3),moduleIndex=getOwn(config._buildPathToModuleIndex,fileName),moduleIndex=0===moduleIndex||moduleIndex>0?moduleIndex:-1,(moduleIndex>-1||!config.skipDirOptimize||"all"===config.normalizeDirDefines||config.cjsTranslate)&&(fileContents=file.readFile(fileName),!config.cjsTranslate||config.shim&&lang.hasProp(config.shim,moduleName)||(fileContents=commonJs.convert(fileName,fileContents)),-1===moduleIndex&&(config.onBuildRead&&(fileContents=config.onBuildRead(moduleName,fileName,fileContents)),"all"===config.normalizeDirDefines&&(fileContents=build.toTransport(config.namespace,null,fileName,fileContents)),config.onBuildWrite&&(fileContents=config.onBuildWrite(moduleName,fileName,fileContents))),override=moduleIndex>-1?config.modules[moduleIndex].override:null,cfg=override?build.createOverrideConfig(config,override):config,(moduleIndex>-1||!config.skipDirOptimize)&&optimize.jsFile(fileName,fileContents,fileName,cfg,pluginCollector))}),context=require.s.contexts._;for(moduleName in pluginCollector)if(hasProp(pluginCollector,moduleName))for(parentModuleMap=context.makeModuleMap(moduleName),resources=pluginCollector[moduleName],i=0;i<resources.length;i++){if(resource=resources[i],moduleMap=context.makeModuleMap(resource,parentModuleMap),falseProp(context.plugins,moduleMap.prefix)){if(context.plugins[moduleMap.prefix]=!0,!file.exists(require.toUrl(moduleMap.prefix+".js")))continue;context.require([moduleMap.prefix]),moduleMap=context.makeModuleMap(resource,parentModuleMap)}falseProp(pluginProcessed,moduleMap.id)&&(plugin=getOwn(context.defined,moduleMap.prefix),plugin&&plugin.writeFile&&plugin.writeFile(moduleMap.prefix,moduleMap.name,require,makeWriteFile(config.namespace),context.config),pluginProcessed[moduleMap.id]=!0)}file.saveUtf8File(config.dir+"build.txt",buildFileContents)}return config.cssIn&&(buildFileContents+=optimize.cssFile(config.cssIn,config.out,config).buildText),"function"==typeof config.out&&config.out(config.modules[0]._buildText),buildFileContents?(logger.info(buildFileContents),buildFileContents):""})},build.objProps={paths:!0,wrap:!0,pragmas:!0,pragmasOnSave:!0,has:!0,hasOnSave:!0,uglify:!0,uglify2:!0,closure:!0,map:!0,throwWhen:!0},build.hasDotPropMatch=function(prop){var dotProp,index=prop.indexOf(".");return-1!==index?(dotProp=prop.substring(0,index),hasProp(build.objProps,dotProp)):!1},build.convertArrayToObject=function(ary){var i,separatorIndex,prop,value,result={},needArray={include:!0,exclude:!0,excludeShallow:!0,insertRequire:!0,stubModules:!0,deps:!0};for(i=0;i<ary.length;i++){if(separatorIndex=ary[i].indexOf("="),-1===separatorIndex)throw"Malformed name/value pair: ["+ary[i]+"]. Format should be name=value";value=ary[i].substring(separatorIndex+1,ary[i].length),"true"===value?value=!0:"false"===value&&(value=!1),prop=ary[i].substring(0,separatorIndex),getOwn(needArray,prop)&&(value=value.split(",")),build.hasDotPropMatch(prop)?stringDotToObj(result,prop,value):result[prop]=value}return result},build.makeAbsPath=function(path,absFilePath){return absFilePath?(0!==path.indexOf("/")&&-1===path.indexOf(":")&&(path=absFilePath+("/"===absFilePath.charAt(absFilePath.length-1)?"":"/")+path,path=file.normalize(path)),path.replace(lang.backSlashRegExp,"/")):path},build.makeAbsObject=function(props,obj,absFilePath){var i,prop;if(obj)for(i=0;i<props.length;i++)prop=props[i],hasProp(obj,prop)&&"string"==typeof obj[prop]&&(obj[prop]=build.makeAbsPath(obj[prop],absFilePath))},build.makeAbsConfig=function(config,absFilePath){var props,prop,i;for(props=["appDir","dir","baseUrl"],i=0;i<props.length;i++)prop=props[i],getOwn(config,prop)&&("baseUrl"===prop?(config.originalBaseUrl=config.baseUrl,config.baseUrl=config.appDir?build.makeAbsPath(config.originalBaseUrl,config.appDir):build.makeAbsPath(config[prop],absFilePath)):config[prop]=build.makeAbsPath(config[prop],absFilePath),config[prop]=endsWithSlash(config[prop]));build.makeAbsObject(["out","cssIn"],config,absFilePath),build.makeAbsObject(["startFile","endFile"],config.wrap,absFilePath)},build.makeRelativeFilePath=function(refPath,targetPath){var i,dotLength,finalParts,length,refParts=refPath.split("/"),targetParts=targetPath.split("/"),targetName=targetParts.pop(),dotParts=[];for(refParts.pop(),length=refParts.length,i=0;length>i&&refParts[i]===targetParts[i];i+=1);for(finalParts=targetParts.slice(i),dotLength=length-i,i=0;i>-1&&dotLength>i;i+=1)dotParts.push("..");return dotParts.join("/")+(dotParts.length?"/":"")+finalParts.join("/")+(finalParts.length?"/":"")+targetName},build.nestedMix={paths:!0,has:!0,hasOnSave:!0,pragmas:!0,pragmasOnSave:!0},build.createConfig=function(cfg){var config={},buildFileContents,buildFileConfig,mainConfig,mainConfigFile,mainConfigPath,buildFile,absFilePath;if(absFilePath=file.absPath("."),build.makeAbsConfig(cfg,absFilePath),build.makeAbsConfig(buildBaseConfig,absFilePath),lang.mixin(config,buildBaseConfig),lang.mixin(config,cfg,!0),lang.hasProp(config,"logLevel")&&logger.logLevel(config.logLevel),config.buildFile){if(buildFile=file.absPath(config.buildFile),!file.exists(buildFile))throw new Error("ERROR: build file does not exist: "+buildFile);absFilePath=config.baseUrl=file.absPath(file.parent(buildFile)),buildFileContents=file.readFile(buildFile);try{buildFileConfig=eval("("+buildFileContents+")"),build.makeAbsConfig(buildFileConfig,absFilePath),mixConfig(config,buildFileConfig)}catch(e){throw new Error("Build file "+buildFile+" is malformed: "+e)}}if(mainConfigFile=config.mainConfigFile||buildFileConfig&&buildFileConfig.mainConfigFile){if(mainConfigFile=build.makeAbsPath(mainConfigFile,absFilePath),!file.exists(mainConfigFile))throw new Error(mainConfigFile+" does not exist.");try{mainConfig=parse.findConfig(file.readFile(mainConfigFile)).config}catch(configError){throw new Error("The config in mainConfigFile "+mainConfigFile+" cannot be used because it cannot be evaluated correctly while running in the optimizer. Try only using a config that is also valid JSON, or do not use mainConfigFile and instead copy the config values needed into a build file or command line arguments given to the optimizer.\nSource error from parsing: "+mainConfigFile+": "+configError)}mainConfig&&(mainConfigPath=mainConfigFile.substring(0,mainConfigFile.lastIndexOf("/")),config.appDir&&!mainConfig.appDir&&(mainConfig.appDir=config.appDir),mainConfig.baseUrl||(mainConfig.baseUrl=mainConfigPath),build.makeAbsConfig(mainConfig,mainConfigPath),mixConfig(config,mainConfig))}if(buildFileConfig&&mixConfig(config,buildFileConfig),mixConfig(config,cfg),lang.eachProp(config.paths,function(value,prop){if(lang.isArray(value))throw new Error("paths fallback not supported in optimizer. Please provide a build config path override for "+prop);config.paths[prop]=build.makeAbsPath(value,config.baseUrl)}),hasProp(config,"baseUrl")&&(config.dirBaseUrl=config.appDir?build.makeAbsPath(config.originalBaseUrl,config.dir):config.dir||config.baseUrl,config.dirBaseUrl=endsWithSlash(config.dirBaseUrl)),config.main)throw new Error('"main" passed as an option, but the supported option is called "name".');if(config.out&&!config.name&&!config.modules&&!config.include&&!config.cssIn)throw new Error('Missing either a "name", "include" or "modules" option');if(config.cssIn){if(config.dir||config.appDir)throw new Error('cssIn is only for the output of single file CSS optimizations and is not compatible with "dir" or "appDir" configuration.');if(!config.out)throw new Error('"out" option missing.')}if(config.cssIn||config.baseUrl||(config.baseUrl="./"),!config.out&&!config.dir)throw new Error('Missing either an "out" or "dir" config value. If using "appDir" for a full project optimization, use "dir". If you want to optimize to one file, use "out".');if(config.appDir&&config.out)throw new Error('"appDir" is not compatible with "out". Use "dir" instead. appDir is used to copy whole projects, where "out" with "baseUrl" is used to just optimize to one file.');if(config.out&&config.dir)throw new Error('The "out" and "dir" options are incompatible. Use "out" if you are targeting a single file for for optimization, and "dir" if you want the appDir or baseUrl directories optimized.');if(config.dir&&(config.dir===config.baseUrl||config.dir===config.appDir||config.baseUrl&&0!==build.makeRelativeFilePath(config.dir,config.baseUrl).indexOf("..")||config.appDir&&0!==build.makeRelativeFilePath(config.dir,config.appDir).indexOf("..")))throw new Error('"dir" is set to a parent or same directory as "appDir" or "baseUrl". This can result in the deletion of source code. Stopping.');if(config.insertRequire&&!lang.isArray(config.insertRequire))throw new Error("insertRequire should be a list of module IDs to insert in to a require([]) call.");if(config.generateSourceMaps){if(config.preserveLicenseComments&&"none"!==config.optimize)throw new Error("Cannot use preserveLicenseComments and generateSourceMaps together. Either explcitly set preserveLicenseComments to false (default is true) or turn off generateSourceMaps. If you want source maps with license comments, see: http://requirejs.org/docs/errors.html#sourcemapcomments");if("none"!==config.optimize&&"closure"!==config.optimize&&"uglify2"!==config.optimize)throw new Error('optimize: "'+config.optimize+'" does not support generateSourceMaps.')}if(!config.name&&!config.include||config.modules){if(config.modules&&config.out)throw new Error('If the "modules" option is used, then there should be a "dir" option set and "out" should not be used since "out" is only for single file optimization output.');if(config.modules&&config.name)throw new Error('"name" and "modules" options are incompatible. Either use "name" if doing a single file optimization, or "modules" if you want to target more than one file for optimization.')}else config.modules=[{name:config.name,out:config.out,create:config.create,include:config.include,exclude:config.exclude,excludeShallow:config.excludeShallow,insertRequire:config.insertRequire,stubModules:config.stubModules}],delete config.stubModules;if(config.out&&!config.cssIn&&(cfg.optimizeCss||(config.optimizeCss="none")),config.cssPrefix=config.cssPrefix?endsWithSlash(config.cssPrefix):"",config.modules&&config.modules.length&&config.modules.forEach(function(mod){config.stubModules&&(mod.stubModules=config.stubModules.concat(mod.stubModules||[])),mod.stubModules&&(mod.stubModules._byName={},mod.stubModules.forEach(function(id){mod.stubModules._byName[id]=!0})),mod.override&&normalizeWrapConfig(mod.override,absFilePath)}),normalizeWrapConfig(config,absFilePath),config.context)throw new Error('The build argument "context" is not supported in a build. It should only be used in web pages.');return hasProp(config,"normalizeDirDefines")||(config.normalizeDirDefines="none"===config.optimize||config.skipDirOptimize?"skip":"all"),hasProp(config,"fileExclusionRegExp")?file.exclusionRegExp="string"==typeof config.fileExclusionRegExp?new RegExp(config.fileExclusionRegExp):config.fileExclusionRegExp:hasProp(config,"dirExclusionRegExp")&&(file.exclusionRegExp=config.dirExclusionRegExp),delete config.jQuery,delete config.enforceDefine,delete config.urlArgs,config},build.findBuildModule=function(moduleName,modules){var i,module;for(i=0;i<modules.length;i++)if(module=modules[i],module.name===moduleName)return module;return null},build.removeModulePath=function(module,path,layer){var index=layer.buildFilePaths.indexOf(path);-1!==index&&layer.buildFilePaths.splice(index,1)},build.traceDependencies=function(module,config,baseLoaderConfig){function includeFinished(value){var hasError=!1;if(syncChecks[env.get()])try{build.checkForErrors(context)}catch(e){hasError=!0,deferred.reject(e)}hasError||deferred.resolve(value)}var include,override,layer,context,oldContext,rawTextByIds,syncChecks={rhino:!0,node:!0,xpconnect:!0},deferred=prim();return oldContext=require._buildReset(),layer=require._layer,context=layer.context,baseLoaderConfig&&require(lang.deeplikeCopy(baseLoaderConfig)),logger.trace("\nTracing dependencies for: "+(module.name||("function"==typeof module.out?"FUNCTION":module.out))),include=module.name&&!module.create?[module.name]:[],module.include&&(include=include.concat(module.include)),module.override&&(override=baseLoaderConfig?build.createOverrideConfig(baseLoaderConfig,module.override):lang.deeplikeCopy(module.override),require(override)),rawTextByIds=require.s.contexts._.config.rawText,rawTextByIds&&lang.eachProp(rawTextByIds,function(contents,id){var url=require.toUrl(id)+".js";require._cachedRawText[url]=contents}),deferred.reject.__requireJsBuild=!0,includeFinished.__requireJsBuild=!0,require(include,includeFinished,deferred.reject),syncChecks[env.get()]&&build.checkForErrors(context),deferred.promise.then(function(){return module.override&&baseLoaderConfig&&require(lang.deeplikeCopy(baseLoaderConfig)),build.checkForErrors(context),layer})},build.checkForErrors=function(context){function populateErrUrlMap(id,errUrl,skipNew){skipNew||errIds.push(id),errUrlMap[errUrl]?(hasErrUrl=!0,errUrlConflicts[errUrl]||(errUrlConflicts[errUrl]=[],errUrlConflicts[errUrl].push(errUrlMap[errUrl])),errUrlConflicts[errUrl].push(id)):skipNew||(errUrlMap[errUrl]=id)}var id,prop,mod,idParts,pluginId,errMessage="",failedPluginMap={},failedPluginIds=[],errIds=[],errUrlMap={},errUrlConflicts={},hasErrUrl=!1,hasUndefined=!1,defined=context.defined,registry=context.registry;for(id in registry)hasProp(registry,id)&&0!==id.indexOf("_@r")&&(hasUndefined=!0,mod=getOwn(registry,id),-1===id.indexOf("_unnormalized")&&mod&&mod.enabled&&populateErrUrlMap(id,mod.map.url),idParts=id.split("!"),pluginId=idParts[0],idParts.length>1&&falseProp(failedPluginMap,pluginId)&&(failedPluginIds.push(pluginId),failedPluginMap[pluginId]=!0));if(hasUndefined)for(id in defined)hasProp(defined,id)&&-1===id.indexOf("!")&&populateErrUrlMap(id,require.toUrl(id)+".js",!0);if(errIds.length||failedPluginIds.length){if(failedPluginIds.length&&(errMessage+="Loader plugin"+(1===failedPluginIds.length?"":"s")+" did not call the load callback in the build: "+failedPluginIds.join(", ")+"\n"),errMessage+="Module loading did not complete for: "+errIds.join(", "),hasErrUrl){errMessage+="\nThe following modules share the same URL. This could be a misconfiguration if that URL only has one anonymous module in it:";for(prop in errUrlConflicts)hasProp(errUrlConflicts,prop)&&(errMessage+="\n"+prop+": "+errUrlConflicts[prop].join(", "))}throw new Error(errMessage)}},build.createOverrideConfig=function(config,override){var cfg=lang.deeplikeCopy(config),oride=lang.deeplikeCopy(override);return lang.eachProp(oride,function(value,prop){hasProp(build.objProps,prop)?(cfg[prop]={},lang.mixin(cfg[prop],config[prop],!0),lang.mixin(cfg[prop],override[prop],!0)):cfg[prop]=override[prop]}),cfg},build.flattenModule=function(module,layer,config){var fileContents,sourceMapGenerator,sourceMapBase,buildFileContents="";return prim().start(function(){var reqIndex,currContents,moduleName,shim,packageConfig,nonPackageName,parts,builder,writeApi,namespace,namespaceWithDot,stubModulesByName,context=layer.context,onLayerEnds=[],onLayerEndAdded={};return module.override&&(config=build.createOverrideConfig(config,module.override)),namespace=config.namespace||"",namespaceWithDot=namespace?namespace+".":"",stubModulesByName=module.stubModules&&module.stubModules._byName||{},module.onCompleteData={name:module.name,path:config.dir?module._buildPath.replace(config.dir,""):module._buildPath,included:[]},buildFileContents+="\n"+module.onCompleteData.path+"\n----------------\n",layer.existingRequireUrl&&(reqIndex=layer.buildFilePaths.indexOf(layer.existingRequireUrl),-1!==reqIndex&&(layer.buildFilePaths.splice(reqIndex,1),layer.buildFilePaths.unshift(layer.existingRequireUrl))),config.generateSourceMaps&&(sourceMapBase=config.dir||config.baseUrl,sourceMapGenerator=new SourceMapGenerator.SourceMapGenerator({file:module._buildPath.replace(sourceMapBase,"")})),fileContents="",prim.serial(layer.buildFilePaths.map(function(path){return function(){var lineCount,singleContents="";return moduleName=layer.buildFileToModule[path],packageConfig=layer.context.config.pkgs&&getOwn(layer.context.config.pkgs,moduleName),packageConfig&&(nonPackageName=moduleName,moduleName+="/"+packageConfig.main),prim().start(function(){return parts=context.makeModuleMap(moduleName),builder=parts.prefix&&getOwn(context.defined,parts.prefix),builder?(builder.onLayerEnd&&falseProp(onLayerEndAdded,parts.prefix)&&(onLayerEnds.push(builder),onLayerEndAdded[parts.prefix]=!0),builder.write&&(writeApi=function(input){singleContents+="\n"+addSemiColon(input,config),config.onBuildWrite&&(singleContents=config.onBuildWrite(moduleName,path,singleContents))},writeApi.asModule=function(moduleName,input){singleContents+="\n"+addSemiColon(build.toTransport(namespace,moduleName,path,input,layer,{useSourceUrl:layer.context.config.useSourceUrl}),config),config.onBuildWrite&&(singleContents=config.onBuildWrite(moduleName,path,singleContents))},builder.write(parts.prefix,parts.name,writeApi)),void 0):prim().start(function(){return hasProp(stubModulesByName,moduleName)?hasProp(layer.context.plugins,moduleName)?'define({load: function(id){throw new Error("Dynamic load not allowed: " + id);}});':"define({});":require._cacheReadAsync(path)}).then(function(text){var hasPackageName;currContents=text,!config.cjsTranslate||config.shim&&lang.hasProp(config.shim,moduleName)||(currContents=commonJs.convert(path,currContents)),config.onBuildRead&&(currContents=config.onBuildRead(moduleName,path,currContents)),packageConfig&&(hasPackageName=nonPackageName===parse.getNamedDefine(currContents)),namespace&&(currContents=pragma.namespace(currContents,namespace)),currContents=build.toTransport(namespace,moduleName,path,currContents,layer,{useSourceUrl:config.useSourceUrl}),packageConfig&&!hasPackageName&&(currContents=addSemiColon(currContents,config)+"\n",currContents+=namespaceWithDot+"define('"+packageConfig.name+"', ['"+moduleName+"'], function (main) { return main; });\n"),config.onBuildWrite&&(currContents=config.onBuildWrite(moduleName,path,currContents)),singleContents+="\n"+addSemiColon(currContents,config)})}).then(function(){var refPath,pluginId,resourcePath,sourceMapPath,sourceMapLineNumber,shortPath=path.replace(config.dir,"");if(module.onCompleteData.included.push(shortPath),buildFileContents+=shortPath+"\n",moduleName&&falseProp(layer.modulesWithNames,moduleName)&&!config.skipModuleInsertion&&(shim=config.shim&&(getOwn(config.shim,moduleName)||packageConfig&&getOwn(config.shim,nonPackageName)),singleContents+=shim?"\n"+namespaceWithDot+'define("'+moduleName+'", '+(shim.deps&&shim.deps.length?build.makeJsArrayString(shim.deps)+", ":"")+(shim.exportsFn?shim.exportsFn():"function(){}")+");\n":"\n"+namespaceWithDot+'define("'+moduleName+'", function(){});\n'),sourceMapGenerator){refPath=config.out?config.baseUrl:module._buildPath,parts=path.split("!"),1===parts.length?sourceMapPath=build.makeRelativeFilePath(refPath,path):(pluginId=parts.shift(),resourcePath=parts.join("!"),sourceMapPath=resourceIsModuleIdRegExp.test(resourcePath)?build.makeRelativeFilePath(refPath,require.toUrl(resourcePath))+"!"+pluginId:path),sourceMapLineNumber=fileContents.split("\n").length-1,lineCount=singleContents.split("\n").length;for(var i=1;lineCount>=i;i+=1)sourceMapGenerator.addMapping({generated:{line:sourceMapLineNumber+i,column:0},original:{line:i,column:0},source:sourceMapPath});sourceMapGenerator.setSourceContent(sourceMapPath,singleContents)}fileContents+=singleContents})}})).then(function(){onLayerEnds.length&&onLayerEnds.forEach(function(builder){var path;"string"==typeof module.out?path=module.out:"string"==typeof module._buildPath&&(path=module._buildPath),builder.onLayerEnd(function(input){fileContents+="\n"+addSemiColon(input,config)},{name:module.name,path:path})}),module.create&&(fileContents+="\n"+namespaceWithDot+'define("'+module.name+'", function(){});\n'),module.insertRequire&&(fileContents+="\n"+namespaceWithDot+'require(["'+module.insertRequire.join('", "')+'"]);\n')})}).then(function(){return{text:config.wrap?config.wrap.start+fileContents+config.wrap.end:fileContents,buildText:buildFileContents,sourceMap:sourceMapGenerator?JSON.stringify(sourceMapGenerator.toJSON(),null,"  "):void 0}})},build.makeJsArrayString=function(ary){return'["'+ary.map(function(item){return lang.jsEscape(item)}).join('","')+'"]'},build.toTransport=function(namespace,moduleName,path,contents,layer,options){function onFound(info){layer&&(info.needsId||info.foundId===moduleName)&&(layer.modulesWithNames[moduleName]=!0)}var baseUrl=layer&&layer.context.config.baseUrl;return baseUrl&&(path=path.replace(baseUrl,"")),transform.toTransport(namespace,moduleName,path,contents,onFound,options)},build})}function setBaseUrl(fileName){dir=fileName.replace(/\\/g,"/"),-1!==dir.indexOf("/")&&(dir=dir.split("/"),dir.pop(),dir=dir.join("/"),exec("require({baseUrl: '"+dir.replace(/[\\"']/g,"\\$&")+"'});"))}function createRjsApi(){requirejs.optimize=function(config,callback,errback){loadedOptimizedLib||(loadLib(),loadedOptimizedLib=!0);var runBuild=function(build,logger,quit){function done(result){if(requirejs._buildReset&&(requirejs._buildReset(),requirejs._cacheReset()),result instanceof Error)throw result;return result}config.logLevel=config.hasOwnProperty("logLevel")?config.logLevel:logger.SILENT,requirejs._buildReset&&(requirejs._buildReset(),requirejs._cacheReset()),errback=errback||function(err){console.log(err),quit(1)},build(config).then(done,done).then(callback,errback)};requirejs({context:"build"},["build","logger","env!env/quit"],runBuild)},requirejs.tools={useLib:function(contextName,callback){callback||(callback=contextName,contextName="uselib"),useLibLoaded[contextName]||(loadLib(),useLibLoaded[contextName]=!0);var req=requirejs({context:contextName});req(["build"],function(){callback(req)})}},requirejs.define=define}var fileName,env,fs,vm,path,exec,rhinoContext,dir,nodeRequire,nodeDefine,exists,reqMain,loadedOptimizedLib,existsForNode,Cc,Ci,version="2.1.9",jsSuffixRegExp=/\.js$/,commandOption="",useLibLoaded={},rhinoArgs=args,xpconnectArgs=args,readFile="undefined"!=typeof readFileFunc?readFileFunc:null;return"undefined"!=typeof navigator&&"undefined"!=typeof document||"undefined"!=typeof importScripts&&"undefined"!=typeof self?(env="browser",readFile=function(path){return fs.readFileSync(path,"utf8")},exec=function(string){return eval(string)},exists=function(){return console.log("x.js exists not applicable in browser env"),!1}):"undefined"!=typeof Packages?(env="rhino",fileName=args[0],fileName&&0===fileName.indexOf("-")&&(commandOption=fileName.substring(1),fileName=args[1]),rhinoContext=Packages.org.mozilla.javascript.ContextFactory.getGlobal().enterContext(),exec=function(string,name){return rhinoContext.evaluateString(this,string,name,0,null)
},exists=function(fileName){return new java.io.File(fileName).exists()},"undefined"==typeof console&&(console={log:function(){print.apply(void 0,arguments)}})):"undefined"!=typeof process&&process.versions&&process.versions.node?(env="node",fs=require("fs"),vm=require("vm"),path=require("path"),existsForNode=fs.existsSync||path.existsSync,nodeRequire=require,nodeDefine=define,reqMain=require.main,require=void 0,define=void 0,readFile=function(path){return fs.readFileSync(path,"utf8")},exec=function(string,name){return vm.runInThisContext(this.requirejsVars.require.makeNodeWrapper(string),name?fs.realpathSync(name):"")},exists=function(fileName){return existsForNode(fileName)},fileName=process.argv[2],fileName&&0===fileName.indexOf("-")&&(commandOption=fileName.substring(1),fileName=process.argv[3])):"undefined"!=typeof Components&&Components.classes&&Components.interfaces&&(env="xpconnect",Components.utils["import"]("resource://gre/modules/FileUtils.jsm"),Cc=Components.classes,Ci=Components.interfaces,fileName=args[0],fileName&&0===fileName.indexOf("-")&&(commandOption=fileName.substring(1),fileName=args[1]),xpcUtil={isWindows:"@mozilla.org/windows-registry-key;1"in Cc,cwd:function(){return FileUtils.getFile("CurWorkD",[]).path},normalize:function(path){var i,part,ary,firstChar=path.charAt(0);for("/"!==firstChar&&"\\"!==firstChar&&-1===path.indexOf(":")&&(path=xpcUtil.cwd()+"/"+path),ary=path.replace(/\\/g,"/").split("/"),i=0;i<ary.length;i+=1)part=ary[i],"."===part?(ary.splice(i,1),i-=1):".."===part&&(ary.splice(i-1,2),i-=2);return ary.join("/")},xpfile:function(path){var fullPath;try{return fullPath=xpcUtil.normalize(path),xpcUtil.isWindows&&(fullPath=fullPath.replace(/\//g,"\\")),new FileUtils.File(fullPath)}catch(e){throw new Error((fullPath||path)+" failed: "+e)}},readFile:function(path,encoding){encoding=encoding||"utf-8";var inStream,convertStream,readData={},fileObj=xpcUtil.xpfile(path);try{return inStream=Cc["@mozilla.org/network/file-input-stream;1"].createInstance(Ci.nsIFileInputStream),inStream.init(fileObj,1,0,!1),convertStream=Cc["@mozilla.org/intl/converter-input-stream;1"].createInstance(Ci.nsIConverterInputStream),convertStream.init(inStream,encoding,inStream.available(),Ci.nsIConverterInputStream.DEFAULT_REPLACEMENT_CHARACTER),convertStream.readString(inStream.available(),readData),readData.value}catch(e){throw new Error((fileObj&&fileObj.path||"")+": "+e)}finally{convertStream&&convertStream.close(),inStream&&inStream.close()}}},readFile=xpcUtil.readFile,exec=function(string){return eval(string)},exists=function(fileName){return xpcUtil.xpfile(fileName).exists()},"undefined"==typeof console&&(console={log:function(){print.apply(void 0,arguments)}})),function(global){function isFunction(it){return"[object Function]"===ostring.call(it)}function isArray(it){return"[object Array]"===ostring.call(it)}function each(ary,func){if(ary){var i;for(i=0;i<ary.length&&(!ary[i]||!func(ary[i],i,ary));i+=1);}}function eachReverse(ary,func){if(ary){var i;for(i=ary.length-1;i>-1&&(!ary[i]||!func(ary[i],i,ary));i-=1);}}function hasProp(obj,prop){return hasOwn.call(obj,prop)}function getOwn(obj,prop){return hasProp(obj,prop)&&obj[prop]}function eachProp(obj,func){var prop;for(prop in obj)if(hasProp(obj,prop)&&func(obj[prop],prop))break}function mixin(target,source,force,deepStringMixin){return source&&eachProp(source,function(value,prop){(force||!hasProp(target,prop))&&(deepStringMixin&&"string"!=typeof value?(target[prop]||(target[prop]={}),mixin(target[prop],value,force,deepStringMixin)):target[prop]=value)}),target}function bind(obj,fn){return function(){return fn.apply(obj,arguments)}}function scripts(){return document.getElementsByTagName("script")}function defaultOnError(err){throw err}function getGlobal(value){if(!value)return value;var g=global;return each(value.split("."),function(part){g=g[part]}),g}function makeError(id,msg,err,requireModules){var e=new Error(msg+"\nhttp://requirejs.org/docs/errors.html#"+id);return e.requireType=id,e.requireModules=requireModules,err&&(e.originalError=err),e}function newContext(contextName){function trimDots(ary){var i,part;for(i=0;ary[i];i+=1)if(part=ary[i],"."===part)ary.splice(i,1),i-=1;else if(".."===part){if(1===i&&(".."===ary[2]||".."===ary[0]))break;i>0&&(ary.splice(i-1,2),i-=2)}}function normalize(name,baseName,applyMap){var pkgName,pkgConfig,mapValue,nameParts,i,j,nameSegment,foundMap,foundI,foundStarMap,starI,baseParts=baseName&&baseName.split("/"),normalizedBaseParts=baseParts,map=config.map,starMap=map&&map["*"];if(name&&"."===name.charAt(0)&&(baseName?(normalizedBaseParts=getOwn(config.pkgs,baseName)?baseParts=[baseName]:baseParts.slice(0,baseParts.length-1),name=normalizedBaseParts.concat(name.split("/")),trimDots(name),pkgConfig=getOwn(config.pkgs,pkgName=name[0]),name=name.join("/"),pkgConfig&&name===pkgName+"/"+pkgConfig.main&&(name=pkgName)):0===name.indexOf("./")&&(name=name.substring(2))),applyMap&&map&&(baseParts||starMap)){for(nameParts=name.split("/"),i=nameParts.length;i>0;i-=1){if(nameSegment=nameParts.slice(0,i).join("/"),baseParts)for(j=baseParts.length;j>0;j-=1)if(mapValue=getOwn(map,baseParts.slice(0,j).join("/")),mapValue&&(mapValue=getOwn(mapValue,nameSegment))){foundMap=mapValue,foundI=i;break}if(foundMap)break;!foundStarMap&&starMap&&getOwn(starMap,nameSegment)&&(foundStarMap=getOwn(starMap,nameSegment),starI=i)}!foundMap&&foundStarMap&&(foundMap=foundStarMap,foundI=starI),foundMap&&(nameParts.splice(0,foundI,foundMap),name=nameParts.join("/"))}return name}function removeScript(name){isBrowser&&each(scripts(),function(scriptNode){return scriptNode.getAttribute("data-requiremodule")===name&&scriptNode.getAttribute("data-requirecontext")===context.contextName?(scriptNode.parentNode.removeChild(scriptNode),!0):void 0})}function hasPathFallback(id){var pathConfig=getOwn(config.paths,id);return pathConfig&&isArray(pathConfig)&&pathConfig.length>1?(pathConfig.shift(),context.require.undef(id),context.require([id]),!0):void 0}function splitPrefix(name){var prefix,index=name?name.indexOf("!"):-1;return index>-1&&(prefix=name.substring(0,index),name=name.substring(index+1,name.length)),[prefix,name]}function makeModuleMap(name,parentModuleMap,isNormalized,applyMap){var url,pluginModule,suffix,nameParts,prefix=null,parentName=parentModuleMap?parentModuleMap.name:null,originalName=name,isDefine=!0,normalizedName="";return name||(isDefine=!1,name="_@r"+(requireCounter+=1)),nameParts=splitPrefix(name),prefix=nameParts[0],name=nameParts[1],prefix&&(prefix=normalize(prefix,parentName,applyMap),pluginModule=getOwn(defined,prefix)),name&&(prefix?normalizedName=pluginModule&&pluginModule.normalize?pluginModule.normalize(name,function(name){return normalize(name,parentName,applyMap)}):normalize(name,parentName,applyMap):(normalizedName=normalize(name,parentName,applyMap),nameParts=splitPrefix(normalizedName),prefix=nameParts[0],normalizedName=nameParts[1],isNormalized=!0,url=context.nameToUrl(normalizedName))),suffix=!prefix||pluginModule||isNormalized?"":"_unnormalized"+(unnormalizedCounter+=1),{prefix:prefix,name:normalizedName,parentMap:parentModuleMap,unnormalized:!!suffix,url:url,originalName:originalName,isDefine:isDefine,id:(prefix?prefix+"!"+normalizedName:normalizedName)+suffix}}function getModule(depMap){var id=depMap.id,mod=getOwn(registry,id);return mod||(mod=registry[id]=new context.Module(depMap)),mod}function on(depMap,name,fn){var id=depMap.id,mod=getOwn(registry,id);!hasProp(defined,id)||mod&&!mod.defineEmitComplete?(mod=getModule(depMap),mod.error&&"error"===name?fn(mod.error):mod.on(name,fn)):"defined"===name&&fn(defined[id])}function onError(err,errback){var ids=err.requireModules,notified=!1;errback?errback(err):(each(ids,function(id){var mod=getOwn(registry,id);mod&&(mod.error=err,mod.events.error&&(notified=!0,mod.emit("error",err)))}),notified||req.onError(err))}function takeGlobalQueue(){globalDefQueue.length&&(apsp.apply(defQueue,[defQueue.length-1,0].concat(globalDefQueue)),globalDefQueue=[])}function cleanRegistry(id){delete registry[id],delete enabledRegistry[id]}function breakCycle(mod,traced,processed){var id=mod.map.id;mod.error?mod.emit("error",mod.error):(traced[id]=!0,each(mod.depMaps,function(depMap,i){var depId=depMap.id,dep=getOwn(registry,depId);!dep||mod.depMatched[i]||processed[depId]||(getOwn(traced,depId)?(mod.defineDep(i,defined[depId]),mod.check()):breakCycle(dep,traced,processed))}),processed[id]=!0)}function checkLoaded(){var map,modId,err,usingPathFallback,waitInterval=1e3*config.waitSeconds,expired=waitInterval&&context.startTime+waitInterval<(new Date).getTime(),noLoads=[],reqCalls=[],stillLoading=!1,needCycleCheck=!0;if(!inCheckLoaded){if(inCheckLoaded=!0,eachProp(enabledRegistry,function(mod){if(map=mod.map,modId=map.id,mod.enabled&&(map.isDefine||reqCalls.push(mod),!mod.error))if(!mod.inited&&expired)hasPathFallback(modId)?(usingPathFallback=!0,stillLoading=!0):(noLoads.push(modId),removeScript(modId));else if(!mod.inited&&mod.fetched&&map.isDefine&&(stillLoading=!0,!map.prefix))return needCycleCheck=!1}),expired&&noLoads.length)return err=makeError("timeout","Load timeout for modules: "+noLoads,null,noLoads),err.contextName=context.contextName,onError(err);needCycleCheck&&each(reqCalls,function(mod){breakCycle(mod,{},{})}),expired&&!usingPathFallback||!stillLoading||!isBrowser&&!isWebWorker||checkLoadedTimeoutId||(checkLoadedTimeoutId=setTimeout(function(){checkLoadedTimeoutId=0,checkLoaded()},50)),inCheckLoaded=!1}}function callGetModule(args){hasProp(defined,args[0])||getModule(makeModuleMap(args[0],null,!0)).init(args[1],args[2])}function removeListener(node,func,name,ieName){node.detachEvent&&!isOpera?ieName&&node.detachEvent(ieName,func):node.removeEventListener(name,func,!1)}function getScriptData(evt){var node=evt.currentTarget||evt.srcElement;return removeListener(node,context.onScriptLoad,"load","onreadystatechange"),removeListener(node,context.onScriptError,"error"),{node:node,id:node&&node.getAttribute("data-requiremodule")}}function intakeDefines(){var args;for(takeGlobalQueue();defQueue.length;){if(args=defQueue.shift(),null===args[0])return onError(makeError("mismatch","Mismatched anonymous define() module: "+args[args.length-1]));callGetModule(args)}}var inCheckLoaded,Module,context,handlers,checkLoadedTimeoutId,config={waitSeconds:7,baseUrl:"./",paths:{},pkgs:{},shim:{},config:{}},registry={},enabledRegistry={},undefEvents={},defQueue=[],defined={},urlFetched={},requireCounter=1,unnormalizedCounter=1;return handlers={require:function(mod){return mod.require?mod.require:mod.require=context.makeRequire(mod.map)},exports:function(mod){return mod.usingExports=!0,mod.map.isDefine?mod.exports?mod.exports:mod.exports=defined[mod.map.id]={}:void 0},module:function(mod){return mod.module?mod.module:mod.module={id:mod.map.id,uri:mod.map.url,config:function(){var c,pkg=getOwn(config.pkgs,mod.map.id);return c=pkg?getOwn(config.config,mod.map.id+"/"+pkg.main):getOwn(config.config,mod.map.id),c||{}},exports:defined[mod.map.id]}}},Module=function(map){this.events=getOwn(undefEvents,map.id)||{},this.map=map,this.shim=getOwn(config.shim,map.id),this.depExports=[],this.depMaps=[],this.depMatched=[],this.pluginMaps={},this.depCount=0},Module.prototype={init:function(depMaps,factory,errback,options){options=options||{},this.inited||(this.factory=factory,errback?this.on("error",errback):this.events.error&&(errback=bind(this,function(err){this.emit("error",err)})),this.depMaps=depMaps&&depMaps.slice(0),this.errback=errback,this.inited=!0,this.ignore=options.ignore,options.enabled||this.enabled?this.enable():this.check())},defineDep:function(i,depExports){this.depMatched[i]||(this.depMatched[i]=!0,this.depCount-=1,this.depExports[i]=depExports)},fetch:function(){if(!this.fetched){this.fetched=!0,context.startTime=(new Date).getTime();var map=this.map;return this.shim?(context.makeRequire(this.map,{enableBuildCallback:!0})(this.shim.deps||[],bind(this,function(){return map.prefix?this.callPlugin():this.load()})),void 0):map.prefix?this.callPlugin():this.load()}},load:function(){var url=this.map.url;urlFetched[url]||(urlFetched[url]=!0,context.load(this.map.id,url))},check:function(){if(this.enabled&&!this.enabling){var err,cjsModule,id=this.map.id,depExports=this.depExports,exports=this.exports,factory=this.factory;if(this.inited){if(this.error)this.emit("error",this.error);else if(!this.defining){if(this.defining=!0,this.depCount<1&&!this.defined){if(isFunction(factory)){if(this.events.error&&this.map.isDefine||req.onError!==defaultOnError)try{exports=context.execCb(id,factory,depExports,exports)}catch(e){err=e}else exports=context.execCb(id,factory,depExports,exports);if(this.map.isDefine&&(cjsModule=this.module,cjsModule&&void 0!==cjsModule.exports&&cjsModule.exports!==this.exports?exports=cjsModule.exports:void 0===exports&&this.usingExports&&(exports=this.exports)),err)return err.requireMap=this.map,err.requireModules=this.map.isDefine?[this.map.id]:null,err.requireType=this.map.isDefine?"define":"require",onError(this.error=err)}else exports=factory;this.exports=exports,this.map.isDefine&&!this.ignore&&(defined[id]=exports,req.onResourceLoad&&req.onResourceLoad(context,this.map,this.depMaps)),cleanRegistry(id),this.defined=!0}this.defining=!1,this.defined&&!this.defineEmitted&&(this.defineEmitted=!0,this.emit("defined",this.exports),this.defineEmitComplete=!0)}}else this.fetch()}},callPlugin:function(){var map=this.map,id=map.id,pluginMap=makeModuleMap(map.prefix);this.depMaps.push(pluginMap),on(pluginMap,"defined",bind(this,function(plugin){var load,normalizedMap,normalizedMod,name=this.map.name,parentName=this.map.parentMap?this.map.parentMap.name:null,localRequire=context.makeRequire(map.parentMap,{enableBuildCallback:!0});return this.map.unnormalized?(plugin.normalize&&(name=plugin.normalize(name,function(name){return normalize(name,parentName,!0)})||""),normalizedMap=makeModuleMap(map.prefix+"!"+name,this.map.parentMap),on(normalizedMap,"defined",bind(this,function(value){this.init([],function(){return value},null,{enabled:!0,ignore:!0})})),normalizedMod=getOwn(registry,normalizedMap.id),normalizedMod&&(this.depMaps.push(normalizedMap),this.events.error&&normalizedMod.on("error",bind(this,function(err){this.emit("error",err)})),normalizedMod.enable()),void 0):(load=bind(this,function(value){this.init([],function(){return value},null,{enabled:!0})}),load.error=bind(this,function(err){this.inited=!0,this.error=err,err.requireModules=[id],eachProp(registry,function(mod){0===mod.map.id.indexOf(id+"_unnormalized")&&cleanRegistry(mod.map.id)}),onError(err)}),load.fromText=bind(this,function(text,textAlt){var moduleName=map.name,moduleMap=makeModuleMap(moduleName),hasInteractive=useInteractive;textAlt&&(text=textAlt),hasInteractive&&(useInteractive=!1),getModule(moduleMap),hasProp(config.config,id)&&(config.config[moduleName]=config.config[id]);try{req.exec(text)}catch(e){return onError(makeError("fromtexteval","fromText eval for "+id+" failed: "+e,e,[id]))}hasInteractive&&(useInteractive=!0),this.depMaps.push(moduleMap),context.completeLoad(moduleName),localRequire([moduleName],load)}),plugin.load(map.name,localRequire,load,config),void 0)})),context.enable(pluginMap,this),this.pluginMaps[pluginMap.id]=pluginMap},enable:function(){enabledRegistry[this.map.id]=this,this.enabled=!0,this.enabling=!0,each(this.depMaps,bind(this,function(depMap,i){var id,mod,handler;if("string"==typeof depMap){if(depMap=makeModuleMap(depMap,this.map.isDefine?this.map:this.map.parentMap,!1,!this.skipMap),this.depMaps[i]=depMap,handler=getOwn(handlers,depMap.id))return this.depExports[i]=handler(this),void 0;this.depCount+=1,on(depMap,"defined",bind(this,function(depExports){this.defineDep(i,depExports),this.check()})),this.errback&&on(depMap,"error",bind(this,this.errback))}id=depMap.id,mod=registry[id],hasProp(handlers,id)||!mod||mod.enabled||context.enable(depMap,this)})),eachProp(this.pluginMaps,bind(this,function(pluginMap){var mod=getOwn(registry,pluginMap.id);mod&&!mod.enabled&&context.enable(pluginMap,this)})),this.enabling=!1,this.check()},on:function(name,cb){var cbs=this.events[name];cbs||(cbs=this.events[name]=[]),cbs.push(cb)},emit:function(name,evt){each(this.events[name],function(cb){cb(evt)}),"error"===name&&delete this.events[name]}},context={config:config,contextName:contextName,registry:registry,defined:defined,urlFetched:urlFetched,defQueue:defQueue,Module:Module,makeModuleMap:makeModuleMap,nextTick:req.nextTick,onError:onError,configure:function(cfg){cfg.baseUrl&&"/"!==cfg.baseUrl.charAt(cfg.baseUrl.length-1)&&(cfg.baseUrl+="/");var pkgs=config.pkgs,shim=config.shim,objs={paths:!0,config:!0,map:!0};eachProp(cfg,function(value,prop){objs[prop]?"map"===prop?(config.map||(config.map={}),mixin(config[prop],value,!0,!0)):mixin(config[prop],value,!0):config[prop]=value}),cfg.shim&&(eachProp(cfg.shim,function(value,id){isArray(value)&&(value={deps:value}),!value.exports&&!value.init||value.exportsFn||(value.exportsFn=context.makeShimExports(value)),shim[id]=value}),config.shim=shim),cfg.packages&&(each(cfg.packages,function(pkgObj){var location;pkgObj="string"==typeof pkgObj?{name:pkgObj}:pkgObj,location=pkgObj.location,pkgs[pkgObj.name]={name:pkgObj.name,location:location||pkgObj.name,main:(pkgObj.main||"main").replace(currDirRegExp,"").replace(jsSuffixRegExp,"")}}),config.pkgs=pkgs),eachProp(registry,function(mod,id){mod.inited||mod.map.unnormalized||(mod.map=makeModuleMap(id))}),(cfg.deps||cfg.callback)&&context.require(cfg.deps||[],cfg.callback)},makeShimExports:function(value){function fn(){var ret;return value.init&&(ret=value.init.apply(global,arguments)),ret||value.exports&&getGlobal(value.exports)}return fn},makeRequire:function(relMap,options){function localRequire(deps,callback,errback){var id,map,requireMod;return options.enableBuildCallback&&callback&&isFunction(callback)&&(callback.__requireJsBuild=!0),"string"==typeof deps?isFunction(callback)?onError(makeError("requireargs","Invalid require call"),errback):relMap&&hasProp(handlers,deps)?handlers[deps](registry[relMap.id]):req.get?req.get(context,deps,relMap,localRequire):(map=makeModuleMap(deps,relMap,!1,!0),id=map.id,hasProp(defined,id)?defined[id]:onError(makeError("notloaded",'Module name "'+id+'" has not been loaded yet for context: '+contextName+(relMap?"":". Use require([])")))):(intakeDefines(),context.nextTick(function(){intakeDefines(),requireMod=getModule(makeModuleMap(null,relMap)),requireMod.skipMap=options.skipMap,requireMod.init(deps,callback,errback,{enabled:!0}),checkLoaded()}),localRequire)}return options=options||{},mixin(localRequire,{isBrowser:isBrowser,toUrl:function(moduleNamePlusExt){var ext,index=moduleNamePlusExt.lastIndexOf("."),segment=moduleNamePlusExt.split("/")[0],isRelative="."===segment||".."===segment;return-1!==index&&(!isRelative||index>1)&&(ext=moduleNamePlusExt.substring(index,moduleNamePlusExt.length),moduleNamePlusExt=moduleNamePlusExt.substring(0,index)),context.nameToUrl(normalize(moduleNamePlusExt,relMap&&relMap.id,!0),ext,!0)},defined:function(id){return hasProp(defined,makeModuleMap(id,relMap,!1,!0).id)},specified:function(id){return id=makeModuleMap(id,relMap,!1,!0).id,hasProp(defined,id)||hasProp(registry,id)}}),relMap||(localRequire.undef=function(id){takeGlobalQueue();var map=makeModuleMap(id,relMap,!0),mod=getOwn(registry,id);removeScript(id),delete defined[id],delete urlFetched[map.url],delete undefEvents[id],mod&&(mod.events.defined&&(undefEvents[id]=mod.events),cleanRegistry(id))}),localRequire},enable:function(depMap){var mod=getOwn(registry,depMap.id);mod&&getModule(depMap).enable()},completeLoad:function(moduleName){var found,args,mod,shim=getOwn(config.shim,moduleName)||{},shExports=shim.exports;for(takeGlobalQueue();defQueue.length;){if(args=defQueue.shift(),null===args[0]){if(args[0]=moduleName,found)break;found=!0}else args[0]===moduleName&&(found=!0);callGetModule(args)}if(mod=getOwn(registry,moduleName),!found&&!hasProp(defined,moduleName)&&mod&&!mod.inited){if(!(!config.enforceDefine||shExports&&getGlobal(shExports)))return hasPathFallback(moduleName)?void 0:onError(makeError("nodefine","No define call for "+moduleName,null,[moduleName]));callGetModule([moduleName,shim.deps||[],shim.exportsFn])}checkLoaded()},nameToUrl:function(moduleName,ext,skipExt){var paths,pkgs,pkg,pkgPath,syms,i,parentModule,url,parentPath;if(req.jsExtRegExp.test(moduleName))url=moduleName+(ext||"");else{for(paths=config.paths,pkgs=config.pkgs,syms=moduleName.split("/"),i=syms.length;i>0;i-=1){if(parentModule=syms.slice(0,i).join("/"),pkg=getOwn(pkgs,parentModule),parentPath=getOwn(paths,parentModule)){isArray(parentPath)&&(parentPath=parentPath[0]),syms.splice(0,i,parentPath);break}if(pkg){pkgPath=moduleName===pkg.name?pkg.location+"/"+pkg.main:pkg.location,syms.splice(0,i,pkgPath);break}}url=syms.join("/"),url+=ext||(/^data\:|\?/.test(url)||skipExt?"":".js"),url=("/"===url.charAt(0)||url.match(/^[\w\+\.\-]+:/)?"":config.baseUrl)+url}return config.urlArgs?url+((-1===url.indexOf("?")?"?":"&")+config.urlArgs):url},load:function(id,url){req.load(context,id,url)},execCb:function(name,callback,args,exports){return callback.apply(exports,args)},onScriptLoad:function(evt){if("load"===evt.type||readyRegExp.test((evt.currentTarget||evt.srcElement).readyState)){interactiveScript=null;var data=getScriptData(evt);context.completeLoad(data.id)}},onScriptError:function(evt){var data=getScriptData(evt);return hasPathFallback(data.id)?void 0:onError(makeError("scripterror","Script error for: "+data.id,evt,[data.id]))}},context.require=context.makeRequire(),context}function getInteractiveScript(){return interactiveScript&&"interactive"===interactiveScript.readyState?interactiveScript:(eachReverse(scripts(),function(script){return"interactive"===script.readyState?interactiveScript=script:void 0}),interactiveScript)}var req,s,head,baseElement,dataMain,src,interactiveScript,currentlyAddingScript,mainScript,subPath,version="2.1.9",commentRegExp=/(\/\*([\s\S]*?)\*\/|([^:]|^)\/\/(.*)$)/gm,cjsRequireRegExp=/[^.]\s*require\s*\(\s*["']([^'"\s]+)["']\s*\)/g,jsSuffixRegExp=/\.js$/,currDirRegExp=/^\.\//,op=Object.prototype,ostring=op.toString,hasOwn=op.hasOwnProperty,ap=Array.prototype,apsp=ap.splice,isBrowser=!("undefined"==typeof window||"undefined"==typeof navigator||!window.document),isWebWorker=!isBrowser&&"undefined"!=typeof importScripts,readyRegExp=isBrowser&&"PLAYSTATION 3"===navigator.platform?/^complete$/:/^(complete|loaded)$/,defContextName="_",isOpera="undefined"!=typeof opera&&"[object Opera]"===opera.toString(),contexts={},cfg={},globalDefQueue=[],useInteractive=!1;if("undefined"==typeof define){if("undefined"!=typeof requirejs){if(isFunction(requirejs))return;cfg=requirejs,requirejs=void 0}"undefined"==typeof require||isFunction(require)||(cfg=require,require=void 0),req=requirejs=function(deps,callback,errback,optional){var context,config,contextName=defContextName;return isArray(deps)||"string"==typeof deps||(config=deps,isArray(callback)?(deps=callback,callback=errback,errback=optional):deps=[]),config&&config.context&&(contextName=config.context),context=getOwn(contexts,contextName),context||(context=contexts[contextName]=req.s.newContext(contextName)),config&&context.configure(config),context.require(deps,callback,errback)},req.config=function(config){return req(config)},req.nextTick="undefined"!=typeof setTimeout?function(fn){setTimeout(fn,4)}:function(fn){fn()},require||(require=req),req.version=version,req.jsExtRegExp=/^\/|:|\?|\.js$/,req.isBrowser=isBrowser,s=req.s={contexts:contexts,newContext:newContext},req({}),each(["toUrl","undef","defined","specified"],function(prop){req[prop]=function(){var ctx=contexts[defContextName];return ctx.require[prop].apply(ctx,arguments)}}),isBrowser&&(head=s.head=document.getElementsByTagName("head")[0],baseElement=document.getElementsByTagName("base")[0],baseElement&&(head=s.head=baseElement.parentNode)),req.onError=defaultOnError,req.createNode=function(config){var node=config.xhtml?document.createElementNS("http://www.w3.org/1999/xhtml","html:script"):document.createElement("script");return node.type=config.scriptType||"text/javascript",node.charset="utf-8",node.async=!0,node},req.load=function(context,moduleName,url){var node,config=context&&context.config||{};if(isBrowser)return node=req.createNode(config,moduleName,url),node.setAttribute("data-requirecontext",context.contextName),node.setAttribute("data-requiremodule",moduleName),!node.attachEvent||node.attachEvent.toString&&node.attachEvent.toString().indexOf("[native code")<0||isOpera?(node.addEventListener("load",context.onScriptLoad,!1),node.addEventListener("error",context.onScriptError,!1)):(useInteractive=!0,node.attachEvent("onreadystatechange",context.onScriptLoad)),node.src=url,currentlyAddingScript=node,baseElement?head.insertBefore(node,baseElement):head.appendChild(node),currentlyAddingScript=null,node;if(isWebWorker)try{importScripts(url),context.completeLoad(moduleName)}catch(e){context.onError(makeError("importscripts","importScripts failed for "+moduleName+" at "+url,e,[moduleName]))}},isBrowser&&!cfg.skipDataMain&&eachReverse(scripts(),function(script){return head||(head=script.parentNode),dataMain=script.getAttribute("data-main"),dataMain?(mainScript=dataMain,cfg.baseUrl||(src=mainScript.split("/"),mainScript=src.pop(),subPath=src.length?src.join("/")+"/":"./",cfg.baseUrl=subPath),mainScript=mainScript.replace(jsSuffixRegExp,""),req.jsExtRegExp.test(mainScript)&&(mainScript=dataMain),cfg.deps=cfg.deps?cfg.deps.concat(mainScript):[mainScript],!0):void 0}),define=function(name,deps,callback){var node,context;"string"!=typeof name&&(callback=deps,deps=name,name=null),isArray(deps)||(callback=deps,deps=null),!deps&&isFunction(callback)&&(deps=[],callback.length&&(callback.toString().replace(commentRegExp,"").replace(cjsRequireRegExp,function(match,dep){deps.push(dep)}),deps=(1===callback.length?["require"]:["require","exports","module"]).concat(deps))),useInteractive&&(node=currentlyAddingScript||getInteractiveScript(),node&&(name||(name=node.getAttribute("data-requiremodule")),context=contexts[node.getAttribute("data-requirecontext")])),(context?context.defQueue:globalDefQueue).push([name,deps,callback])},define.amd={jQuery:!0},req.exec=function(text){return eval(text)},req(cfg)}}(this),this.requirejsVars={require:require,requirejs:require,define:define},"browser"===env?!function(){require.load=function(context,moduleName,url){var xhr=new XMLHttpRequest;xhr.open("GET",url,!0),xhr.send(),xhr.onreadystatechange=function(){4===xhr.readyState&&(eval(xhr.responseText),context.completeLoad(moduleName))}}}():"rhino"===env?!function(){"use strict";require.load=function(context,moduleName,url){load(url),context.completeLoad(moduleName)}}():"node"===env?(this.requirejsVars.nodeRequire=nodeRequire,require.nodeRequire=nodeRequire,function(){"use strict";function hasProp(obj,prop){return hasOwn.call(obj,prop)}function syncTick(fn){fn()}function makeError(message,moduleName){var err=new Error(message);return err.requireModules=[moduleName],err}var nodeReq=requirejsVars.nodeRequire,req=requirejsVars.require,def=requirejsVars.define,fs=nodeReq("fs"),path=nodeReq("path"),vm=nodeReq("vm"),exists=fs.existsSync||path.existsSync,hasOwn=Object.prototype.hasOwnProperty;req.get=function(context,moduleName,relModuleMap,localRequire){("require"===moduleName||"exports"===moduleName||"module"===moduleName)&&context.onError(makeError("Explicit require of "+moduleName+" is not allowed.",moduleName));var ret,oldTick,moduleMap=context.makeModuleMap(moduleName,relModuleMap,!1,!0);if(moduleName=moduleMap.id,hasProp(context.defined,moduleName))ret=context.defined[moduleName];else if(void 0===ret){oldTick=context.nextTick,context.nextTick=syncTick;try{moduleMap.prefix?(localRequire([moduleMap.originalName]),moduleMap=context.makeModuleMap(moduleMap.originalName,relModuleMap,!1,!0),moduleName=moduleMap.id):(req.load(context,moduleName,moduleMap.url),context.enable(moduleMap,relModuleMap)),require([moduleName]),ret=context.defined[moduleName]}finally{context.nextTick=oldTick}}return ret},req.nextTick=function(fn){process.nextTick(fn)},req.makeNodeWrapper=function(contents){return"(function (require, requirejs, define) { "+contents+"\n}(requirejsVars.require, requirejsVars.requirejs, requirejsVars.define));"},req.load=function(context,moduleName,url){var contents,err,config=context.config;if(!config.shim[moduleName]||config.suppress&&config.suppress.nodeShim||console.warn("Shim config not supported in Node, may or may not work. Detected for module: "+moduleName),exists(url)){contents=fs.readFileSync(url,"utf8"),contents=req.makeNodeWrapper(contents);try{vm.runInThisContext(contents,fs.realpathSync(url))}catch(e){return err=new Error("Evaluating "+url+' as module "'+moduleName+'" failed with error: '+e),err.originalError=e,err.moduleName=moduleName,err.requireModules=[moduleName],err.fileName=url,context.onError(err)}}else def(moduleName,function(){var dirName,map=hasProp(context.registry,moduleName)&&context.registry[moduleName].map,parentMap=map&&map.parentMap,originalName=map&&map.originalName;"."===originalName.charAt(0)&&parentMap&&(dirName=parentMap.url.split("/"),dirName.pop(),originalName=dirName.join("/")+"/"+originalName);try{return(context.config.nodeRequire||req.nodeRequire)(originalName)}catch(e){return err=new Error('Tried loading "'+moduleName+'" at '+url+" then tried node's require(\""+originalName+'") and it failed with error: '+e),err.originalError=e,err.moduleName=originalName,err.requireModules=[moduleName],context.onError(err)}});context.completeLoad(moduleName)},req.exec=function(text){return text=req.makeNodeWrapper(text),eval(text)}}()):"xpconnect"===env&&!function(){"use strict";require.load=function(context,moduleName,url){load(url),context.completeLoad(moduleName)}}(),"o"===commandOption||fileName&&jsSuffixRegExp.test(fileName)||(fileName="main.js"),"node"===env&&reqMain!==module?(setBaseUrl(path.resolve(reqMain?reqMain.filename:".")),createRjsApi(),module.exports=requirejs,void 0):"browser"===env?(setBaseUrl(location.href),createRjsApi(),void 0):"rhino"!==env&&"xpconnect"!==env||"undefined"==typeof requirejsAsLib||!requirejsAsLib?("o"===commandOption?(loadLib(),require({baseUrl:require.s.contexts._.config.baseUrl,context:"build",catchError:{define:!0}},["env!env/args","env!env/quit","logger","build"],function(args,quit,logger,build){build(args).then(function(){},function(err){logger.error(err),quit(1)})})):"v"===commandOption?console.log("r.js: "+version+", RequireJS: "+this.requirejsVars.require.version+", UglifyJS2: 2.4.0, UglifyJS: 1.3.4"):"convert"===commandOption?(loadLib(),this.requirejsVars.require(["env!env/args","commonJs","env!env/print"],function(args,commonJs,print){var srcDir,outDir;return srcDir=args[0],outDir=args[1],srcDir&&outDir?(commonJs.convertDir(args[0],args[1]),void 0):(print("Usage: path/to/commonjs/modules output/dir"),void 0)})):("lib"===commandOption&&loadLib(),setBaseUrl(fileName),exists(fileName)?exec(readFile(fileName),fileName):showHelp()),void 0):(setBaseUrl(fileName),createRjsApi(),void 0)}("undefined"!=typeof console?console:void 0,"undefined"!=typeof Packages||"undefined"==typeof window&&"undefined"!=typeof Components&&Components.interfaces?Array.prototype.slice.call(arguments,0):[],"undefined"!=typeof readFile?readFile:void 0);